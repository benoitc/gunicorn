{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Gunicorn - Python WSGI HTTP Server","text":"The Python WSGI Server <p>       Battle-tested. Production-ready. One command to serve your Python apps.     </p> Get Started View on GitHub $ pip install gunicorn $ gunicorn myapp:app # Listening at http://127.0.0.1:8000 Why Gunicorn? Production-Proven <p>Trusted by thousands of companies. The pre-fork worker model handles traffic spikes gracefully.</p> Lightweight <p>Minimal dependencies, simple configuration. Efficient from containers to bare metal.</p> Compatible <p>Works with any WSGI or ASGI framework. Django, Flask, FastAPI\u2014it just runs.</p> Works With Your Stack <p>WSGI and ASGI frameworks, no changes needed</p> Django Flask FastAPI Pyramid Starlette Falcon Bottle Quart Choose Your Worker Sync <p>The default. One request per worker. Simple and predictable.</p> Async (Gevent/Eventlet) <p>Thousands of concurrent connections for I/O-bound workloads.</p> Threads <p>Multiple threads per worker. Balance concurrency and simplicity.</p> ASGI Beta <p>Native asyncio for FastAPI, Starlette, and async frameworks.</p> Documentation Quickstart Get running in 5 minutes Deployment Nginx, systemd, Docker Settings All configuration options FAQ Common questions Sponsors <p>Gunicorn is maintained thanks to our sponsors.</p> Your logo here Become a Sponsor Join the Community <p>Questions? Bugs? Ideas? We're here to help.</p> GitHub Issues #gunicorn on Libera Contributing"},{"location":"2010-news/","title":"2010","text":""},{"location":"2010-news/#changelog-2010","title":"Changelog - 2010","text":""},{"location":"2010-news/#0120-2010-12-22","title":"0.12.0 / 2010-12-22","text":"<ul> <li>Add support for logging configuration using a ini file.   It uses the standard Python logging's module Configuration   file format and allows anyone to use his custom file handler</li> <li>Add IPV6 support</li> <li>Add multidomain application example</li> <li>Improve gunicorn_django command when importing settings module   using DJANGO_SETTINGS_MODULE environment variable</li> <li>Send appropriate error status on http parsing</li> <li>Fix pidfile, set permissions so other user can read   it and use it.</li> <li>Fix temporary file leaking</li> <li>Fix setpgrp issue, can now be launched via ubuntu upstart</li> <li>Set the number of workers to zero on WINCH</li> </ul>"},{"location":"2010-news/#0112-2010-10-30","title":"0.11.2 / 2010-10-30","text":"<ul> <li>Add SERVER_SOFTWARE to the os.environ</li> <li>Add support for django settings environment variable</li> <li>Add support for logging configuration in Paster ini-files</li> <li>Improve arbiter notification in asynchronous workers</li> <li>Display the right error when a worker can't be used</li> <li>Fix Django support</li> <li>Fix HUP with Paster applications</li> <li>Fix readline in wsgi.input</li> </ul>"},{"location":"2010-news/#0111-2010-09-02","title":"0.11.1 / 2010-09-02","text":"<ul> <li>Implement max-requests feature to prevent memory leaks.</li> <li>Added 'worker_exit' server hook.</li> <li>Reseed the random number generator after fork().</li> <li>Improve Eventlet worker.</li> <li>Fix Django command <code>run_gunicorn</code>.</li> <li>Fix the default proc name internal setting.</li> <li>Workaround to prevent Gevent worker to segfault on MacOSX.</li> </ul>"},{"location":"2010-news/#0110-2010-08-12","title":"0.11.0 / 2010-08-12","text":"<ul> <li>Improve dramatically performances of Gevent and Eventlet workers</li> <li>Optimize HTTP parsing</li> <li>Drop Server and Date headers in start_response when provided.</li> <li>Fix latency issue in async workers</li> </ul>"},{"location":"2010-news/#0101-2010-08-06","title":"0.10.1 / 2010-08-06","text":"<ul> <li>Improve gevent's workers. Add \"egg:gunicorn#gevent_wsgi\" worker using   <code>gevent.wsgi &lt;http://www.gevent.org/gevent.wsgi.html&gt;</code> and   \"egg:gunicorn#gevent_pywsgi\" worker using <code>gevent.pywsgi   &lt;http://www.gevent.org/gevent.pywsgi.html&gt;</code> .   \"egg:gunicorn#gevent\" using our own HTTP parser is still here and   is recommended for normal uses. Use the \"gevent.wsgi\" parser if you   need really fast connections and don't need streaming, keepalive or ssl.</li> <li>Add pre/post request hooks</li> <li>Exit more quietly</li> <li>Fix gevent dns issue</li> </ul>"},{"location":"2010-news/#0100-2010-07-08","title":"0.10.0 / 2010-07-08","text":"<ul> <li>New HTTP parser.</li> <li>New HUP behaviour. Re-reads the configuration and then reloads all   worker processes without changing the master process id. Helpful for   code reloading and monitoring applications like supervisord and runit.</li> <li>Added a preload configuration parameter. By default, application code   is now loaded after a worker forks. This couple with the new HUP   handling can be used for dev servers to do hot code reloading. Using   the preload flag can help a bit in small memory VM's.</li> <li>Allow people to pass command line arguments to WSGI applications. See:   <code>examples/alt_spec.py   &lt;http://github.com/benoitc/gunicorn/raw/master/examples/alt_spec.py&gt;</code>_</li> <li>Added an example gevent reloader configuration:   <code>examples/example_gevent_reloader.py   &lt;http://github.com/benoitc/gunicorn/blob/master/examples/example_gevent_reloader.py&gt;</code>_.</li> <li>New gevent worker \"egg:gunicorn#gevent2\", working with gevent.wsgi.</li> <li>Internal refactoring and various bug fixes.</li> <li>New documentation website.</li> </ul>"},{"location":"2010-news/#091-2010-05-26","title":"0.9.1 / 2010-05-26","text":"<ul> <li>Support https via X-Forwarded-Protocol or X-Forwarded-Ssl headers</li> <li>Fix configuration</li> <li>Remove -d options which was used instead of -D for daemon.</li> <li>Fix umask in unix socket</li> </ul>"},{"location":"2010-news/#090-2010-05-24","title":"0.9.0 / 2010-05-24","text":"<ul> <li>Added when_ready hook. Called just after the server is started</li> <li>Added preload setting. Load application code before the worker processes   are forked.</li> <li>Refactored Config</li> <li>Fix pidfile</li> <li>Fix QUIT/HUP in async workers</li> <li>Fix reexec</li> <li>Documentation improvements</li> </ul>"},{"location":"2010-news/#081-2010-04-29","title":"0.8.1 / 2010-04-29","text":"<ul> <li>Fix builtins import in config</li> <li>Fix installation with pip</li> <li>Fix Tornado WSGI support</li> <li>Delay application loading until after processing all configuration</li> </ul>"},{"location":"2010-news/#080-2010-04-22","title":"0.8.0 / 2010-04-22","text":"<ul> <li>Refactored Worker management for better async support. Now use the -k option   to set the type of request processing to use</li> <li>Added support for Tornado_</li> </ul>"},{"location":"2010-news/#072-2010-04-15","title":"0.7.2 / 2010-04-15","text":"<ul> <li>Added --spew option to help debugging (installs a system trace hook)</li> <li>Some fixes in async arbiters</li> <li>Fix a bug in start_response on error</li> </ul>"},{"location":"2010-news/#071-2010-04-01","title":"0.7.1 / 2010-04-01","text":"<ul> <li>Fix bug when responses have no body.</li> </ul>"},{"location":"2010-news/#070-2010-03-26","title":"0.7.0 / 2010-03-26","text":"<ul> <li>Added support for Eventlet_ and Gevent_ based workers.</li> <li>Added Websockets_ support</li> <li>Fix Chunked Encoding</li> <li>Fix SIGWINCH on OpenBSD_</li> <li>Fix <code>PEP 333</code>_ compliance for the write callable.</li> </ul>"},{"location":"2010-news/#065-2010-03-11","title":"0.6.5 / 2010-03-11","text":"<ul> <li>Fix pidfile handling</li> <li>Fix Exception Error</li> </ul>"},{"location":"2010-news/#064-2010-03-08","title":"0.6.4 / 2010-03-08","text":"<ul> <li>Use cStringIO for performance when possible.</li> <li>Fix worker freeze when a remote connection closes unexpectedly.</li> </ul>"},{"location":"2010-news/#063-2010-03-07","title":"0.6.3 / 2010-03-07","text":"<ul> <li>Make HTTP parsing faster.</li> <li>Various bug fixes</li> </ul>"},{"location":"2010-news/#062-2010-03-01","title":"0.6.2 / 2010-03-01","text":"<ul> <li>Added support for chunked response.</li> <li>Added proc_name option to the config file.</li> <li>Improved the HTTP parser. It now uses buffers instead of strings to store   temporary data.</li> <li>Improved performance when sending responses.</li> <li>Workers are now murdered by age (the oldest is killed first).</li> </ul>"},{"location":"2010-news/#061-2010-02-24","title":"0.6.1 / 2010-02-24","text":"<ul> <li>Added gunicorn config file support for Django admin command</li> <li>Fix gunicorn config file. -c was broken.</li> <li>Removed TTIN/TTOU from workers which blocked other signals.</li> </ul>"},{"location":"2010-news/#060-2010-02-22","title":"0.6.0 / 2010-02-22","text":"<ul> <li>Added setproctitle support</li> <li>Change privilege switch behavior. We now work like NGINX, master keeps the   permissions, new uid/gid permissions are only set for workers.</li> </ul>"},{"location":"2010-news/#051-2010-02-22","title":"0.5.1 / 2010-02-22","text":"<ul> <li>Fix umask</li> <li>Added Debian packaging</li> </ul>"},{"location":"2010-news/#050-2010-02-20","title":"0.5.0 / 2010-02-20","text":"<ul> <li>Added <code>configuration file &lt;configuration.html&gt;</code>_ handler.</li> <li>Added support for pre/post fork hooks</li> <li>Added support for before_exec hook</li> <li>Added support for unix sockets</li> <li>Added launch of workers processes under different user/group</li> <li>Added umask option</li> <li>Added SCRIPT_NAME support</li> <li>Better support of some exotic settings for Django projects</li> <li>Better support of Paste-compatible applications</li> <li>Some refactoring to make the code easier to hack</li> <li>Allow multiple keys in request and response headers</li> </ul> <p>.. Tornado: http://www.tornadoweb.org/ .. <code>PEP 333</code>: https://www.python.org/dev/peps/pep-0333/ .. _Eventlet: http://eventlet.net/ .. _Gevent: http://www.gevent.org/ .. _OpenBSD: https://www.openbsd.org/ .. _Websockets: https://html.spec.whatwg.org/multipage/web-sockets.html</p>"},{"location":"2011-news/","title":"2011","text":""},{"location":"2011-news/#changelog-2011","title":"Changelog - 2011","text":""},{"location":"2011-news/#0134-2011-09-23","title":"0.13.4 / 2011-09-23","text":"<ul> <li>fix util.closerange function used to prevent leaking fds on python 2.5   (typo.md)</li> </ul>"},{"location":"2011-news/#0133-2011-09-19","title":"0.13.3 / 2011-09-19","text":"<ul> <li>refactor gevent worker</li> <li>prevent leaking fds on reexec</li> <li>fix inverted request_time computation</li> </ul>"},{"location":"2011-news/#0132-2011-09-17","title":"0.13.2 / 2011-09-17","text":"<ul> <li>Add support for Tornado 2.0 in tornado worker</li> <li>Improve access logs: allows customisation of the log format &amp; add   request time</li> <li>Logger module is now pluggable</li> <li>Improve graceful shutdown in Python versions &gt;= 2.6</li> <li>Fix post_request root arity for compatibility</li> <li>Fix sendfile support</li> <li>Fix Django reloading</li> </ul>"},{"location":"2011-news/#0131-2011-08-22","title":"0.13.1 / 2011-08-22","text":"<ul> <li>Fix unix socket. log argument was missing.</li> </ul>"},{"location":"2011-news/#0130-2011-08-22","title":"0.13.0 / 2011-08-22","text":"<ul> <li>Improve logging: allows file-reopening and add access log file   compatible with the <code>apache combined log format &lt;http://httpd.apache.org/docs/2.0/logs.html#combined&gt;</code>_</li> <li>Add the possibility to set custom SSL headers. X-Forwarded-Protocol   and X-Forwarded-SSL are still the default</li> <li>New <code>on_reload</code> hook to customize how gunicorn spawn new workers on   SIGHUP</li> <li>Handle projects with relative path in django_gunicorn command</li> <li>Preserve path parameters in PATH_INFO</li> <li>post_request hook now accepts the environ as argument.</li> <li>When stopping the arbiter, close the listener asap.</li> <li>Fix Django command <code>run_gunicorn</code> in settings reloading</li> <li>Fix Tornado_ worker exiting</li> <li>Fix the use of sendfile in wsgi.file_wrapper</li> </ul>"},{"location":"2011-news/#0122-2011-05-18","title":"0.12.2 / 2011-05-18","text":"<ul> <li>Add wsgi.file_wrapper optimised for FreeBSD, Linux &amp; MacOSX (use   sendfile if available)</li> <li>Fix django run_gunicorn command. Make sure we reload the application   code.</li> <li>Fix django localisation</li> <li>Compatible with gevent 0.14dev</li> </ul>"},{"location":"2011-news/#0121-2011-03-23","title":"0.12.1 / 2011-03-23","text":"<ul> <li>Add \"on_starting\" hook. This hook can be used to set anything before   the arbiter really start</li> <li>Support bdist_rpm in setup</li> <li>Improve content-length handling (pep 3333)</li> <li>Improve Django support</li> <li>Fix daemonizing (#142)</li> <li>Fix ipv6 handling</li> </ul> <p>.. _Tornado: http://www.tornadoweb.org/</p>"},{"location":"2012-news/","title":"2012","text":""},{"location":"2012-news/#changelog-2012","title":"Changelog - 2012","text":""},{"location":"2012-news/#0170-2012-12-25","title":"0.17.0 / 2012-12-25","text":"<ul> <li>allows gunicorn to bind to multiple address</li> <li>add SSL support</li> <li>add syslog support</li> <li>add nworkers_changed hook</li> <li>add response arg for post_request hook</li> <li>parse command line with argparse (replace deprecated optparse)</li> <li>fix PWD detection in arbiter</li> <li>miscellaneous PEP8 fixes</li> </ul>"},{"location":"2012-news/#0161-2012-11-19","title":"0.16.1 / 2012-11-19","text":"<ul> <li>Fix packaging</li> </ul>"},{"location":"2012-news/#0160-2012-11-19","title":"0.16.0 / 2012-11-19","text":"<ul> <li>Added support for Python 3.2 &amp; 3.3</li> <li>Expose --pythonpath command to all gunicorn commands</li> <li>Honor $PORT environment variable, useful for deployment on heroku</li> <li>Removed support for Python 2.5</li> <li>Make sure we reopen the logs on the console</li> <li>Fix django settings module detection from path</li> <li>Reverted timeout for client socket. Fix issue on blocking issues.</li> <li>Fixed gevent worker</li> </ul>"},{"location":"2012-news/#0150-2012-10-18","title":"0.15.0 / 2012-10-18","text":"<ul> <li>new documentation site on https://gunicorn.org</li> <li>new website on http://gunicorn.org</li> <li>add <code>haproxy PROXY protocol &lt;http://haproxy.1wt.eu/download/1.5/doc/proxy-protocol.txt&gt;</code>_ support</li> <li>add  ForwardedAllowIPS option: allows to filter Front-end's IPs   allowed to handle X-Forwarded-* headers.</li> <li>add callable hooks for paster config</li> <li>add x-forwarded-proto as secure scheme default (Heroku is using this)</li> <li>allows gunicorn to load a pre-compiled application</li> <li>support file reopening &amp; reexec for all loggers</li> <li>initialize the logging config file with defaults.</li> <li>set timeout for client socket (slow client DoS).</li> <li>NoMoreData, ChunkMissingTerminator, InvalidChunkSize are now   IOError exceptions</li> <li>fix graceful shutdown in gevent</li> <li>fix limit request line check</li> </ul>"},{"location":"2012-news/#0146-2012-07-26","title":"0.14.6 / 2012-07-26","text":"<ul> <li>fix gevent &amp; subproces</li> <li>fix request line length check</li> <li>fix keepalive = 0</li> <li>fix tornado worker</li> </ul>"},{"location":"2012-news/#0145-2012-06-24","title":"0.14.5 / 2012-06-24","text":"<ul> <li>fix logging during daemonisation</li> </ul>"},{"location":"2012-news/#0144-2012-06-24","title":"0.14.4 / 2012-06-24","text":"<ul> <li>new --graceful-timeout option</li> <li>fix multiple issues with request limit</li> <li>more fixes in django settings resolutions</li> <li>fix gevent.core import</li> <li>fix keepalive=0 in eventlet worker</li> <li>fix handle_error display with the unix worker</li> <li> <p>fix tornado.wsgi.WSGIApplication calling error</p> </li> <li> <p>breaking change: take the control on graceful reload back.   graceful can't be overridden anymore using the on_reload function.</p> </li> </ul>"},{"location":"2012-news/#0143-2012-05-15","title":"0.14.3 / 2012-05-15","text":"<ul> <li>improvement: performance of http.body.Body.readline()</li> <li>improvement: log HTTP errors in access log like Apache</li> <li>improvement: display traceback when the worker fails to boot</li> <li>improvement: makes gunicorn work with gevent 1.0</li> <li>examples: websocket example now supports hybi13</li> <li>fix: reopen log files after initialization</li> <li>fix: websockets support</li> <li>fix: django1.4 support</li> <li>fix: only load the paster application 1 time</li> </ul>"},{"location":"2012-news/#0142-2012-03-16","title":"0.14.2 / 2012-03-16","text":"<ul> <li>add validate_class validator: allows to use a class or a method to   initialize the app during in-code configuration</li> <li>add support for max_requests in tornado worker</li> <li>add support for disabling x_forwarded_for_header in tornado worker</li> <li>gevent_wsgi is now an alias of gevent_pywsgi</li> <li>Fix gevent_pywsgi worker</li> </ul>"},{"location":"2012-news/#0141-2012-03-02","title":"0.14.1 / 2012-03-02","text":"<ul> <li>fixing source archive, reducing its size</li> </ul>"},{"location":"2012-news/#0140-2012-02-27","title":"0.14.0 / 2012-02-27","text":"<ul> <li>check if Request line is too large: You can now pass the parameter   <code>--limit-request-line</code> or set the <code>limit_request_line</code> in your   configuration file to set the max size of the request line in bytes.</li> <li>limit the number of headers fields and their size. Add   <code>--limit-request-field</code> and <code>limit-request-field-size</code> settings</li> <li>add <code>p</code> variable to the log access format to log pidfile</li> <li>add <code>{HeaderName}o</code> variable to the logo access format to log the   response header HeaderName</li> <li>request header is now logged with the variable <code>{HeaderName}i</code> in the   access log file</li> <li>improve error logging</li> <li>support logging.configFile</li> <li>support django 1.4 in both gunicorn_django &amp; run_gunicorn command</li> <li>improve reload in django run_gunicorn command (should just work now)</li> <li>allows people to set the <code>X-Forwarded-For</code> header key and disable it by   setting an empty string.</li> <li>fix support of Tornado</li> <li>many other fixes.</li> </ul>"},{"location":"2013-news/","title":"2013","text":""},{"location":"2013-news/#changelog-2013","title":"Changelog - 2013","text":""},{"location":"2013-news/#180-2013-08-26","title":"18.0 / 2013-08-26","text":"<ul> <li>new: add <code>-e/--env</code> command line argument to pass an environment variables to   gunicorn</li> <li>new: add <code>--chdir</code> command line argument to specified directory   before apps loading.  - new: add wsgi.file_wrapper support in async workers</li> <li>new: add <code>--paste</code> command line argument to set the paster config file</li> <li>deprecated: the command <code>gunicorn_django</code> is now deprecated. You should now   run your application with the WSGI interface installed with your project (see   https://docs.djangoproject.com/en/1.4/howto/deployment/wsgi/gunicorn/) for   more infos.</li> <li>deprecated:  the command <code>gunicorn_paste</code> is deprecated. You now should use   the new <code>--paste</code> argument to set the configuration file of your paster   application.</li> <li>fix: Removes unmatched leading quote from the beginning of the default access   log format string</li> <li>fix: null timeout</li> <li>fix: gevent worker</li> <li>fix: don't reload the paster app when using pserve</li> <li>fix: after closing for error do not keep alive the connection</li> <li>fix: responses 1xx, 204 and 304 should not force the connection to be closed</li> </ul>"},{"location":"2013-news/#175-2013-07-03","title":"17.5 / 2013-07-03","text":"<ul> <li>new: add signals documentation</li> <li>new: add post_worker_init hook for workers</li> <li>new: try to use gunicorn.conf.py in current folder as the default   config file.</li> <li>fix graceful timeout with the Eventlet worker</li> <li>fix: don't raise an error when closing the socket if already closed</li> <li>fix: fix --settings parameter for django application and try to find   the django settings when using the <code>gunicorn</code> command.</li> <li>fix: give the initial global_conf to paster application</li> <li>fix: fix 'Expect: 100-continue' support on Python 3</li> </ul>"},{"location":"2013-news/#new-versioning","title":"New versioning:","text":"<p>With this release, the versioning of Gunicorn is changing. Gunicorn is stable since a long time and there is no point to release a \"1.0\" now. It should have been done since a long time. 0.17 really meant it was the 17th stable version. From the beginning we have only 2 kind of releases:</p> <p>major release: releases with major changes or huge features added services releases: fixes and minor features added So from now we will apply the following versioning <code>&lt;major&gt;.&lt;service&gt;</code>. For example <code>17.5</code> is a service release.</p>"},{"location":"2013-news/#0174-2013-04-24","title":"0.17.4 / 2013-04-24","text":"<ul> <li>fix unix socket address parsing</li> </ul>"},{"location":"2013-news/#0173-2013-04-23","title":"0.17.3 / 2013-04-23","text":"<ul> <li>add systemd sockets support</li> <li>add <code>python -m gunicorn.app.wsgiapp</code> support</li> <li>improve logger class inheritance</li> <li>exit when the config file isn't found</li> <li>add the -R option to enable stdio inheritance in daemon mode</li> <li>don't close file descriptors &gt; 3 in daemon mode</li> <li>improve STDOUT/STDERR logging</li> <li>fix pythonpath option</li> <li>fix pidfile creation on Python 3</li> <li>fix gevent worker exit</li> <li>fix ipv6 detection when the platform isn't supporting it</li> </ul>"},{"location":"2013-news/#0172-2013-01-07","title":"0.17.2 / 2013-01-07","text":"<ul> <li>optimize readline</li> <li>make imports errors more visible when loading an app or a logging   class</li> <li>fix tornado worker: don't pass ssl options if there are none</li> <li>fix PEP3333: accept only bytetrings in the response body</li> <li>fix support on CYGWIN platforms</li> </ul>"},{"location":"2013-news/#0171-2013-01-05","title":"0.17.1 / 2013-01-05","text":"<ul> <li>add syslog facility name setting</li> <li>fix <code>--version</code> command line argument</li> <li>fix wsgi url_scheme for https</li> </ul>"},{"location":"2014-news/","title":"2014","text":""},{"location":"2014-news/#changelog-2014","title":"Changelog - 2014","text":"<p>Note</p> <p>Please see news for the latest changes.</p>"},{"location":"2014-news/#1911-2014-08-16","title":"19.1.1 / 2014-08-16","text":""},{"location":"2014-news/#changes","title":"Changes","text":""},{"location":"2014-news/#core","title":"Core","text":"<ul> <li>fix Issue #835: display correct pid of already running instance</li> <li>fix PR #833: fix <code>PyTest</code> class in setup.py.</li> </ul>"},{"location":"2014-news/#logging","title":"Logging","text":"<ul> <li>fix Issue #838: statsd logger, send statsd timing metrics in milliseconds</li> <li>fix Issue #839: statsd logger, allows for empty log message while pushing   metrics and restore worker number in DEBUG logs</li> <li>fix Issue #850: add timezone to logging</li> <li>fix Issue #853: Respect logger_class setting unless statsd is on</li> </ul>"},{"location":"2014-news/#aiohttp-worker","title":"AioHttp worker","text":"<ul> <li>fix Issue #830 make sure gaiohttp worker is shipped with gunicorn.</li> </ul>"},{"location":"2014-news/#191-2014-07-26","title":"19.1 / 2014-07-26","text":""},{"location":"2014-news/#changes_1","title":"Changes","text":""},{"location":"2014-news/#core_1","title":"Core","text":"<ul> <li>fix Issue #785: handle binary type address given to a client socket address</li> <li>fix graceful shutdown. make sure QUIT and TERMS signals are switched everywhere.</li> <li>Issue #799: fix support loading config from module</li> <li>Issue #805: fix check for file-like objects</li> <li>fix Issue #815: args validation in WSGIApplication.init</li> <li>fix Issue #787: check if we load a pyc file or not.</li> </ul>"},{"location":"2014-news/#tornado-worker","title":"Tornado worker","text":"<ul> <li>fix Issue #771: support tornado 4.0</li> <li>fix Issue #783: x_headers error. The x-forwarded-headers option has been removed   in <code>c4873681299212d6082cd9902740eef18c2f14f1   &lt;https://github.com/benoitc/gunicorn/commit/c4873681299212d6082cd9902740eef18c2f14f1&gt;</code>_.   The discussion is available on PR #633.</li> </ul>"},{"location":"2014-news/#aiohttp-worker_1","title":"AioHttp worker","text":"<ul> <li>fix: fetch all body in input. fix Issue #803</li> <li>fix: don't install the worker if python &lt; 3.3</li> <li>fix Issue #822: Support UNIX sockets in gaiohttp worker</li> </ul>"},{"location":"2014-news/#async-worker","title":"Async worker","text":"<ul> <li>fix Issue #790: StopIteration shouldn't be caught at this level.</li> </ul>"},{"location":"2014-news/#logging_1","title":"Logging","text":"<ul> <li>add statsd logging handler fix Issue #748</li> </ul>"},{"location":"2014-news/#paster","title":"Paster","text":"<ul> <li>fix Issue #809: Set global logging configuration from a Paste config.</li> </ul>"},{"location":"2014-news/#extra","title":"Extra","text":"<ul> <li>fix RuntimeError in gunicorn.reloader (Issue #807)</li> </ul>"},{"location":"2014-news/#documentation","title":"Documentation","text":"<ul> <li>update faq: put a note on how <code>watch logs in the console   &lt;https://gunicorn.org/faq/#why-i-dont-see-any-logs-in-the-console&gt;</code>_   since many people asked for it.</li> </ul>"},{"location":"2014-news/#190-2014-06-12","title":"19.0 / 2014-06-12","text":"<p>Gunicorn 19.0 is a major release with new features and fixes. This version improve a lot the usage of Gunicorn with python 3 by adding <code>two new workers &lt;https://gunicorn.org/design/#asyncio-workers&gt;</code>_ to it: <code>gthread</code> a fully threaded async worker using futures and <code>gaiohttp</code> a worker using asyncio.</p>"},{"location":"2014-news/#breaking-changes","title":"Breaking Changes","text":""},{"location":"2014-news/#switch-quit-and-term-signals","title":"Switch QUIT and TERM signals","text":"<p>With this change, when gunicorn receives a QUIT all the workers are killed immediately and exit and TERM is used for the graceful shutdown.</p> <p>Note: the old behaviour was based on the NGINX but the new one is more correct according the following doc:</p> <p>https://www.gnu.org/software/libc/manual/html_node/Termination-Signals.html</p> <p>also it is complying with the way the signals are sent by heroku:</p> <p>https://devcenter.heroku.com/articles/python-faq#what-constraints-exist-when-developing-applications-on-heroku</p>"},{"location":"2014-news/#deprecations","title":"Deprecations","text":"<p><code>run_gunicorn</code>, <code>gunicorn_django</code> and <code>gunicorn_paster</code> are now completely deprecated and will be removed in the next release. Use the <code>gunicorn</code> command instead.</p>"},{"location":"2014-news/#changes_2","title":"Changes","text":""},{"location":"2014-news/#core_2","title":"core","text":"<ul> <li>add aiohttp worker named <code>gaiohttp</code> using asyncio. Full async worker   on python 3.</li> <li>fix HTTP-violating excess whitespace in write_error output</li> <li>fix: try to log what happened in the worker after a timeout, add a   <code>worker_abort</code> hook on SIGABRT signal.</li> <li>fix: save listener socket name in workers so we can handle buffered   keep-alive requests after the listener has closed.</li> <li>add on_exit hook called just before exiting gunicorn.</li> <li>add support for python 3.4</li> <li>fix: do not swallow unexpected errors when reaping</li> <li>fix: remove incompatible SSL option with python 2.6</li> <li>add new async gthread worker and <code>--threads</code> options allows to set multiple   threads to listen on connection</li> <li>deprecate <code>gunicorn_django</code> and <code>gunicorn_paster</code></li> <li>switch QUIT and TERM signal</li> <li>reap workers in SIGCHLD handler</li> <li>add universal wheel support</li> <li>use <code>email.utils.formatdate</code> in gunicorn.util.http_date</li> <li>deprecate the <code>--debug</code> option</li> <li>fix: log exceptions that occur after response start \u2026</li> <li>allows loading of applications from <code>.pyc</code> files (#693)</li> <li>fix: issue #691, raw_env config file parsing</li> <li>use a dynamic timeout to wait for the optimal time. (Reduce power   usage)</li> <li>fix python3 support when notifying the arbiter</li> <li>add: honor $WEB_CONCURRENCY environment variable. Useful for heroku   setups.</li> <li>add: include tz offset in access log</li> <li>add: include access logs in the syslog handler.</li> <li>add --reload option for code reloading</li> <li>add the capability to load <code>gunicorn.base.Application</code> without the loading of   the arguments of the command line. It allows you to embed gunicorn in   your own application.</li> <li>improve: set wsgi.multithread to True for async workers</li> <li>fix logging: make sure to redirect wsgi.errors when needed</li> <li>add: syslog logging can now be done to a unix socket</li> <li>fix logging: don't try to redirect stdout/stderr to the logfile.</li> <li>fix logging: don't propagate log</li> <li>improve logging: file option can be overridden by the gunicorn options   <code>--error-logfile</code> and <code>--access-logfile</code> if they are given.</li> <li>fix: don't override SERVER_* by the Host header</li> <li>fix: handle_error</li> <li>add more option to configure SSL</li> <li>fix: sendfile with SSL</li> <li>add: worker_int callback (to react on SIGTERM)</li> <li>fix: don't depend on entry point for internal classes, now absolute   modules path can be given.</li> <li>fix: Error messages are now encoded in latin1</li> <li>fix: request line length check</li> <li>improvement: proxy_allow_ips: Allow proxy protocol if \"*\" specified</li> <li>fix: run worker's <code>setup</code> method  before setting num_workers</li> <li>fix: FileWrapper inherit from <code>object</code> now</li> <li>fix: Error messages are now encoded in latin1</li> <li>fix: don't spam the console on SIGWINCH.</li> <li>fix: logging -don't stringify T and D logging atoms (#621)</li> <li>add support for the latest django version</li> <li>deprecate <code>run_gunicorn</code> django option</li> <li>fix: sys imported twice</li> </ul>"},{"location":"2014-news/#gevent-worker","title":"gevent worker","text":"<ul> <li>fix: make sure to stop all listeners</li> <li>fix: monkey patching is now done in the worker</li> <li>fix: \"global name 'hub' is not defined\"</li> <li>fix: reinit <code>hub</code> on old versions of gevent</li> <li>support gevent 1.0</li> <li>fix: add subprocess in monkey patching</li> <li>fix: add support for multiple listener</li> </ul>"},{"location":"2014-news/#eventlet-worker","title":"eventlet worker","text":"<ul> <li>fix: merge duplicate EventletWorker.init_process method (fixes #657)</li> <li>fix: missing errno import for eventlet sendfile patch</li> <li>fix: add support for multiple listener</li> </ul>"},{"location":"2014-news/#tornado-worker_1","title":"tornado worker","text":"<ul> <li>add graceful stop support</li> </ul>"},{"location":"2015-news/","title":"2015","text":""},{"location":"2015-news/#changelog-2015","title":"Changelog - 2015","text":"<p>Note</p> <p>Please see news for the latest changes.</p>"},{"location":"2015-news/#1943-20151230","title":"19.4.3 / 2015/12/30","text":"<ul> <li>fix: don't check if a file is writable using os.stat with SELINUX (Issue #1171)</li> </ul>"},{"location":"2015-news/#1942-20151229","title":"19.4.2 / 2015/12/29","text":""},{"location":"2015-news/#core","title":"Core","text":"<ul> <li>improvement: handle HaltServer in manage_workers (Issue #1095)</li> <li>fix: Do not rely on sendfile sending requested count (Issue #1155)</li> <li>fix: claridy --no-sendfile default (Issue #1156)</li> <li>fix: LoggingCatch sendfile failure from no file descriptor (Issue #1160)</li> </ul>"},{"location":"2015-news/#logging","title":"Logging","text":"<ul> <li>fix: Always send access log to syslog if syslog is on</li> <li>fix: check auth before trying to own a file (Issue #1157)</li> </ul>"},{"location":"2015-news/#documentation","title":"Documentation","text":"<ul> <li>fix: Fix Slowloris broken link. (Issue #1142)</li> <li>Tweak markup in faq.rst</li> </ul>"},{"location":"2015-news/#testing","title":"Testing","text":"<ul> <li>fix: gaiohttp test (Issue #1164)</li> </ul>"},{"location":"2015-news/#1941-20151125","title":"19.4.1 / 2015/11/25","text":"<ul> <li>fix tornado worker (Issue #1154)</li> </ul>"},{"location":"2015-news/#1940-20151120","title":"19.4.0 / 2015/11/20","text":""},{"location":"2015-news/#core_1","title":"Core","text":"<ul> <li>fix: make sure that a user is able to access to the logs after dropping a   privilege (Issue #1116)</li> <li>improvement: inherit the <code>Exception</code> class where it needs to be (Issue #997)</li> <li>fix: make sure headers are always encoded as latin1 RFC 2616 (Issue #1102)</li> <li>improvement: reduce arbiter noise (Issue #1078)</li> <li>fix: don't close the unix socket when the worker exit (Issue #1088)</li> <li>improvement: Make last logged worker count an explicit instance var (Issue #1078)</li> <li>improvement: prefix config file with its type (Issue #836)</li> <li>improvement: pidfile handing (Issue #1042)</li> <li>fix: catch OSError as well as ValueError on race condition (Issue #1052)</li> <li>improve support of ipv6 by backporting urlparse.urlsplit from Python 2.7 to   Python 2.6.</li> <li>fix: raise InvalidRequestLine when the line contains malicious data   (Issue #1023)</li> <li>fix: fix argument to disable sendfile</li> <li>fix: add gthread to the list of supported workers (Issue #1011)</li> <li>improvement: retry socket binding up to five times upon EADDRNOTAVAIL   (Issue #1004)</li> <li>breaking change: only honor headers that can be encoded in ascii to comply to   the RFC 7230 (See Issue #1151).</li> </ul>"},{"location":"2015-news/#logging_1","title":"Logging","text":"<ul> <li>add new parameters to access log (Issue #1132)</li> <li>fix: make sure that files handles are correctly reopened on HUP   (Issue #627)</li> <li>include request URL in error message (Issue #1071)</li> <li>get username in access logs (Issue #1069)</li> <li>fix statsd logging support on Python 3 (Issue #1010)</li> </ul>"},{"location":"2015-news/#testing_1","title":"Testing","text":"<ul> <li>use last version of mock.</li> <li>many fixes in Travis CI support</li> <li>miscellaneous improvements in tests</li> </ul>"},{"location":"2015-news/#thread-worker","title":"Thread worker","text":"<ul> <li>fix: Fix self.nr usage in ThreadedWorker so that auto restart works as   expected (Issue #1031)</li> </ul>"},{"location":"2015-news/#gevent-worker","title":"Gevent worker","text":"<ul> <li>fix quit signal handling (Issue #1128)</li> <li>add support for Python 3 (Issue #1066)</li> <li>fix: make graceful shutdown thread-safe (Issue #1032)</li> </ul>"},{"location":"2015-news/#tornado-worker","title":"Tornado worker","text":"<ul> <li>fix ssl options (Issue #1146, Issue #1135)</li> <li>don't check timeout when stopping gracefully (Issue #1106)</li> </ul>"},{"location":"2015-news/#aiohttp-worker","title":"AIOHttp worker","text":"<ul> <li>add SSL support (Issue #1105)</li> </ul>"},{"location":"2015-news/#documentation_1","title":"Documentation","text":"<ul> <li>fix link to proc name setting (Issue #1144)</li> <li>fix worker class documentation (Issue #1141, Issue #1104)</li> <li>clarify graceful timeout documentation (Issue #1137)</li> <li>don't duplicate NGINX config files examples (Issue #1050, Issue #1048)</li> <li>add <code>web.py</code> framework example (Issue #1117)</li> <li>update Debian/Ubuntu installations instructions (Issue #1112)</li> <li>clarify <code>pythonpath</code> setting description (Issue #1080)</li> <li>tweak some example for python3</li> <li>clarify <code>sendfile</code> documentation</li> <li>miscellaneous typos in source code comments (thanks!)</li> <li>clarify why REMOTE_ADD may not be the user's IP address (Issue #1037)</li> </ul>"},{"location":"2015-news/#misc","title":"Misc","text":"<ul> <li>fix: reloader should survive SyntaxError (Issue #994)</li> <li>fix: expose the reloader class to the worker.</li> </ul>"},{"location":"2015-news/#1930-20150306","title":"19.3.0 / 2015/03/06","text":""},{"location":"2015-news/#core_2","title":"Core","text":"<ul> <li>fix: Issue #978 make sure a listener is inheritable</li> <li>add <code>check_config</code> class method to workers</li> <li>fix: Issue #983 fix select timeout in sync worker with multiple   connections</li> <li>allows workers to access to the reloader. close Issue #984</li> <li>raise TypeError instead of AssertionError</li> </ul>"},{"location":"2015-news/#logging_2","title":"Logging","text":"<ul> <li>make Logger.loglevel a class attribute</li> </ul>"},{"location":"2015-news/#documentation_2","title":"Documentation","text":"<ul> <li>fix: Issue #988 fix syntax errors in examples/gunicorn_rc</li> </ul>"},{"location":"2015-news/#1921-2015024","title":"19.2.1 / 2015/02/4","text":""},{"location":"2015-news/#logging_3","title":"Logging","text":"<ul> <li>expose loglevel in the Logger class</li> </ul>"},{"location":"2015-news/#asyncio-worker-gaiohttpmd","title":"AsyncIO worker (gaiohttp.md)","text":"<ul> <li>fix Issue #977 fix initial crash</li> </ul>"},{"location":"2015-news/#documentation_3","title":"Documentation","text":"<ul> <li>document security mailing-list in the contributing page.</li> </ul>"},{"location":"2015-news/#192-20150130","title":"19.2 / 2015/01/30","text":""},{"location":"2015-news/#core_3","title":"Core","text":"<ul> <li>optimize the sync workers when listening on a single interface</li> <li>add <code>--sendfile</code> settings to enable/disable sendfile. fix Issue #856 .</li> <li>add the selectors module to the code base. Issue #886</li> <li>add <code>--max-requests-jitter</code> setting to set the maximum jitter to add to the   max-requests setting.</li> <li>fix Issue #899 propagate proxy_protocol_info to keep-alive requests</li> <li>fix Issue #863 worker timeout: dynamic timeout has been removed</li> <li>fix: Avoid world writable file</li> </ul>"},{"location":"2015-news/#logging_4","title":"Logging","text":"<ul> <li>fix Issue #941  set logconfig default to paster more trivially</li> <li>add statsd-prefix config setting: set the prefix to use when emitting statsd   metrics</li> <li>Issue #832 log to console by default</li> </ul>"},{"location":"2015-news/#thread-worker_1","title":"Thread Worker","text":"<ul> <li>fix Issue #908 make sure the worker can continue to accept requests</li> </ul>"},{"location":"2015-news/#eventlet-worker","title":"Eventlet Worker","text":"<ul> <li>fix Issue #867 Fix eventlet shutdown to actively shut down the workers.</li> </ul>"},{"location":"2015-news/#documentation_4","title":"Documentation","text":"<p>Many improvements and fixes have been done, see the detailed changelog for more information.</p>"},{"location":"2016-news/","title":"2016","text":""},{"location":"2016-news/#changelog-2016","title":"Changelog - 2016","text":"<p>Note</p> <p>Please see news for the latest changes</p>"},{"location":"2016-news/#1960-20160521","title":"19.6.0 / 2016/05/21","text":""},{"location":"2016-news/#core-logging","title":"Core &amp; Logging","text":"<ul> <li>improvement of the binary upgrade behaviour using USR2: remove file locking (Issue #1270)</li> <li>add the <code>--capture-output</code> setting to capture stdout/stderr tot the log   file (Issue #1271)</li> <li>Allow disabling <code>sendfile()</code> via the <code>SENDFILE</code> environment variable   (Issue #1252)</li> <li>fix reload under pycharm (Issue #1129)</li> </ul>"},{"location":"2016-news/#workers","title":"Workers","text":"<ul> <li>fix: make sure to remove the signal from the worker pipe (Issue #1269)</li> <li>fix: gthread worker, handle removed socket in the select loop   (Issue #1258)</li> </ul>"},{"location":"2016-news/#1950-20160510","title":"19.5.0 / 2016/05/10","text":""},{"location":"2016-news/#core","title":"Core","text":"<ul> <li>fix: Ensure response to HEAD request won't have message body</li> <li>fix: lock domain socket and remove on last arbiter exit (Issue #1220)</li> <li>improvement: use EnvironmentError instead of socket.error (Issue #939)</li> <li>add: new <code>FORWARDED_ALLOW_IPS</code> environment variable (Issue #1205)</li> <li>fix: infinite recursion when destroying sockets (Issue #1219)</li> <li>fix: close sockets on shutdown (Issue #922)</li> <li>fix: clean up sys.exc_info calls to drop circular refs (Issue #1228)</li> <li>fix: do post_worker_init after load_wsgi (Issue #1248)</li> </ul>"},{"location":"2016-news/#workers_1","title":"Workers","text":"<ul> <li>fix access logging in gaiohttp worker (Issue #1193)</li> <li>eventlet: handle QUIT in a new coroutine (Issue #1217)</li> <li>gevent: remove obsolete exception clauses in run (Issue #1218)</li> <li>tornado: fix extra \"Server\" response header (Issue #1246)</li> <li>fix: unblock the wait loop under python 3.5 in sync worker (Issue #1256)</li> </ul>"},{"location":"2016-news/#logging","title":"Logging","text":"<ul> <li>fix: log message for listener reloading (Issue #1181)</li> <li>Let logging module handle traceback printing (Issue #1201)</li> <li>improvement: Allow configuring logger_class with statsd_host (Issue #1188)</li> <li>fix: traceback formatting (Issue #1235)</li> <li>fix: print error logs on stderr and access logs on stdout (Issue #1184)</li> </ul>"},{"location":"2016-news/#documentation","title":"Documentation","text":"<ul> <li>Simplify installation instructions in gunicorn.org (Issue #1072)</li> <li>Fix URL and default worker type in example_config (Issue #1209)</li> <li>update django doc url to 1.8 lts (Issue #1213)</li> <li>fix: miscellaneous wording corrections (Issue #1216)</li> <li>Add PSF License Agreement of selectors.py to NOTICE (:issue: <code>1226</code>)</li> <li>document LOGGING overriding (Issue #1051)</li> <li>put a note that error logs are only errors from Gunicorn (Issue #1124)</li> <li>add a note about the requirements of the threads workers under python 2.x (Issue #1200)</li> <li>add access_log_format to config example (Issue #1251)</li> </ul>"},{"location":"2016-news/#tests","title":"Tests","text":"<ul> <li>Use more pytest.raises() in test_http.py</li> </ul>"},{"location":"2016-news/#1945-20160105","title":"19.4.5 / 2016/01/05","text":"<ul> <li>fix: NameError fileno in gunicorn.http.wsgi (Issue #1178)</li> </ul>"},{"location":"2016-news/#1944-20160104","title":"19.4.4 / 2016/01/04","text":"<ul> <li>fix: check if a fileobject can be used with sendfile(2.md) (Issue #1174)</li> <li>doc: be more descriptive in errorlog option (Issue #1173)</li> </ul>"},{"location":"2017-news/","title":"2017","text":""},{"location":"2017-news/#changelog-2017","title":"Changelog - 2017","text":"<p>Note</p> <p>Please see news for the latest changes</p>"},{"location":"2017-news/#1971-20170321","title":"19.7.1 / 2017/03/21","text":"<ul> <li>fix: continue if SO_REUSEPORT seems to be available but fails (Issue #1480)</li> <li>fix: support non-decimal values for the umask command line option (Issue #1325)</li> </ul>"},{"location":"2017-news/#1970-20170301","title":"19.7.0 / 2017/03/01","text":"<ul> <li>The previously deprecated <code>gunicorn_django</code> command has been removed.   Use the gunicorn-cmd command-line interface instead.</li> <li>The previously deprecated <code>django_settings</code> setting has been removed.   Use the raw-env setting instead.</li> <li>The default value of ssl-version has been changed from   <code>ssl.PROTOCOL_TLSv1</code> to <code>ssl.PROTOCOL_SSLv23</code>.</li> <li>fix: initialize the group access list when initgroups is set (Issue #1297)</li> <li>add environment variables to gunicorn access log format (Issue #1291)</li> <li>add --paste-global-conf option (Issue #1304)</li> <li>fix: print access logs to STDOUT (Issue #1184)</li> <li>remove upper limit on max header size config (Issue #1313)</li> <li>fix: print original exception on AppImportError (Issue #1334)</li> <li>use SO_REUSEPORT if available (Issue #1344)</li> <li><code>fix leak &lt;https://github.com/benoitc/gunicorn/commit/b4c41481e2d5ef127199a4601417a6819053c3fd&gt;</code>_ of duplicate file descriptor for bound sockets.</li> <li>add --reload-engine option, support inotify and other backends (Issue #1368, Issue #1459)</li> <li>fix: reject request with invalid HTTP versions</li> <li>add <code>child_exit</code> callback (Issue #1394)</li> <li>add support for eventlets _AlreadyHandled object (Issue #1406)</li> <li>format boot tracebacks properly with reloader (Issue #1408)</li> <li>refactor socket activation and fd inheritance for better support of SystemD (Issue #1310)</li> <li>fix: o fds are given by default in gunicorn (Issue #1423)</li> <li>add ability to pass settings to GUNICORN_CMD_ARGS environment variable which helps in container world (Issue #1385)</li> <li>fix:  catch access denied to pid file (Issue #1091)</li> <li>many additions and improvements to the documentation</li> </ul>"},{"location":"2017-news/#breaking-change","title":"Breaking Change","text":"<ul> <li>Python 2.6.0 is the last supported version</li> </ul>"},{"location":"2018-news/","title":"2018","text":""},{"location":"2018-news/#changelog-2018","title":"Changelog - 2018","text":"<p>Note</p> <p>Please see news for the latest changes</p>"},{"location":"2018-news/#1990-20180703","title":"19.9.0 / 2018/07/03","text":"<ul> <li>fix: address a regression that prevented syslog support from working   (Issue #1668, PR #1773)</li> <li>fix: correctly set <code>REMOTE_ADDR</code> on versions of Python 3 affected by   <code>Python Issue 30205 &lt;https://bugs.python.org/issue30205&gt;</code>_   (Issue #1755, PR #1796)</li> <li>fix: show zero response length correctly in access log (PR #1787)</li> <li>fix: prevent raising <code>AttributeError</code> when <code>--reload</code> is not passed   in case of a <code>SyntaxError</code> raised from the WSGI application.   (Issue #1805, PR #1806)</li> <li>The internal module <code>gunicorn.workers.async</code> was renamed to <code>gunicorn.workers.base_async</code>   since <code>async</code> is now a reserved word in Python 3.7.   (PR #1527)</li> </ul>"},{"location":"2018-news/#1981-20180430","title":"19.8.1 / 2018/04/30","text":"<ul> <li>fix: secure scheme headers when bound to a unix socket   (Issue #1766, PR #1767)</li> </ul>"},{"location":"2018-news/#1980-20180428","title":"19.8.0 / 2018/04/28","text":"<ul> <li>Eventlet 0.21.0 support (Issue #1584)</li> <li>Tornado 5 support (Issue #1728, PR #1752)</li> <li>support watching additional files with <code>--reload-extra-file</code>   (PR #1527)</li> <li>support configuring logging with a dictionary with <code>--logging-config-dict</code>   (Issue #1087, PR #1110, PR #1602)</li> <li>add support for the <code>--config</code> flag in the <code>GUNICORN_CMD_ARGS</code> environment   variable (Issue #1576, PR #1581)</li> <li>disable <code>SO_REUSEPORT</code> by default and add the <code>--reuse-port</code> setting   (Issue #1553, Issue #1603, PR #1669)</li> <li>fix: installing <code>inotify</code> on MacOS no longer breaks the reloader   (Issue #1540, PR #1541)</li> <li>fix: do not throw <code>TypeError</code> when <code>SO_REUSEPORT</code> is not available   (Issue #1501, PR #1491)</li> <li>fix: properly decode HTTP paths containing certain non-ASCII characters   (Issue #1577, PR #1578)</li> <li>fix: remove whitespace when logging header values under gevent (PR #1607)</li> <li>fix: close unlinked temporary files (Issue #1327, PR #1428)</li> <li>fix: parse <code>--umask=0</code> correctly (Issue #1622, PR #1632)</li> <li>fix: allow loading applications using relative file paths   (Issue #1349, PR #1481)</li> <li>fix: force blocking mode on the gevent sockets (Issue #880, PR #1616)</li> <li>fix: preserve leading <code>/</code> in request path (Issue #1512, PR #1511)</li> <li>fix: forbid contradictory secure scheme headers</li> <li>fix: handle malformed basic authentication headers in access log   (Issue #1683, PR #1684)</li> <li>fix: defer handling of <code>USR1</code> signal to a new greenlet under gevent   (Issue #1645, PR #1651)</li> <li>fix: the threaded worker would sometimes close the wrong keep-alive   connection under Python 2 (Issue #1698, PR #1699)</li> <li>fix: re-open log files on <code>USR1</code> signal using <code>handler._open</code> to   support subclasses of <code>FileHandler</code> (Issue #1739, PR #1742)</li> <li>deprecation: the <code>gaiohttp</code> worker is deprecated, see the   worker-class documentation for more information   (Issue #1338, PR #1418, PR #1569)</li> </ul>"},{"location":"2019-news/","title":"2019","text":""},{"location":"2019-news/#changelog-2019","title":"Changelog - 2019","text":"<p>Note</p> <p>Please see news for the latest changes</p>"},{"location":"2019-news/#2004-20191126","title":"20.0.4 / 2019/11/26","text":"<ul> <li>fix binding a socket using the file descriptor</li> <li>remove support for the <code>bdist_rpm</code> build</li> </ul>"},{"location":"2019-news/#2003-20191124","title":"20.0.3 / 2019/11/24","text":"<ul> <li>fixed load of a config file without a Python extension</li> <li>fixed <code>socketfromfd.fromfd</code> when defaults are not set</li> </ul> <p>Note</p> <p>```</p> <p>{note} as documented in Flask and other places. ```</p>"},{"location":"2019-news/#2002-20191123","title":"20.0.2 / 2019/11/23","text":"<ul> <li>fix changelog</li> </ul>"},{"location":"2019-news/#2001-20191123","title":"20.0.1 / 2019/11/23","text":"<ul> <li>fixed the way the config module is loaded. <code>__file__</code> is now available</li> <li>fixed <code>wsgi.input_terminated</code>. It is always true.</li> <li>use the highest protocol version of openssl by default</li> <li>only support Python &gt;= 3.5</li> <li>added <code>__repr__</code> method to <code>Config</code> instance</li> <li>fixed support of AIX platform and musl libc in  <code>socketfromfd.fromfd</code> function</li> <li>fixed support of applications loaded from a factory function</li> <li>fixed chunked encoding support to prevent any <code>request smuggling &lt;https://portswigger.net/research/http-desync-attacks-request-smuggling-reborn&gt;</code>_</li> <li>Capture os.sendfile before patching in gevent and eventlet workers.   fix <code>RecursionError</code>.</li> <li>removed locking in reloader when adding new files</li> <li>load the WSGI application before the loader to pick up all files</li> </ul>"},{"location":"2019-news/#19100-20191123","title":"19.10.0 / 2019/11/23","text":"<ul> <li>unblock select loop during reload of a sync worker</li> <li>security fix: http desync attack</li> <li>handle <code>wsgi.input_terminated</code></li> <li>added support for str and bytes in unix  socket addresses</li> <li>fixed <code>max_requests</code> setting</li> <li>headers values are now encoded as LATN1, not ASCII</li> <li>fixed <code>InotifyReloadeder</code>:  handle <code>module.__file__</code> is None</li> <li>fixed compatibility with tornado 6</li> <li>fixed root logging</li> <li>Prevent removalof unix sockets from <code>reuse_port</code></li> <li>Clear tornado ioloop before os.fork</li> <li>Miscellaneous fixes and improvement for linting using Pylint</li> </ul>"},{"location":"2019-news/#200-20191030","title":"20.0 / 2019/10/30","text":"<ul> <li>Fixed <code>fdopen</code> <code>RuntimeWarning</code> in Python 3.8</li> <li>Added  check and exception for str type on value in Response process_headers method.</li> <li>Ensure WSGI header value is string before conducting regex search on it.</li> <li>Added pypy3 to list of tested environments</li> <li>Grouped <code>StopIteration</code> and <code>KeyboardInterrupt</code> exceptions with same body together in Arbiter.run()</li> <li>Added <code>setproctitle</code> module to <code>extras_require</code> in setup.py</li> <li>Avoid unnecessary chown of temporary files</li> <li>Logging: Handle auth type case insensitively</li> <li>Removed <code>util.import_module</code></li> <li>Removed fallback for <code>types.SimpleNamespace</code> in tests utils</li> <li>Use <code>SourceFileLoader</code> instead instead of <code>execfile_</code></li> <li>Use <code>importlib</code> instead of <code>__import__</code> and eval`</li> <li>Fixed eventlet patching</li> <li>Added optional <code>datadog &lt;https://www.datadoghq.com&gt;</code>_ tags for statsd metrics</li> <li>Header values now are encoded using latin-1, not ascii.</li> <li>Rewritten <code>parse_address</code> util added test</li> <li>Removed redundant super() arguments</li> <li>Simplify <code>futures</code> import in gthread module</li> <li>Fixed worker_connections` setting to also affects the Gthread worker type</li> <li>Fixed setting max_requests</li> <li>Bump minimum Eventlet and Gevent versions to 0.24 and 1.4</li> <li>Use Python default SSL cipher list by default</li> <li>handle <code>wsgi.input_terminated</code> extension</li> <li>Simplify Paste Deployment documentation</li> <li>Fix root logging: root and logger are same level.</li> <li>Fixed typo in ssl_version documentation</li> <li>Documented  systemd deployment unit examples</li> <li>Added systemd sd_notify support</li> <li>Fixed typo in gthread.py</li> <li>Added <code>tornado &lt;https://www.tornadoweb.org/&gt;</code>_ 5 and  6 support</li> <li>Declare our setuptools dependency</li> <li>Added support to <code>--bind</code> to open file descriptors</li> <li>Document how to serve WSGI app modules from Gunicorn</li> <li>Provide guidance on X-Forwarded-For access log in documentation</li> <li>Add support for named constants in the <code>--ssl-version</code> flag</li> <li>Clarify log format usage of header &amp; environment in documentation</li> <li>Fixed systemd documentation to properly setup gunicorn unix socket</li> <li>Prevent removal unix socket for reuse_port</li> <li>Fix <code>ResourceWarning</code> when reading a Python config module</li> <li>Remove unnecessary call to dict keys method</li> <li>Support str and bytes for UNIX socket addresses</li> <li>fixed <code>InotifyReloadeder</code>:  handle <code>module.__file__</code> is None</li> <li><code>/dev/shm</code> as a convenient alternative to making your own tmpfs mount in fchmod FAQ</li> <li>fix examples to work on python3</li> <li>Fix typo in <code>--max-requests</code> documentation</li> <li>Clear tornado ioloop before os.fork</li> <li>Miscellaneous fixes and improvement for linting using Pylint</li> </ul>"},{"location":"2019-news/#breaking-change","title":"Breaking Change","text":"<ul> <li>Removed gaiohttp worker</li> <li>Drop support for Python 2.x</li> <li>Drop support for EOL Python 3.2 and 3.3</li> <li>Drop support for Paste Deploy server blocks</li> </ul>"},{"location":"2020-news/","title":"2020","text":""},{"location":"2020-news/#changelog-2020","title":"Changelog - 2020","text":"<p>Note</p> <p>Please see news for the latest changes</p>"},{"location":"2021-news/","title":"2021","text":""},{"location":"2021-news/#changelog-2021","title":"Changelog - 2021","text":"<p>Note</p> <p>Please see news for the latest changes</p>"},{"location":"2021-news/#2010-2021-02-12","title":"20.1.0 - 2021-02-12","text":"<ul> <li>document WEB_CONCURRENCY is set by, at least, Heroku</li> <li>capture peername from accept: Avoid calls to getpeername by capturing the peer name returned by   accept</li> <li>log a warning when a worker was terminated due to a signal</li> <li>fix tornado usage with latest versions of Django </li> <li>add support for python -m gunicorn</li> <li>fix systemd socket activation example</li> <li>allows to set wsgi application in config file using <code>wsgi_app</code></li> <li>document <code>--timeout = 0</code></li> <li>always close a connection when the number of requests exceeds the max requests</li> <li>Disable keepalive during graceful shutdown</li> <li>kill tasks in the gthread workers during upgrade</li> <li>fix latency in gevent worker when accepting new requests</li> <li>fix file watcher: handle errors when new worker reboot and ensure the list of files is kept</li> <li>document the default name and path of the configuration file</li> <li>document how variable impact configuration</li> <li>document the <code>$PORT</code> environment variable</li> <li>added milliseconds option to request_time in access_log</li> <li>added PIP requirements to be used for example</li> <li>remove version from the Server header</li> <li>fix sendfile: use <code>socket.sendfile</code> instead of <code>os.sendfile</code></li> <li>reloader: use  absolute path to prevent empty to prevent0 <code>InotifyError</code> when a file    is added to the working directory</li> <li>Add --print-config option to print the resolved settings at startup.</li> <li>remove the <code>--log-dict-config</code> CLI flag because it never had a working format   (the <code>logconfig_dict</code> setting in configuration files continues to work)</li> </ul>"},{"location":"2021-news/#breaking-changes","title":"Breaking changes","text":"<ul> <li>minimum version is Python 3.5</li> <li>remove version from the Server header </li> </ul> <p>** Documentation **</p> <p>** Others **</p> <ul> <li>miscellaneous changes in the code base to be a better citizen with Python 3</li> <li>remove dead code</li> <li>fix documentation generation</li> </ul>"},{"location":"2023-news/","title":"2023","text":""},{"location":"2023-news/#changelog-2023","title":"Changelog - 2023","text":""},{"location":"2023-news/#2120-2023-07-19","title":"21.2.0 - 2023-07-19","text":"<ul> <li>fix thread worker: revert change considering connection as idle . </li> </ul> <p>Note</p> <p>This is fixing the bad file description error.</p> <p>21.1.0 - 2023-07-18</p> <p>===================</p> <ul> <li>fix thread worker: fix socket removal from the queue</li> </ul>"},{"location":"2023-news/#2101-2023-07-17","title":"21.0.1 - 2023-07-17","text":"<ul> <li>fix documentation build</li> </ul>"},{"location":"2023-news/#2100-2023-07-17","title":"21.0.0 - 2023-07-17","text":"<ul> <li>support python 3.11</li> <li>fix gevent and eventlet workers</li> <li>fix threads support (gththread.md): improve performance and unblock requests</li> <li>SSL: now use SSLContext object</li> <li>HTTP parser: miscellaneous fixes</li> <li>remove unnecessary setuid calls</li> <li>fix testing</li> <li>improve logging</li> <li>miscellaneous fixes to core engine</li> </ul> <p>*** RELEASE NOTE ***</p> <p>We made this release major to start our new release cycle. More info will be provided on our discussion forum.</p>"},{"location":"2024-news/","title":"2024","text":""},{"location":"2024-news/#changelog-2024","title":"Changelog - 2024","text":""},{"location":"2024-news/#2300-2024-08-10","title":"23.0.0 - 2024-08-10","text":"<ul> <li>minor docs fixes (PR #3217, PR #3089, PR #3167)</li> <li>worker_class parameter accepts a class (PR #3079)</li> <li>fix deadlock if request terminated during chunked parsing (PR #2688)</li> <li>permit receiving Transfer-Encodings: compress, deflate, gzip (PR #3261)</li> <li>permit Transfer-Encoding headers specifying multiple encodings. note: no parameters, still (PR #3261)</li> <li>sdist generation now explicitly excludes sphinx build folder (PR #3257)</li> <li>decode bytes-typed status (as can be passed by gevent) as utf-8 instead of raising <code>TypeError</code> (PR #2336)</li> <li>raise correct Exception when encounting invalid chunked requests (PR #3258)</li> <li>the SCRIPT_NAME and PATH_INFO headers, when received from allowed forwarders, are no longer restricted for containing an underscore (PR #3192)</li> <li>include IPv6 loopback address <code>[::1]</code> in default for forwarded-allow-ips and proxy-allow-ips (PR #3192)</li> </ul> <p>Note</p> <ul> <li>The SCRIPT_NAME change mitigates a regression that appeared first in the 22.0.0 release</li> <li>Review your forwarded-allow-ips setting if you are still not seeing the SCRIPT_NAME transmitted</li> <li>Review your forwarder-headers setting if you are missing headers after upgrading from a version prior to 22.0.0</li> </ul>"},{"location":"2024-news/#breaking-changes","title":"Breaking changes","text":"<ul> <li>refuse requests where the uri field is empty (PR #3255)</li> <li>refuse requests with invalid CR/LR/NUL in heade field values (PR #3253)</li> <li>remove temporary <code>--tolerate-dangerous-framing</code> switch from 22.0 (PR #3260)</li> <li>If any of the breaking changes affect you, be aware that now refused requests can post a security problem, especially so in setups involving request pipe-lining and/or proxies.</li> </ul>"},{"location":"2024-news/#2200-2024-04-17","title":"22.0.0 - 2024-04-17","text":"<ul> <li>use <code>utime</code> to notify workers liveness </li> <li>migrate setup to pyproject.toml</li> <li>fix numerous security vulnerabilities in HTTP parser (closing some request smuggling vectors)</li> <li>parsing additional requests is no longer attempted past unsupported request framing</li> <li>on HTTP versions &lt; 1.1 support for chunked transfer is refused (only used in exploits)</li> <li>requests conflicting configured or passed SCRIPT_NAME now produce a verbose error</li> <li>Trailer fields are no longer inspected for headers indicating secure scheme</li> <li>support Python 3.12</li> </ul>"},{"location":"2024-news/#breaking-changes_1","title":"Breaking changes","text":"<ul> <li>minimum version is Python 3.7</li> <li>the limitations on valid characters in the HTTP method have been bounded to Internet Standards</li> <li>requests specifying unsupported transfer coding (order.md) are refused by default (rare.md)</li> <li>HTTP methods are no longer casefolded by default (IANA method registry contains none affected)</li> <li>HTTP methods containing the number sign (#) are no longer accepted by default (rare.md)</li> <li>HTTP versions &lt; 1.0 or &gt;= 2.0 are no longer accepted by default (rare, only HTTP/1.1 is supported)</li> <li>HTTP versions consisting of multiple digits or containing a prefix/suffix are no longer accepted</li> <li>HTTP header field names Gunicorn cannot safely map to variables are silently dropped, as in other software</li> <li>HTTP headers with empty field name are refused by default (no legitimate use cases, used in exploits)</li> <li>requests with both Transfer-Encoding and Content-Length are refused by default (such a message might indicate an attempt to perform request smuggling)</li> <li>empty transfer codings are no longer permitted (reportedly seen with really old &amp; broken proxies)</li> </ul>"},{"location":"2024-news/#security","title":"Security","text":"<ul> <li>fix CVE-2024-1135</li> </ul>"},{"location":"2026-news/","title":"2026","text":""},{"location":"2026-news/#changelog-2026","title":"Changelog - 2026","text":""},{"location":"2026-news/#2500-unreleased","title":"25.0.0 - unreleased","text":""},{"location":"2026-news/#new-features","title":"New Features","text":"<ul> <li>Dirty Arbiters: Separate process pool for executing long-running, blocking   operations (AI model loading, heavy computation) without blocking HTTP workers   (PR #3460)</li> <li>Inspired by Erlang's dirty schedulers</li> <li>Asyncio-based with Unix socket IPC</li> <li>Stateful workers that persist loaded resources</li> <li>New settings: <code>--dirty-app</code>, <code>--dirty-workers</code>, <code>--dirty-timeout</code>,     <code>--dirty-threads</code>, <code>--dirty-graceful-timeout</code></li> <li> <p>Lifecycle hooks: <code>on_dirty_starting</code>, <code>dirty_post_fork</code>,     <code>dirty_worker_init</code>, <code>dirty_worker_exit</code></p> </li> <li> <p>HTTP/2 Support (Beta): Native HTTP/2 (RFC 7540) support for improved performance   with modern clients (PR #3468)</p> </li> <li>Multiplexed streams over a single connection</li> <li>Header compression (HPACK)</li> <li>Flow control and stream prioritization</li> <li>Works with gthread, gevent, and ASGI workers</li> <li>New settings: <code>--http-protocols</code>, <code>--http2-max-concurrent-streams</code>,     <code>--http2-initial-window-size</code>, <code>--http2-max-frame-size</code>, <code>--http2-max-header-list-size</code></li> <li>Requires SSL/TLS and h2 library: <code>pip install gunicorn[http2]</code></li> <li>See HTTP/2 Guide for details</li> <li> <p>New example: <code>examples/http2_gevent/</code> with Docker and tests</p> </li> <li> <p>HTTP 103 Early Hints: Support for RFC 8297 Early Hints to enable browsers to   preload resources before the final response   (PR #3468)</p> </li> <li>WSGI: <code>environ['wsgi.early_hints'](headers)</code> callback</li> <li>ASGI: <code>http.response.informational</code> message type</li> <li> <p>Works with both HTTP/1.1 and HTTP/2</p> </li> <li> <p>uWSGI Protocol for ASGI Worker: The ASGI worker now supports receiving requests   via the uWSGI binary protocol from nginx   (PR #3467)</p> </li> </ul>"},{"location":"2026-news/#bug-fixes","title":"Bug Fixes","text":"<ul> <li> <p>Fix HTTP/2 ALPN negotiation for gevent and eventlet workers when   <code>do_handshake_on_connect</code> is False (the default). The TLS handshake is now   explicitly performed before checking <code>selected_alpn_protocol()</code>.</p> </li> <li> <p>Fix setproctitle initialization with systemd socket activation   (#3465)</p> </li> <li> <p>Fix <code>Expect: 100-continue</code> handling: ignore the header for HTTP/1.0 requests   since 100-continue is only valid for HTTP/1.1+   (PR #3463)</p> </li> <li> <p>Fix missing <code>_expected_100_continue</code> attribute in UWSGIRequest</p> </li> <li> <p>Disable setproctitle on macOS to prevent segfaults during process title updates</p> </li> <li> <p>Publish full exception traceback when the application fails to load   (#3462)</p> </li> </ul>"},{"location":"2026-news/#deprecations","title":"Deprecations","text":"<ul> <li>Eventlet Worker: The <code>eventlet</code> worker is deprecated and will be removed in   Gunicorn 26.0. Eventlet itself is no longer actively maintained.   Please migrate to <code>gevent</code>, <code>gthread</code>, or another supported worker type.</li> </ul>"},{"location":"2026-news/#changes","title":"Changes","text":"<ul> <li>Remove obsolete Makefile targets   (PR #3471)</li> </ul>"},{"location":"2026-news/#2411-2026-01-24","title":"24.1.1 - 2026-01-24","text":""},{"location":"2026-news/#bug-fixes_1","title":"Bug Fixes","text":"<ul> <li>Fix <code>forwarded_allow_ips</code> and <code>proxy_allow_ips</code> to remain as strings for backward   compatibility with external tools like uvicorn. Network validation now uses strict   mode to detect invalid CIDR notation (e.g., <code>192.168.1.1/24</code> where host bits are set)   (#3458,   PR #3459)</li> </ul>"},{"location":"2026-news/#2410-2026-01-23","title":"24.1.0 - 2026-01-23","text":""},{"location":"2026-news/#new-features_1","title":"New Features","text":"<ul> <li>Official Docker Image: Gunicorn now publishes official Docker images to GitHub   Container Registry at <code>ghcr.io/benoitc/gunicorn</code></li> <li>Based on Python 3.12 slim image</li> <li>Uses recommended worker formula (2 \u00d7 CPU + 1)</li> <li> <p>Configurable via environment variables</p> </li> <li> <p>PROXY Protocol v2 Support: Extended PROXY protocol implementation to support   the binary v2 format in addition to the existing text-based v1 format   (PR #3451)</p> </li> <li>New <code>--proxy-protocol</code> modes: <code>off</code>, <code>v1</code>, <code>v2</code>, <code>auto</code></li> <li><code>auto</code> mode (default when enabled) detects v1 or v2 automatically</li> <li>v2 binary format is more efficient and supports additional metadata</li> <li> <p>Works with HAProxy, AWS NLB/ALB, and other PROXY protocol v2 sources</p> </li> <li> <p>CIDR Network Support: <code>--forwarded-allow-ips</code> and <code>--proxy-allow-from</code> now   accept CIDR notation (e.g., <code>192.168.0.0/16</code>) for specifying trusted networks   (PR #3449)</p> </li> <li> <p>Socket Backlog Metric: New <code>gunicorn.socket.backlog</code> gauge metric reports   the current socket backlog size on Linux systems   (PR #3450)</p> </li> <li> <p>InotifyReloader Enhancement: The inotify-based reloader now watches newly   imported modules, not just those loaded at startup   (PR #3447)</p> </li> </ul>"},{"location":"2026-news/#bug-fixes_2","title":"Bug Fixes","text":"<ul> <li> <p>Fix signal handling regression where SIGCLD alias caused \"Unhandled signal: cld\"   errors on Linux when workers fail during boot   (#3453)</p> </li> <li> <p>Fix socket blocking mode on keepalive connections preventing SSL handshake   failures with async workers   (PR #3452)</p> </li> <li> <p>Use smaller buffer size in <code>finish_body()</code> for faster timeout detection on   slow or abandoned connections   (PR #3453)</p> </li> <li> <p>Handle <code>SSLWantReadError</code> in <code>finish_body()</code> to prevent worker hangs during   SSL renegotiation   (PR #3448)</p> </li> <li> <p>Log SIGTERM as info level instead of warning to reduce noise in orchestrated   environments   (PR #3446)</p> </li> <li> <p>Print exception details to stderr when worker fails to boot   (PR #3443)</p> </li> <li> <p>Fix <code>unreader.unread()</code> to prepend data to buffer instead of appending   (PR #3442)</p> </li> <li> <p>Prevent <code>RecursionError</code> when pickling Config objects   (PR #3441)</p> </li> <li> <p>Use proper exception chaining with <code>raise from</code> in glogging.py   (PR #3440)</p> </li> </ul>"},{"location":"2026-news/#2400-2026-01-23","title":"24.0.0 - 2026-01-23","text":""},{"location":"2026-news/#new-features_2","title":"New Features","text":"<ul> <li>ASGI Worker (Beta): Native asyncio-based ASGI support for running async Python   frameworks like FastAPI, Starlette, and Quart without external dependencies   (PR #3444)</li> <li>HTTP/1.1 with keepalive connections</li> <li>WebSocket support</li> <li>Lifespan protocol for startup/shutdown hooks</li> <li>Optional uvloop for improved performance</li> <li> <p>New settings: <code>--asgi-loop</code>, <code>--asgi-lifespan</code>, <code>--root-path</code></p> </li> <li> <p>uWSGI Binary Protocol: Support for receiving requests from nginx via   <code>uwsgi_pass</code> directive, enabling efficient binary protocol communication   (PR #3444)</p> </li> <li> <p>New settings: <code>--protocol uwsgi</code>, <code>--uwsgi-allow-from</code></p> </li> <li> <p>Documentation Migration: Migrated documentation from Sphinx to MkDocs   with Material theme for improved navigation and mobile experience   (PR #3426)</p> </li> </ul>"},{"location":"2026-news/#security","title":"Security","text":"<ul> <li> <p>eventlet: Require eventlet &gt;= 0.40.3 to address CVE-2021-21419 (websocket   memory exhaustion) and CVE-2025-58068 (HTTP request smuggling)   (PR #3445)</p> </li> <li> <p>gevent: Require gevent &gt;= 24.10.1 to address CVE-2023-41419 (HTTP request   smuggling) and CVE-2024-3219 (socket.socketpair vulnerability)   (PR #3445)</p> </li> <li> <p>tornado: Require tornado &gt;= 6.5.0 to address CVE-2025-47287 (HTTP request   smuggling) and other security fixes   (PR #3445)</p> </li> </ul>"},{"location":"2026-news/#changes_1","title":"Changes","text":"<ul> <li>Documentation now hosted at https://gunicorn.org</li> <li>Updated license configuration to PEP 639 format for uv compatibility</li> </ul> <p>ASGI Worker Beta</p> <p>The ASGI worker is a beta feature. While tested, the API and behavior may change in future releases. Please report any issues on GitHub.</p>"},{"location":"404/","title":"Page Not Found","text":"<p>The page you're looking for doesn't exist or has moved.</p> Home Return to the homepage Quickstart Get started with Gunicorn Settings Configuration reference Report Issue Let us know about broken links"},{"location":"asgi/","title":"ASGI Worker","text":"<p>Beta Feature</p> <p>The ASGI worker is a beta feature introduced in Gunicorn 24.0.0. While it has been tested, the API and behavior may change in future releases. Please report any issues on GitHub.</p> <p>Gunicorn includes a native ASGI worker that enables running async Python web frameworks like FastAPI, Starlette, and Quart without external dependencies like Uvicorn.</p>"},{"location":"asgi/#quick-start","title":"Quick Start","text":"<pre><code># Install gunicorn\npip install gunicorn\n\n# Run an ASGI application\ngunicorn myapp:app --worker-class asgi --workers 4\n</code></pre> <p>For FastAPI applications:</p> <pre><code>gunicorn main:app --worker-class asgi --bind 0.0.0.0:8000\n</code></pre>"},{"location":"asgi/#features","title":"Features","text":"<p>The ASGI worker provides:</p> <ul> <li>HTTP/1.1 with keepalive connections</li> <li>WebSocket support for real-time applications</li> <li>Lifespan protocol for startup/shutdown hooks</li> <li>Optional uvloop for improved performance</li> <li>SSL/TLS support</li> <li>uWSGI protocol for nginx <code>uwsgi_pass</code> integration</li> </ul>"},{"location":"asgi/#configuration","title":"Configuration","text":""},{"location":"asgi/#worker-class","title":"Worker Class","text":"<p>Set the worker class to <code>asgi</code>:</p> <pre><code>gunicorn myapp:app --worker-class asgi\n</code></pre> <p>Or in a configuration file:</p> <pre><code># gunicorn.conf.py\nworker_class = \"asgi\"\n</code></pre>"},{"location":"asgi/#event-loop","title":"Event Loop","text":"<p>Control which asyncio event loop implementation to use:</p> Value Description <code>auto</code> Use uvloop if available, otherwise asyncio (default) <code>asyncio</code> Use Python's built-in asyncio event loop <code>uvloop</code> Use uvloop (must be installed separately) <pre><code>gunicorn myapp:app --worker-class asgi --asgi-loop uvloop\n</code></pre> <p>To use uvloop, install it first:</p> <pre><code>pip install uvloop\n</code></pre>"},{"location":"asgi/#lifespan-protocol","title":"Lifespan Protocol","text":"<p>The lifespan protocol lets your application run code at startup and shutdown. This is essential for frameworks that need to initialize database connections, caches, or background tasks.</p> Value Description <code>auto</code> Detect if app supports lifespan, enable if so (default) <code>on</code> Always run lifespan protocol (fail if unsupported) <code>off</code> Never run lifespan protocol <pre><code>gunicorn myapp:app --worker-class asgi --asgi-lifespan on\n</code></pre> <p>Example FastAPI application using lifespan:</p> <pre><code>from contextlib import asynccontextmanager\nfrom fastapi import FastAPI\n\n@asynccontextmanager\nasync def lifespan(app: FastAPI):\n    # Startup: initialize resources\n    print(\"Starting up...\")\n    yield\n    # Shutdown: cleanup resources\n    print(\"Shutting down...\")\n\napp = FastAPI(lifespan=lifespan)\n</code></pre>"},{"location":"asgi/#root-path","title":"Root Path","text":"<p>When running behind a reverse proxy that mounts your application at a subpath, set <code>root_path</code> so your application knows its mount point:</p> <pre><code>gunicorn myapp:app --worker-class asgi --root-path /api\n</code></pre> <p>This is equivalent to the <code>SCRIPT_NAME</code> in WSGI applications.</p>"},{"location":"asgi/#worker-connections","title":"Worker Connections","text":"<p>Control the maximum number of concurrent connections per worker:</p> <pre><code>gunicorn myapp:app --worker-class asgi --worker-connections 1000\n</code></pre> <p>Note</p> <p>Unlike sync workers, the <code>--threads</code> option has no effect on ASGI workers. Use <code>--worker-connections</code> to control concurrency.</p>"},{"location":"asgi/#websocket-support","title":"WebSocket Support","text":"<p>The ASGI worker supports WebSocket connections out of the box. No additional configuration is required.</p> <p>Example with Starlette:</p> <pre><code>from starlette.applications import Starlette\nfrom starlette.routing import WebSocketRoute\n\nasync def websocket_endpoint(websocket):\n    await websocket.accept()\n    while True:\n        data = await websocket.receive_text()\n        await websocket.send_text(f\"Echo: {data}\")\n\napp = Starlette(routes=[\n    WebSocketRoute(\"/ws\", websocket_endpoint),\n])\n</code></pre>"},{"location":"asgi/#production-deployment","title":"Production Deployment","text":""},{"location":"asgi/#with-nginx-http-proxy","title":"With Nginx (HTTP Proxy)","text":"<pre><code>upstream gunicorn {\n    server 127.0.0.1:8000;\n}\n\nserver {\n    listen 80;\n    server_name example.com;\n\n    location / {\n        proxy_pass http://gunicorn;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n\n    # WebSocket support\n    location /ws {\n        proxy_pass http://gunicorn;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n        proxy_set_header Host $host;\n    }\n}\n</code></pre>"},{"location":"asgi/#with-nginx-uwsgi-protocol","title":"With Nginx (uWSGI Protocol)","text":"<p>For better performance, you can use nginx's native uWSGI protocol support:</p> <pre><code>gunicorn myapp:app --worker-class asgi --protocol uwsgi --bind 127.0.0.1:8000\n</code></pre> <pre><code>upstream gunicorn {\n    server 127.0.0.1:8000;\n}\n\nserver {\n    listen 80;\n    server_name example.com;\n\n    location / {\n        uwsgi_pass gunicorn;\n        include uwsgi_params;\n    }\n}\n</code></pre> <p>Note</p> <p>WebSocket connections are not supported when using the uWSGI protocol. Use HTTP proxy for WebSocket endpoints.</p> <p>See uWSGI Protocol for more details on uWSGI protocol configuration.</p>"},{"location":"asgi/#recommended-settings","title":"Recommended Settings","text":"<p>For production ASGI deployments:</p> <pre><code># gunicorn.conf.py\nworker_class = \"asgi\"\nworkers = 4  # Number of worker processes\nworker_connections = 1000  # Max connections per worker\nkeepalive = 5  # Keepalive timeout\ntimeout = 120  # Worker timeout\ngraceful_timeout = 30  # Graceful shutdown timeout\n\n# Performance tuning\nasgi_loop = \"auto\"  # Use uvloop if available\nasgi_lifespan = \"auto\"  # Auto-detect lifespan support\n</code></pre>"},{"location":"asgi/#comparison-with-other-asgi-servers","title":"Comparison with Other ASGI Servers","text":"Feature Gunicorn ASGI Uvicorn Hypercorn Process management Built-in External Built-in HTTP/2 Yes No Yes WebSocket Yes Yes Yes Lifespan Yes Yes Yes uvloop support Yes Yes Yes <p>Note</p> <p>HTTP/2 requires SSL/TLS and the h2 library. See HTTP/2 Support for details.</p> <p>Gunicorn's ASGI worker provides the same process management, logging, and configuration capabilities you're familiar with from WSGI deployments.</p>"},{"location":"asgi/#troubleshooting","title":"Troubleshooting","text":""},{"location":"asgi/#lifespan-startup-failed","title":"Lifespan startup failed","text":"<p>If you see \"ASGI lifespan startup failed\", your application may not properly implement the lifespan protocol. Either fix the application or set <code>--asgi-lifespan off</code>.</p>"},{"location":"asgi/#connection-limits","title":"Connection limits","text":"<p>If you're hitting connection limits, increase <code>--worker-connections</code> or add more workers with <code>--workers</code>.</p>"},{"location":"asgi/#slow-responses-under-load","title":"Slow responses under load","text":"<p>Try using uvloop for better performance:</p> <pre><code>pip install uvloop\ngunicorn myapp:app --worker-class asgi --asgi-loop uvloop\n</code></pre>"},{"location":"asgi/#see-also","title":"See Also","text":"<ul> <li>Settings Reference - All ASGI-related settings</li> <li>Deploy - General deployment guidance</li> <li>Design - Worker architecture overview</li> </ul>"},{"location":"community/","title":"Community","text":"<p>Connect with the project through these channels.</p>"},{"location":"community/#project-management-discussions","title":"Project management &amp; discussions","text":"<p>Project maintenance guidelines live on the wiki.</p> <p>GitHub is used for:</p> <ul> <li>Bug reports \u2014 search before   opening a new issue.</li> <li>Discussions \u2014 Q&amp;A and usage   tips.</li> <li>Feature planning \u2014 development   and project management topics.</li> </ul>"},{"location":"community/#irc","title":"IRC","text":"<p>Join the Gunicorn channel on Libera Chat at <code>#gunicorn</code>.</p>"},{"location":"community/#issue-tracking","title":"Issue tracking","text":"<p>File bugs, enhancements, and tasks in the GitHub issue tracker.</p>"},{"location":"community/#security-issues","title":"Security issues","text":"<p>Report security vulnerabilities privately to <code>security@gunicorn.org</code>; only core developers subscribe to this list.</p>"},{"location":"community/#contributing","title":"Contributing","text":"<p>Start with the contributing guide for development workflow, code style, and review expectations. New contributors are welcome\u2014open a draft pull request early to gather feedback.</p>"},{"location":"configure/","title":"Configure","text":""},{"location":"configure/#configuration-overview","title":"Configuration Overview","text":"<p>Gunicorn reads configuration from five places, in increasing order of priority:</p> <ol> <li>Environment variables, for settings that support them.</li> <li>Framework-specific configuration (currently Paste Deploy only).</li> <li>A Python configuration file <code>gunicorn.conf.py</code> (default in the working directory).</li> <li>The <code>GUNICORN_CMD_ARGS</code> environment variable.</li> <li>Command-line arguments.</li> </ol> <p>If a configuration file is provided both via <code>GUNICORN_CMD_ARGS</code> and the CLI, only the file specified on the command line is used.</p> <p>Note</p> <p>Print the fully resolved configuration:</p> <p>bash gunicorn --print-config APP_MODULE <pre><code>Validate configuration and exit:\n\n```bash\ngunicorn --check-config APP_MODULE\n</code></pre></p> <p>This is also a quick way to confirm that your application can start. <pre><code>## Command line\n\nOptions set on the command line override framework settings and values from the\nconfiguration file. Not every setting has a command-line flag; run\n\n```bash\ngunicorn -h\n</code></pre></p> <p>for the complete list. The CLI also exposes <code>--version</code>, which is not part of the main settings reference.</p> <p></p>"},{"location":"configure/#configuration-file","title":"Configuration file","text":"<p>Provide a Python file (for example <code>gunicorn.conf.py</code>). Gunicorn executes the file on every start or reload, so any valid Python is allowed:</p> <pre><code>import multiprocessing\n\nbind = \"127.0.0.1:8000\"\nworkers = multiprocessing.cpu_count() * 2 + 1\n</code></pre> <p>Every configuration key is documented in the settings reference.</p>"},{"location":"configure/#framework-settings","title":"Framework settings","text":"<p>At present only Paste Deploy applications expose framework-specific settings. If you have ideas for Django or other frameworks, open an issue.</p>"},{"location":"configure/#paste-applications","title":"Paste applications","text":"<p>Reference Gunicorn as the server in your INI file:</p> <pre><code>[server:main]\nuse = egg:gunicorn#main\nhost = 192.168.0.1\nport = 80\nworkers = 2\nproc_name = brim\n</code></pre> <p>Gunicorn merges any recognised parameters into the base configuration. Values from the configuration file and command line still override these defaults.</p>"},{"location":"custom/","title":"Custom","text":""},{"location":"custom/#custom-application","title":"Custom Application","text":"<p>Added in 19.0</p> <p>Use Gunicorn as part of your own WSGI application by subclassing <code>gunicorn.app.base.BaseApplication</code>.</p> <p>Example: create a tiny WSGI app and load it with a custom application:</p> <pre><code>#!/usr/bin/env python\n#\n# An example of a standalone application using the internal API of Gunicorn.\n#\n#   $ python standalone_app.py\n#\n# This file is part of gunicorn released under the MIT license.\n# See the NOTICE for more information.\n\nimport multiprocessing\n\nimport gunicorn.app.base\n\n\ndef number_of_workers():\n    return (multiprocessing.cpu_count() * 2) + 1\n\n\ndef handler_app(environ, start_response):\n    response_body = b'Works fine'\n    status = '200 OK'\n\n    response_headers = [\n        ('Content-Type', 'text/plain'),\n    ]\n\n    start_response(status, response_headers)\n\n    return [response_body]\n\n\nclass StandaloneApplication(gunicorn.app.base.BaseApplication):\n\n    def __init__(self, app, options=None):\n        self.options = options or {}\n        self.application = app\n        super().__init__()\n\n    def load_config(self):\n        config = {key: value for key, value in self.options.items()\n                  if key in self.cfg.settings and value is not None}\n        for key, value in config.items():\n            self.cfg.set(key.lower(), value)\n\n    def load(self):\n        return self.application\n\n\nif __name__ == '__main__':\n    options = {\n        'bind': '%s:%s' % ('127.0.0.1', '8080'),\n        'workers': number_of_workers(),\n    }\n    StandaloneApplication(handler_app, options).run()\n</code></pre>"},{"location":"custom/#using-server-hooks","title":"Using server hooks","text":"<p>Provide hooks through configuration, just like a standard Gunicorn deployment. For example, a <code>pre_fork</code> hook:</p> <pre><code>def pre_fork(server, worker):\n    print(f\"pre-fork server {server} worker {worker}\", file=sys.stderr)\n\nif __name__ == \"__main__\":\n    options = {\n        \"bind\": \"127.0.0.1:8080\",\n        \"workers\": number_of_workers(),\n        \"pre_fork\": pre_fork,\n    }\n</code></pre>"},{"location":"custom/#direct-usage-of-existing-wsgi-apps","title":"Direct usage of existing WSGI apps","text":"<p>Run Gunicorn from Python to serve a WSGI application instance at runtime\u2014useful for rolling deploys or packaging with PEX. Gunicorn exposes <code>gunicorn.app.wsgiapp</code>, which accepts any WSGI app (for example a Flask or Django instance). Assuming your package is <code>exampleapi</code> and the application is <code>app</code>:</p> <pre><code>python -m gunicorn.app.wsgiapp exampleapi:app\n</code></pre> <p>All CLI flags and configuration files still apply:</p> <pre><code># Custom parameters\npython -m gunicorn.app.wsgiapp exampleapi:app --bind=0.0.0.0:8081 --workers=4\n# Using a config file\npython -m gunicorn.app.wsgiapp exampleapi:app -c config.py\n</code></pre> <p>For PEX builds use <code>-c gunicorn</code> at build time so the packaged app accepts the entry point at runtime:</p> <pre><code>pex . -v -c gunicorn -o compiledapp.pex\n./compiledapp.pex exampleapi:app -c gunicorn_config.py\n</code></pre>"},{"location":"deploy/","title":"Deploying Gunicorn","text":"<p>We strongly recommend running Gunicorn behind a proxy server.</p>"},{"location":"deploy/#nginx-configuration","title":"Nginx configuration","text":"<p>Although many HTTP proxies exist, we recommend Nginx. When using the default synchronous workers you must ensure the proxy buffers slow clients; otherwise Gunicorn becomes vulnerable to denial-of-service attacks. Use Hey to verify proxy behaviour.</p> <p>An example configuration for fast clients with Nginx (source):</p> nginx.conf<pre><code>worker_processes 1;\n\nuser nobody nogroup;\n# 'user nobody nobody;' for systems with 'nobody' as a group instead\nerror_log  /var/log/nginx/error.log warn;\npid /var/run/nginx.pid;\n\nevents {\n  worker_connections 1024; # increase if you have lots of clients\n  accept_mutex off; # set to 'on' if nginx worker_processes &gt; 1\n  # 'use epoll;' to enable for Linux 2.6+\n  # 'use kqueue;' to enable for FreeBSD, OSX\n}\n\nhttp {\n  include mime.types;\n  # fallback in case we can't determine a type\n  default_type application/octet-stream;\n  access_log /var/log/nginx/access.log combined;\n  sendfile on;\n\n  upstream app_server {\n    # fail_timeout=0 means we always retry an upstream even if it failed\n    # to return a good HTTP response\n\n    # for UNIX domain socket setups\n    server unix:/tmp/gunicorn.sock fail_timeout=0;\n\n    # for a TCP configuration\n    # server 192.168.0.7:8000 fail_timeout=0;\n  }\n\n  server {\n    # if no Host match, close the connection to prevent host spoofing\n    listen 80 default_server;\n    return 444;\n  }\n\n  server {\n    # use 'listen 80 deferred;' for Linux\n    # use 'listen 80 accept_filter=httpready;' for FreeBSD\n    listen 80;\n    client_max_body_size 4G;\n\n    # set the correct host(s) for your site\n    server_name example.com www.example.com;\n\n    keepalive_timeout 5;\n\n    # path for static files\n    root /path/to/app/current/public;\n\n    location / {\n      # checks for static file, if not found proxy to app\n      try_files $uri @proxy_to_app;\n    }\n\n    location @proxy_to_app {\n      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n      proxy_set_header X-Forwarded-Proto $scheme;\n      proxy_set_header Host $http_host;\n      # we don't want nginx trying to do something clever with\n      # redirects, we set the Host: header above already.\n      proxy_redirect off;\n      proxy_pass http://app_server;\n    }\n\n    error_page 500 502 503 504 /500.html;\n    location = /500.html {\n      root /path/to/app/current/public;\n    }\n  }\n}\n</code></pre> <p>To support streaming requests/responses or patterns such as Comet, long polling, or WebSockets, disable proxy buffering and run Gunicorn with an async worker class:</p> <pre><code>location @proxy_to_app {\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header Host $http_host;\n    proxy_redirect off;\n    proxy_buffering off;\n\n    proxy_pass http://app_server;\n}\n</code></pre> <p>To ignore aborted requests (for example, health checks that close connections prematurely) enable <code>proxy_ignore_client_abort</code>:</p> <pre><code>proxy_ignore_client_abort on;\n</code></pre> <p>Note</p> <p>The default value for <code>proxy_ignore_client_abort</code> is <code>off</code>. If it remains off Nginx logs will report error 499 and Gunicorn may log <code>Ignoring EPIPE</code> when the log level is <code>debug</code>.</p> <p>Pass protocol information to Gunicorn so applications can generate correct URLs. Add this header to your <code>location</code> block:</p> <pre><code>proxy_set_header X-Forwarded-Proto $scheme;\n</code></pre> <p>If Nginx runs on a different host, tell Gunicorn which proxies are trusted so it accepts the <code>X-Forwarded-*</code> headers:</p> <pre><code>gunicorn -w 3 --forwarded-allow-ips=\"10.170.3.217,10.170.3.220\" test:app\n</code></pre> <p>When all traffic comes from trusted proxies (for example Heroku) you can set <code>--forwarded-allow-ips='*'</code>. This is dangerous if untrusted clients can reach Gunicorn directly, because forged headers could make your application serve secure content over plain HTTP.</p> <p>Gunicorn 19 changed the handling of <code>REMOTE_ADDR</code> to conform to RFC 3875, meaning it now records the proxy IP rather than the upstream client. To log the real client address, set <code>access_log_format</code> to include <code>X-Forwarded-For</code>:</p> <pre><code>%({x-forwarded-for}i)s %(l.md)s %(u.md)s %(t.md)s \"%(r.md)s\" %(s.md)s %(b.md)s \"%(f.md)s\" \"%(a.md)s\"\n</code></pre> <p>When binding Gunicorn to a UNIX socket <code>REMOTE_ADDR</code> will be empty.</p>"},{"location":"deploy/#proxy-protocol","title":"PROXY Protocol","text":"<p>The PROXY protocol allows load balancers and reverse proxies to pass original client connection information (IP address, port) to backend servers. This is especially useful when TLS termination happens at the proxy layer.</p> <p>Gunicorn supports both PROXY protocol v1 (text format) and v2 (binary format).</p>"},{"location":"deploy/#configuration","title":"Configuration","text":"<p>Enable PROXY protocol with the <code>--proxy-protocol</code> option:</p> <pre><code># Auto-detect v1 or v2 (recommended)\ngunicorn --proxy-protocol auto app:app\n\n# Force v1 only (text format)\ngunicorn --proxy-protocol v1 app:app\n\n# Force v2 only (binary format, more efficient)\ngunicorn --proxy-protocol v2 app:app\n</code></pre> <p>Using <code>--proxy-protocol</code> without a value is equivalent to <code>auto</code>.</p> <p>Security</p> <p>Only enable PROXY protocol when Gunicorn is behind a trusted proxy that sends PROXY headers. Configure <code>--proxy-allow-from</code> to restrict which IPs can send PROXY protocol headers.</p>"},{"location":"deploy/#haproxy","title":"HAProxy","text":"<p>HAProxy can send PROXY protocol headers to backends. Example configuration:</p> <pre><code>frontend https_front\n    bind *:443 ssl crt /etc/ssl/certs/site.pem\n    default_backend gunicorn_back\n\nbackend gunicorn_back\n    # Send PROXY protocol v2 (binary, more efficient)\n    server gunicorn 127.0.0.1:8000 send-proxy-v2\n\n    # Or use v1 (text format)\n    # server gunicorn 127.0.0.1:8000 send-proxy\n</code></pre> <p>Start Gunicorn to accept PROXY protocol:</p> <pre><code>gunicorn -b 127.0.0.1:8000 --proxy-protocol v2 --proxy-allow-from 127.0.0.1 app:app\n</code></pre>"},{"location":"deploy/#stunnel","title":"stunnel","text":"<p>stunnel can terminate TLS and forward connections with PROXY protocol headers:</p> <pre><code># /etc/stunnel/stunnel.conf\n[https]\naccept = 443\nconnect = 127.0.0.1:8000\ncert = /etc/ssl/certs/stunnel.pem\nkey = /etc/ssl/certs/stunnel.key\nprotocol = proxy\n</code></pre> <p>The <code>protocol = proxy</code> directive tells stunnel to prepend PROXY protocol v1 headers to forwarded connections.</p>"},{"location":"deploy/#awselb","title":"AWS/ELB","text":"<p>AWS Network Load Balancers (NLB) and Application Load Balancers (ALB) support PROXY protocol v2. Enable it in the target group settings, then configure Gunicorn:</p> <pre><code>gunicorn --proxy-protocol v2 --proxy-allow-from '*' app:app\n</code></pre> <p>Note</p> <p>When using <code>--proxy-allow-from '*'</code> ensure Gunicorn is not directly accessible from the internet\u2014only through the load balancer.</p>"},{"location":"deploy/#using-virtual-environments","title":"Using virtual environments","text":"<p>Install Gunicorn inside your project virtual environment to keep versions isolated:</p> <pre><code>mkdir ~/venvs/\nvirtualenv ~/venvs/webapp\nsource ~/venvs/webapp/bin/activate\npip install gunicorn\ndeactivate\n</code></pre> <p>Force installation into the active virtual environment with <code>--ignore-installed</code>:</p> <pre><code>source ~/venvs/webapp/bin/activate\npip install -I gunicorn\n</code></pre>"},{"location":"deploy/#monitoring","title":"Monitoring","text":"<p>Note</p> <p>Do not enable Gunicorn's daemon mode when using process monitors. These supervisors expect to manage the direct child process.</p>"},{"location":"deploy/#gaffer","title":"Gaffer","text":"<p>Use Gaffer with gafferd to manage Gunicorn:</p> <pre><code>[process:gunicorn]\ncmd = gunicorn -w 3 test:app\ncwd = /path/to/project\n</code></pre> <p>Create a <code>Procfile</code> if you prefer:</p> <pre><code>gunicorn = gunicorn -w 3 test:app\n</code></pre> <p>Start Gunicorn via Gaffer:</p> <pre><code>gaffer start\n</code></pre> <p>Or load it into a running gafferd instance:</p> <pre><code>gaffer load\n</code></pre>"},{"location":"deploy/#runit","title":"runit","text":"<p>runit is a popular supervisor. A sample service script (see the full example):</p> <pre><code>#!/bin/sh\n\nGUNICORN=/usr/local/bin/gunicorn\nROOT=/path/to/project\nPID=/var/run/gunicorn.pid\n\nAPP=main:application\n\nif [ -f $PID ]; then rm $PID; fi\n\ncd $ROOT\nexec $GUNICORN -c $ROOT/gunicorn.conf.py --pid=$PID $APP\n</code></pre> <p>Save as <code>/etc/sv/&lt;app_name&gt;/run</code>, make it executable, and symlink into <code>/etc/service/&lt;app_name&gt;</code>. runit will then supervise Gunicorn.</p>"},{"location":"deploy/#supervisor","title":"Supervisor","text":"<p>Supervisor configuration example (adapted from examples/supervisor.conf):</p> <pre><code>[program:gunicorn]\ncommand=/path/to/gunicorn main:application -c /path/to/gunicorn.conf.py\ndirectory=/path/to/project\nuser=nobody\nautostart=true\nautorestart=true\nredirect_stderr=true\n</code></pre>"},{"location":"deploy/#upstart","title":"Upstart","text":"<p>Sample Upstart config (logs go to <code>/var/log/upstart/myapp.log</code>):</p> <pre><code># /etc/init/myapp.conf\n\ndescription \"myapp\"\n\nstart on (filesystem.md)\nstop on runlevel [016]\n\nrespawn\nsetuid nobody\nsetgid nogroup\nchdir /path/to/app/directory\n\nexec /path/to/virtualenv/bin/gunicorn myapp:app\n</code></pre>"},{"location":"deploy/#systemd","title":"systemd","text":"<p>systemd can create a UNIX socket and launch Gunicorn on demand.</p> <p>Service file:</p> <pre><code># /etc/systemd/system/gunicorn.service\n\n[Unit]\nDescription=gunicorn daemon\nRequires=gunicorn.socket\nAfter=network.target\n\n[Service]\nType=notify\nNotifyAccess=main\nUser=someuser\nGroup=someuser\nWorkingDirectory=/home/someuser/applicationroot\nExecStart=/usr/bin/gunicorn applicationname.wsgi\nExecReload=/bin/kill -s HUP $MAINPID\nKillMode=mixed\nTimeoutStopSec=5\nPrivateTmp=true\n\n[Install]\nWantedBy=multi-user.target\n</code></pre> <p><code>Type=notify</code> lets Gunicorn report readiness to systemd. If the service should run under a transient user consider adding <code>DynamicUser=true</code>. Tighten permissions further with <code>ProtectSystem=strict</code> if the app permits.</p> <p>Socket activation file:</p> <pre><code># /etc/systemd/system/gunicorn.socket\n\n[Unit]\nDescription=gunicorn socket\n\n[Socket]\nListenStream=/run/gunicorn.sock\nSocketUser=www-data\nSocketGroup=www-data\nSocketMode=0660\n\n[Install]\nWantedBy=sockets.target\n</code></pre> <p>Enable and start the socket so it begins listening immediately and on reboot:</p> <pre><code>systemctl enable --now gunicorn.socket\n</code></pre> <p>Test connectivity from the nginx user (Debian defaults to <code>www-data</code>):</p> <pre><code>sudo -u www-data curl --unix-socket /run/gunicorn.sock http\n</code></pre> <p>Note</p> <p>Use <code>systemctl show --value -p MainPID gunicorn.service</code> to retrieve the main process ID or <code>systemctl kill -s HUP gunicorn.service</code> to send signals.</p> <p>Configure Nginx to proxy to the new socket:</p> <pre><code>user www-data;\n...\nhttp {\n    server {\n        listen          8000;\n        server_name     127.0.0.1;\n        location / {\n            proxy_pass http://unix:/run/gunicorn.sock;\n        }\n    }\n}\n...\n</code></pre> <p>Note</p> <p>Adjust <code>listen</code> and <code>server_name</code> for production (typically port 80 and your site's domain).</p> <p>Ensure nginx starts automatically:</p> <pre><code>systemctl enable nginx.service\nsystemctl start nginx\n</code></pre> <p>Browse to http://127.0.0.1:8000/ to verify Gunicorn + Nginx + systemd.</p>"},{"location":"deploy/#logging","title":"Logging","text":"<p>Configure logging through the CLI flags described in the settings documentation or via a logging configuration file. Rotate logs with <code>logrotate</code> by sending <code>SIGUSR1</code>:</p> <pre><code>kill -USR1 $(cat /var/run/gunicorn.pid)\n</code></pre> <p>Note</p> <p>If you override the <code>LOGGING</code> dictionary, set <code>disable_existing_loggers</code> to <code>False</code> so Gunicorn's loggers remain active.</p> <p>Warning</p> <p>Gunicorn's error log should capture Gunicorn-related messages only. Route your application logs separately.</p>"},{"location":"design/","title":"Design","text":""},{"location":"design/#design","title":"Design","text":"<p>A brief look at Gunicorn's architecture.</p>"},{"location":"design/#server-model","title":"Server Model","text":"<p>Gunicorn uses a pre-fork worker model: an arbiter process manages worker processes, while the workers handle requests and responses. The arbiter never touches individual client sockets.</p> \u2696\ufe0f \u2699\ufe0f \ud83d\udce1"},{"location":"design/#arbiter","title":"Arbiter","text":"<p>Orchestrates the worker pool. Listens for signals (<code>TTIN</code>, <code>TTOU</code>, <code>CHLD</code>, <code>HUP</code>) to adjust workers, restart them on failure, or reload configuration.</p>"},{"location":"design/#worker-pool","title":"Worker Pool","text":"<p>Each worker handles requests independently. Worker types determine concurrency model: sync, threaded, or async via greenlets/asyncio.</p>"},{"location":"design/#signal-communication","title":"Signal Communication","text":"<p><code>TTIN</code>/<code>TTOU</code> adjust worker count. <code>CHLD</code> triggers restart of crashed workers. <code>HUP</code> reloads configuration. See Signals.</p>"},{"location":"design/#worker-types","title":"Worker Types","text":"<p>Choose a worker type based on your application's needs.</p> SyncGthreadASGIGeventEventlet (Deprecated)Tornado <p>The default worker. Handles one request at a time per worker.</p> <ul> <li>Simple and predictable</li> <li>Errors affect only the current request</li> <li>No keep-alive support (connections close after response)</li> <li>Requires a buffering proxy (nginx, HAProxy) for production</li> </ul> <pre><code>gunicorn myapp:app\n</code></pre> <p>Threaded worker with a thread pool per worker process.</p> <ul> <li>Supports keep-alive connections</li> <li>Good balance of concurrency and simplicity</li> <li>Threads share memory (lower footprint than workers)</li> <li>Idle connections close after keepalive timeout</li> </ul> <pre><code>gunicorn myapp:app -k gthread --threads 4\n</code></pre> <p>Native asyncio support for modern async frameworks.</p> <ul> <li>For FastAPI, Starlette, Quart, and other ASGI apps</li> <li>Full async/await support</li> <li>See the ASGI Guide for details</li> </ul> <pre><code>gunicorn myapp:app -k uvicorn.workers.UvicornWorker\n</code></pre> <p>Greenlet-based async worker using Gevent.</p> <ul> <li>Handles thousands of concurrent connections</li> <li>Supports keep-alive, WebSockets, long-polling</li> <li>May require patches for some libraries (e.g., <code>psycogreen</code> for Psycopg)</li> <li>Not compatible with code that relies on blocking behavior</li> </ul> <pre><code>gunicorn myapp:app -k gevent --worker-connections 1000\n</code></pre> <p>Deprecated</p> <p>The eventlet worker is deprecated and will be removed in Gunicorn 26.0. Eventlet itself is no longer actively maintained. Please migrate to <code>gevent</code>, <code>gthread</code>, or another supported worker type.</p> <p>Greenlet-based async worker using Eventlet.</p> <ul> <li>Similar capabilities to Gevent</li> <li>Handles high concurrency for I/O-bound apps</li> <li>Some libraries may need compatibility patches</li> </ul> <pre><code>gunicorn myapp:app -k eventlet --worker-connections 1000\n</code></pre> <p>Worker for Tornado applications.</p> <ul> <li>Designed for Tornado's async framework</li> <li>Can serve WSGI apps, but not recommended for that use case</li> <li>Use when running native Tornado applications</li> </ul> <pre><code>gunicorn myapp:app -k tornado\n</code></pre>"},{"location":"design/#comparison","title":"Comparison","text":"Worker Concurrency Model Keep-Alive Best For <code>sync</code> 1 request/worker \u274c CPU-bound apps behind a proxy <code>gthread</code> Thread pool \u2705 Mixed workloads, moderate concurrency ASGI workers AsyncIO \u2705 Modern async frameworks (FastAPI, etc.) <code>gevent</code> Greenlets \u2705 I/O-bound, WebSockets, streaming <code>eventlet</code> Greenlets \u2705 Deprecated - use <code>gevent</code> instead <code>tornado</code> Tornado IOLoop \u2705 Native Tornado applications <p>Quick Decision Guide</p> <ul> <li>Simple app behind nginx? \u2192 <code>sync</code> (default)</li> <li>Need keep-alive or moderate concurrency? \u2192 <code>gthread</code></li> <li>WebSockets, streaming, long-polling? \u2192 <code>gevent</code> or ASGI worker</li> <li>FastAPI, Starlette, or async framework? \u2192 ASGI worker</li> </ul>"},{"location":"design/#when-to-use-async-workers","title":"When to Use Async Workers","text":"<p>Synchronous workers assume your app is CPU or network bound and avoids indefinite blocking operations. Use async workers when you have:</p> <ul> <li>Long blocking calls (external APIs, slow databases)</li> <li>Direct internet traffic without a buffering proxy</li> <li>Streaming request/response bodies</li> <li>Long polling or Comet patterns</li> <li>WebSockets</li> </ul> <p>Testing Slow Clients</p> <p>Tools like Hey can simulate slow responses to test how your configuration handles them.</p>"},{"location":"design/#scaling","title":"Scaling","text":""},{"location":"design/#how-many-workers","title":"How Many Workers?","text":"<p>Don't Over-Scale</p> <p>Workers \u2260 clients. Gunicorn typically needs only 4\u201312 workers to handle heavy traffic. Too many workers waste resources and can reduce throughput.</p> <p>Start with this formula and adjust under load:</p> <pre><code>workers = (2 \u00d7 CPU cores) + 1\n</code></pre> <p>Use <code>TTIN</code>/<code>TTOU</code> signals to adjust the worker count at runtime.</p>"},{"location":"design/#how-many-threads","title":"How Many Threads?","text":"<p>With the <code>gthread</code> worker, you can combine workers and threads:</p> <pre><code>gunicorn myapp:app -k gthread --workers 4 --threads 2\n</code></pre> <p>Threads vs Workers</p> <ul> <li>Threads share memory \u2192 lower footprint</li> <li>Workers isolate failures \u2192 better fault tolerance</li> <li>Combine both for the best of both worlds</li> </ul> <p>Threads can extend request time beyond the worker timeout while still notifying the arbiter. The optimal mix depends on your runtime (CPython vs PyPy) and workload.</p>"},{"location":"design/#configuration-examples","title":"Configuration Examples","text":"<pre><code># Sync (default) - simple apps behind nginx\ngunicorn myapp:app\n\n# Gthread - keep-alive and thread concurrency\ngunicorn myapp:app -k gthread --workers 4 --threads 4\n\n# Gevent - high concurrency for I/O-bound apps\ngunicorn myapp:app -k gevent --workers 4 --worker-connections 1000\n\n# ASGI - FastAPI/Starlette with Uvicorn worker\ngunicorn myapp:app -k uvicorn.workers.UvicornWorker --workers 4\n</code></pre> <p>Third-Party AsyncIO Workers</p> <p>For asyncio frameworks, you can also use third-party workers. See the aiohttp deployment guide for examples.</p>"},{"location":"dirty/","title":"Dirty Arbiters","text":"<p>Dirty Arbiters provide a separate process pool for executing long-running, blocking operations (AI model loading, heavy computation) without blocking HTTP workers. This feature is inspired by Erlang's dirty schedulers.</p>"},{"location":"dirty/#overview","title":"Overview","text":"<p>Traditional Gunicorn workers are designed to handle HTTP requests quickly. Long-running operations like loading ML models or performing heavy computation can block these workers, reducing the server's ability to handle concurrent requests.</p> <p>Dirty Arbiters solve this by providing:</p> <ul> <li>Separate worker pool - Completely separate from HTTP workers, can be killed/restarted independently</li> <li>Stateful workers - Loaded resources persist in dirty worker memory</li> <li>Message-passing IPC - Communication via Unix sockets with JSON serialization</li> <li>Explicit API - Clear <code>execute()</code> calls (no hidden IPC)</li> <li>Asyncio-based - Clean concurrent handling with streaming support</li> </ul>"},{"location":"dirty/#design-philosophy","title":"Design Philosophy","text":"<p>Dirty Arbiters follow several key design principles:</p>"},{"location":"dirty/#separate-process-hierarchy","title":"Separate Process Hierarchy","text":"<p>Unlike threads or in-process pools, Dirty Arbiters use a fully separate process tree:</p> <ul> <li>Isolation - A crash or memory leak in a dirty worker cannot affect HTTP workers</li> <li>Independent lifecycle - Dirty workers can be killed/restarted without affecting request handling</li> <li>Resource accounting - OS-level memory limits can be applied per-process</li> <li>Clean shutdown - Each process tree can be signaled and terminated independently</li> </ul>"},{"location":"dirty/#erlang-inspiration","title":"Erlang Inspiration","text":"<p>The name and concept come from Erlang's \"dirty schedulers\" - special schedulers that handle operations that would block normal schedulers. In Erlang, dirty schedulers run NIFs (Native Implemented Functions) that can't yield. Similarly, Gunicorn's Dirty Arbiters handle Python operations that would block HTTP workers.</p>"},{"location":"dirty/#why-asyncio","title":"Why Asyncio","text":"<p>The Dirty Arbiter uses asyncio for its core loop rather than the main arbiter's select-based approach:</p> <ul> <li>Non-blocking IPC - Can handle many concurrent client connections efficiently</li> <li>Concurrent request routing - Multiple requests can be dispatched to workers simultaneously</li> <li>Streaming support - Native async generators for streaming responses</li> <li>Clean signal handling - Signals integrate cleanly via <code>loop.add_signal_handler()</code></li> </ul>"},{"location":"dirty/#stateful-applications","title":"Stateful Applications","text":"<p>Traditional WSGI apps are request-scoped - they're invoked per-request and don't maintain state between requests. Dirty apps are different:</p> <ul> <li>Long-lived - Apps persist in worker memory for the worker's lifetime</li> <li>Pre-loaded resources - Models, connections, and caches stay loaded</li> <li>Explicit state management - Apps control their own lifecycle via <code>init()</code> and <code>close()</code></li> </ul> <p>This makes dirty apps ideal for ML inference, where loading a model once and reusing it for many requests is essential.</p>"},{"location":"dirty/#architecture","title":"Architecture","text":"<pre><code>                         +-------------------+\n                         |   Main Arbiter    |\n                         | (manages both)    |\n                         +--------+----------+\n                                  |\n                    SIGTERM/SIGHUP/SIGUSR1 (forwarded)\n                                  |\n           +----------------------+----------------------+\n           |                                             |\n     +-----v-----+                                +------v------+\n     | HTTP      |                                | Dirty       |\n     | Workers   |                                | Arbiter     |\n     +-----------+                                +------+------+\n           |                                             |\n           |    Unix Socket IPC                   SIGTERM/SIGHUP\n           |    /tmp/gunicorn_dirty_&lt;pid&gt;.sock          |\n           +------------------&gt;----------------------&gt;---+\n                                             +-----------+-----------+\n                                             |           |           |\n                                       +-----v---+ +-----v---+ +-----v---+\n                                       | Dirty   | | Dirty   | | Dirty   |\n                                       | Worker  | | Worker  | | Worker  |\n                                       +---------+ +---------+ +---------+\n                                          ^   |        ^   |       ^   |\n                                          |   |        |   |       |   |\n                                    Heartbeat (mtime every dirty_timeout/2)\n                                          |   |        |   |       |   |\n                                          +---+--------+---+-------+---+\n                                                       |\n                                     All workers load all dirty apps\n                                          [MLApp, ImageApp, ...]\n</code></pre>"},{"location":"dirty/#process-relationships","title":"Process Relationships","text":"Component Parent Communication Main Arbiter init/systemd Signals from OS HTTP Workers Main Arbiter Pipes, signals Dirty Arbiter Main Arbiter Signals, exit status Dirty Workers Dirty Arbiter Unix socket, signals, WorkerTmp"},{"location":"dirty/#configuration","title":"Configuration","text":"<p>Add these settings to your Gunicorn configuration file or command line:</p> <pre><code># gunicorn.conf.py\ndirty_apps = [\n    \"myapp.ml:MLApp\",\n    \"myapp.images:ImageApp\",\n]\ndirty_workers = 2          # Number of dirty workers\ndirty_timeout = 300        # Task timeout in seconds\ndirty_threads = 1          # Threads per worker\ndirty_graceful_timeout = 30  # Shutdown timeout\n</code></pre> <p>Or via command line:</p> <pre><code>gunicorn myapp:app \\\n    --dirty-app myapp.ml:MLApp \\\n    --dirty-app myapp.images:ImageApp \\\n    --dirty-workers 2 \\\n    --dirty-timeout 300\n</code></pre>"},{"location":"dirty/#configuration-options","title":"Configuration Options","text":"Setting Default Description <code>dirty_apps</code> <code>[]</code> List of dirty app import paths <code>dirty_workers</code> <code>0</code> Number of dirty workers (0 = disabled) <code>dirty_timeout</code> <code>300</code> Task timeout in seconds <code>dirty_threads</code> <code>1</code> Threads per dirty worker <code>dirty_graceful_timeout</code> <code>30</code> Graceful shutdown timeout"},{"location":"dirty/#creating-a-dirty-app","title":"Creating a Dirty App","text":"<p>Dirty apps inherit from <code>DirtyApp</code> and implement three methods:</p> <pre><code># myapp/dirty.py\nfrom gunicorn.dirty import DirtyApp\n\nclass MLApp(DirtyApp):\n    \"\"\"Dirty application for ML workloads.\"\"\"\n\n    def __init__(self):\n        self.models = {}\n\n    def init(self):\n        \"\"\"Called once at dirty worker startup.\"\"\"\n        # Pre-load commonly used models\n        self.models['default'] = self._load_model('base-model')\n\n    def __call__(self, action, *args, **kwargs):\n        \"\"\"Dispatch to action methods.\"\"\"\n        method = getattr(self, action, None)\n        if method is None:\n            raise ValueError(f\"Unknown action: {action}\")\n        return method(*args, **kwargs)\n\n    def load_model(self, name):\n        \"\"\"Load a model into memory.\"\"\"\n        if name not in self.models:\n            self.models[name] = self._load_model(name)\n        return {\"loaded\": True, \"name\": name}\n\n    def inference(self, model_name, input_text):\n        \"\"\"Run inference on loaded model.\"\"\"\n        model = self.models.get(model_name)\n        if not model:\n            raise ValueError(f\"Model not loaded: {model_name}\")\n        return model.predict(input_text)\n\n    def _load_model(self, name):\n        import torch\n        model = torch.load(f\"models/{name}.pt\")\n        return model\n\n    def close(self):\n        \"\"\"Cleanup on shutdown.\"\"\"\n        for model in self.models.values():\n            del model\n</code></pre>"},{"location":"dirty/#dirtyapp-interface","title":"DirtyApp Interface","text":"Method Description <code>init()</code> Called once when dirty worker starts, after instantiation. Load resources here. <code>__call__(action, *args, **kwargs)</code> Handle requests from HTTP workers. <code>close()</code> Called when dirty worker shuts down. Cleanup resources."},{"location":"dirty/#initialization-sequence","title":"Initialization Sequence","text":"<p>When a dirty worker starts, initialization happens in this order:</p> <ol> <li>Fork - Worker process is forked from dirty arbiter</li> <li><code>dirty_post_fork(arbiter, worker)</code> - Hook called immediately after fork</li> <li>App instantiation - Each dirty app class is instantiated (<code>__init__</code>)</li> <li><code>app.init()</code> - Called for each app after instantiation (load models, resources)</li> <li><code>dirty_worker_init(worker)</code> - Hook called after ALL apps are initialized</li> <li>Run loop - Worker starts accepting requests from HTTP workers</li> </ol> <p>This means:</p> <ul> <li>Use <code>__init__</code> for basic setup (initialize empty containers, store config)</li> <li>Use <code>init()</code> for heavy loading (ML models, database connections, large files)</li> <li>The <code>dirty_worker_init</code> hook fires only after all apps have completed their <code>init()</code> calls</li> </ul>"},{"location":"dirty/#using-from-http-workers","title":"Using from HTTP Workers","text":""},{"location":"dirty/#sync-workers-sync-gthread","title":"Sync Workers (sync, gthread)","text":"<pre><code>from gunicorn.dirty import get_dirty_client\n\ndef my_view(request):\n    client = get_dirty_client()\n\n    # Load a model\n    client.execute(\"myapp.ml:MLApp\", \"load_model\", \"gpt-4\")\n\n    # Run inference\n    result = client.execute(\n        \"myapp.ml:MLApp\",\n        \"inference\",\n        \"gpt-4\",\n        input_text=request.data\n    )\n    return result\n</code></pre>"},{"location":"dirty/#async-workers-asgi","title":"Async Workers (ASGI)","text":"<pre><code>from gunicorn.dirty import get_dirty_client_async\n\nasync def my_view(request):\n    client = await get_dirty_client_async()\n\n    # Non-blocking execution\n    await client.execute_async(\"myapp.ml:MLApp\", \"load_model\", \"gpt-4\")\n\n    result = await client.execute_async(\n        \"myapp.ml:MLApp\",\n        \"inference\",\n        \"gpt-4\",\n        input_text=request.data\n    )\n    return result\n</code></pre>"},{"location":"dirty/#streaming","title":"Streaming","text":"<p>Dirty Arbiters support streaming responses for use cases like LLM token generation, where data is produced incrementally. This enables real-time delivery of results without waiting for complete execution.</p>"},{"location":"dirty/#streaming-with-generators","title":"Streaming with Generators","text":"<p>Any dirty app action that returns a generator (sync or async) automatically streams chunks to the client:</p> <pre><code># myapp/llm.py\nfrom gunicorn.dirty import DirtyApp\n\nclass LLMApp(DirtyApp):\n    def init(self):\n        from transformers import pipeline\n        self.generator = pipeline(\"text-generation\", model=\"gpt2\")\n\n    def generate(self, prompt):\n        \"\"\"Sync streaming - yields tokens.\"\"\"\n        for token in self.generator(prompt, stream=True):\n            yield token[\"generated_text\"]\n\n    async def generate_async(self, prompt):\n        \"\"\"Async streaming - yields tokens.\"\"\"\n        import openai\n        client = openai.AsyncOpenAI()\n        stream = await client.chat.completions.create(\n            model=\"gpt-4\",\n            messages=[{\"role\": \"user\", \"content\": prompt}],\n            stream=True\n        )\n        async for chunk in stream:\n            if chunk.choices[0].delta.content:\n                yield chunk.choices[0].delta.content\n\n    def close(self):\n        pass\n</code></pre>"},{"location":"dirty/#client-streaming-api","title":"Client Streaming API","text":"<p>Use <code>stream()</code> for sync workers and <code>stream_async()</code> for async workers:</p> <p>Sync Workers (sync, gthread):</p> <pre><code>from gunicorn.dirty import get_dirty_client\n\ndef generate_view(request):\n    client = get_dirty_client()\n\n    def generate_response():\n        for chunk in client.stream(\"myapp.llm:LLMApp\", \"generate\", request.prompt):\n            yield chunk\n\n    return StreamingResponse(generate_response())\n</code></pre> <p>Async Workers (ASGI):</p> <pre><code>from gunicorn.dirty import get_dirty_client_async\n\nasync def generate_view(request):\n    client = await get_dirty_client_async()\n\n    async def generate_response():\n        async for chunk in client.stream_async(\"myapp.llm:LLMApp\", \"generate\", request.prompt):\n            yield chunk\n\n    return StreamingResponse(generate_response())\n</code></pre>"},{"location":"dirty/#streaming-protocol","title":"Streaming Protocol","text":"<p>Streaming uses a simple protocol with three message types:</p> <ol> <li>Chunk (<code>type: \"chunk\"</code>) - Contains partial data</li> <li>End (<code>type: \"end\"</code>) - Signals stream completion</li> <li>Error (<code>type: \"error\"</code>) - Signals error during streaming</li> </ol> <p>Example message flow: <pre><code>Client -&gt; Arbiter -&gt; Worker: request\nWorker -&gt; Arbiter -&gt; Client: chunk (data: \"Hello\")\nWorker -&gt; Arbiter -&gt; Client: chunk (data: \" \")\nWorker -&gt; Arbiter -&gt; Client: chunk (data: \"World\")\nWorker -&gt; Arbiter -&gt; Client: end\n</code></pre></p>"},{"location":"dirty/#error-handling-in-streams","title":"Error Handling in Streams","text":"<p>Errors during streaming are delivered as error messages:</p> <pre><code>def generate_view(request):\n    client = get_dirty_client()\n\n    try:\n        for chunk in client.stream(\"myapp.llm:LLMApp\", \"generate\", prompt):\n            yield chunk\n    except DirtyError as e:\n        # Error occurred mid-stream\n        yield f\"\\n[Error: {e.message}]\"\n</code></pre>"},{"location":"dirty/#best-practices-for-streaming","title":"Best Practices for Streaming","text":"<ol> <li>Use async generators for I/O-bound streaming - e.g., API calls to external services</li> <li>Use sync generators for CPU-bound streaming - e.g., local model inference</li> <li>Yield frequently - Heartbeats are sent during streaming to keep workers alive</li> <li>Keep chunks small - Smaller chunks provide better perceived latency</li> <li>Handle client disconnection - Streams continue even if client disconnects; design accordingly</li> </ol>"},{"location":"dirty/#flask-example","title":"Flask Example","text":"<pre><code>from flask import Flask, Response\nfrom gunicorn.dirty import get_dirty_client\n\napp = Flask(__name__)\n\n@app.route(\"/chat\", methods=[\"POST\"])\ndef chat():\n    prompt = request.json.get(\"prompt\")\n    client = get_dirty_client()\n\n    def stream():\n        for token in client.stream(\"myapp.llm:LLMApp\", \"generate\", prompt):\n            yield f\"data: {token}\\n\\n\"\n\n    return Response(stream(), content_type=\"text/event-stream\")\n</code></pre>"},{"location":"dirty/#fastapi-example","title":"FastAPI Example","text":"<pre><code>from fastapi import FastAPI\nfrom fastapi.responses import StreamingResponse\nfrom gunicorn.dirty import get_dirty_client_async\n\napp = FastAPI()\n\n@app.post(\"/chat\")\nasync def chat(prompt: str):\n    client = await get_dirty_client_async()\n\n    async def stream():\n        async for token in client.stream_async(\"myapp.llm:LLMApp\", \"generate\", prompt):\n            yield f\"data: {token}\\n\\n\"\n\n    return StreamingResponse(stream(), media_type=\"text/event-stream\")\n</code></pre>"},{"location":"dirty/#lifecycle-hooks","title":"Lifecycle Hooks","text":"<p>Dirty Arbiters provide hooks for customization:</p> <pre><code># gunicorn.conf.py\n\ndef on_dirty_starting(arbiter):\n    \"\"\"Called just before the dirty arbiter starts.\"\"\"\n    print(\"Dirty arbiter starting...\")\n\ndef dirty_post_fork(arbiter, worker):\n    \"\"\"Called just after a dirty worker is forked.\"\"\"\n    print(f\"Dirty worker {worker.pid} forked\")\n\ndef dirty_worker_init(worker):\n    \"\"\"Called after a dirty worker initializes all apps.\"\"\"\n    print(f\"Dirty worker {worker.pid} initialized\")\n\ndef dirty_worker_exit(arbiter, worker):\n    \"\"\"Called when a dirty worker exits.\"\"\"\n    print(f\"Dirty worker {worker.pid} exiting\")\n\non_dirty_starting = on_dirty_starting\ndirty_post_fork = dirty_post_fork\ndirty_worker_init = dirty_worker_init\ndirty_worker_exit = dirty_worker_exit\n</code></pre>"},{"location":"dirty/#signal-handling","title":"Signal Handling","text":"<p>Dirty Arbiters integrate with the main arbiter's signal handling. Signals are forwarded from the main arbiter to the dirty arbiter, which then propagates them to workers.</p>"},{"location":"dirty/#signal-flow","title":"Signal Flow","text":"<pre><code>  Main Arbiter                    Dirty Arbiter                 Dirty Workers\n       |                                |                             |\n  SIGTERM/SIGHUP/SIGUSR1 ------&gt;  signal_handler()                    |\n       |                                |                             |\n       |                          call_soon_threadsafe()              |\n       |                                |                             |\n       |                          handle_signal()                     |\n       |                                |                             |\n       |                                +------&gt; os.kill(worker, sig) |\n       |                                                              |\n</code></pre>"},{"location":"dirty/#signal-reference","title":"Signal Reference","text":"Signal At Dirty Arbiter At Dirty Workers Notes <code>SIGTERM</code> Sets <code>self.alive = False</code>, waits for graceful shutdown Exits after completing current request Graceful shutdown with timeout <code>SIGQUIT</code> Immediate exit via <code>sys.exit(0)</code> Killed immediately Fast shutdown, no cleanup <code>SIGHUP</code> Kills all workers, spawns new ones Exits immediately Hot reload of workers <code>SIGUSR1</code> Reopens log files, forwards to workers Reopens log files Log rotation support <code>SIGCHLD</code> Handled by event loop, triggers reap N/A Worker death detection <code>SIGINT</code> Same as SIGTERM Same as SIGTERM Ctrl-C handling"},{"location":"dirty/#forwarded-signals","title":"Forwarded Signals","text":"<p>The main arbiter forwards these signals to the dirty arbiter process:</p> <ul> <li>SIGTERM - Graceful shutdown of entire process tree</li> <li>SIGHUP - Worker reload (main arbiter reloads HTTP workers, dirty arbiter reloads dirty workers)</li> <li>SIGUSR1 - Log rotation across all processes</li> </ul>"},{"location":"dirty/#async-signal-handling","title":"Async Signal Handling","text":"<p>The dirty arbiter uses asyncio's signal integration for safe handling in the event loop:</p> <pre><code># Signals are registered with the event loop\nloop.add_signal_handler(signal.SIGTERM, self.signal_handler, signal.SIGTERM)\n\ndef signal_handler(self, sig):\n    # Use call_soon_threadsafe for thread-safe event loop integration\n    self.loop.call_soon_threadsafe(self.handle_signal, sig)\n</code></pre> <p>This pattern ensures signals don't interrupt asyncio operations mid-execution, preventing race conditions and partial state updates.</p>"},{"location":"dirty/#liveness-and-health-monitoring","title":"Liveness and Health Monitoring","text":"<p>Dirty Arbiters implement multiple layers of health monitoring to ensure workers remain responsive and orphaned processes are cleaned up.</p>"},{"location":"dirty/#heartbeat-mechanism","title":"Heartbeat Mechanism","text":"<p>Each dirty worker maintains a \"worker tmp\" file whose mtime serves as a heartbeat:</p> <pre><code>Worker Lifecycle:\n  1. Worker spawns, creates WorkerTmp file\n  2. Worker touches file every (dirty_timeout / 2) seconds\n  3. Arbiter checks all worker mtimes every 1 second\n  4. If mtime &gt; dirty_timeout seconds old, worker is killed\n</code></pre> <p>This file-based heartbeat has several advantages:</p> <ul> <li>OS-level tracking - No IPC required, works even if worker is stuck in C code</li> <li>Crash detection - Arbiter notices immediately when worker stops updating</li> <li>Graceful recovery - Worker killed with SIGKILL, arbiter spawns replacement</li> </ul>"},{"location":"dirty/#timeout-detection","title":"Timeout Detection","text":"<p>The arbiter's monitoring loop checks worker health every second:</p> <pre><code># Pseudocode for worker monitoring\nfor worker in self.workers:\n    mtime = worker.tmp.last_update()\n    if time.time() - mtime &gt; self.dirty_timeout:\n        log.warning(f\"Worker {worker.pid} timed out, killing\")\n        os.kill(worker.pid, signal.SIGKILL)\n</code></pre> <p>When a worker is killed:</p> <ol> <li><code>SIGCHLD</code> is delivered to the arbiter</li> <li>Arbiter reaps the worker process</li> <li><code>dirty_worker_exit</code> hook is called</li> <li>A new worker is spawned to maintain <code>dirty_workers</code> count</li> </ol>"},{"location":"dirty/#parent-death-detection","title":"Parent Death Detection","text":"<p>Dirty arbiters monitor their parent process (the main arbiter) to detect orphaning:</p> <pre><code># In the dirty arbiter's main loop\nif os.getppid() != self.parent_pid:\n    log.info(\"Parent died, shutting down\")\n    self.alive = False\n</code></pre> <p>This check runs every iteration of the event loop (typically sub-millisecond). When parent death is detected:</p> <ol> <li>Arbiter sets <code>self.alive = False</code></li> <li>All workers are sent SIGTERM</li> <li>Arbiter waits for graceful shutdown (up to <code>dirty_graceful_timeout</code>)</li> <li>Remaining workers are sent SIGKILL</li> <li>Arbiter exits</li> </ol>"},{"location":"dirty/#orphan-cleanup","title":"Orphan Cleanup","text":"<p>To handle edge cases where the dirty arbiter itself crashes, a well-known PID file is used:</p> <p>PID file location: <code>/tmp/gunicorn_dirty_&lt;main_arbiter_pid&gt;.pid</code></p> <p>On startup, the dirty arbiter:</p> <ol> <li>Checks if PID file exists</li> <li>If yes, reads the old PID and attempts to kill it (<code>SIGTERM</code>)</li> <li>Waits briefly for cleanup</li> <li>Writes its own PID to the file</li> <li>On exit, removes the PID file</li> </ol> <p>This ensures that if a dirty arbiter crashes and the main arbiter restarts it, the old orphaned process is terminated.</p>"},{"location":"dirty/#respawn-behavior","title":"Respawn Behavior","text":"Component Respawn Trigger Respawn Behavior Dirty Worker Exit, timeout, or crash Immediate respawn to maintain <code>dirty_workers</code> count Dirty Arbiter Exit or crash Main arbiter respawns if not shutting down <p>The dirty arbiter maintains a target worker count and continuously spawns workers until the target is reached:</p> <pre><code>while len(self.workers) &lt; self.num_workers:\n    self.spawn_worker()\n</code></pre>"},{"location":"dirty/#monitoring-recommendations","title":"Monitoring Recommendations","text":"<p>For production deployments, consider:</p> <ol> <li>Log monitoring - Watch for \"Worker timed out\" messages indicating hung workers</li> <li>Process monitoring - Use systemd or supervisord to monitor the main arbiter</li> <li>Metrics - Track respawn frequency to detect unstable workers</li> </ol> <pre><code># Check for recent worker timeouts\ngrep \"Worker.*timed out\" /var/log/gunicorn.log | tail -20\n\n# Monitor process tree\nwatch -n 1 'pstree -p $(cat gunicorn.pid)'\n</code></pre>"},{"location":"dirty/#error-handling","title":"Error Handling","text":"<p>The dirty client raises specific exceptions:</p> <pre><code>from gunicorn.dirty import (\n    DirtyError,\n    DirtyTimeoutError,\n    DirtyConnectionError,\n    DirtyAppError,\n    DirtyAppNotFoundError,\n)\n\ntry:\n    result = client.execute(\"myapp.ml:MLApp\", \"inference\", \"model\", data)\nexcept DirtyTimeoutError:\n    # Operation timed out\n    pass\nexcept DirtyAppNotFoundError:\n    # App not loaded in dirty workers\n    pass\nexcept DirtyAppError as e:\n    # Error during app execution\n    print(f\"App error: {e.message}, traceback: {e.traceback}\")\nexcept DirtyConnectionError:\n    # Connection to dirty arbiter failed\n    pass\n</code></pre>"},{"location":"dirty/#best-practices","title":"Best Practices","text":"<ol> <li>Pre-load commonly used resources in <code>init()</code> to avoid cold starts</li> <li>Set appropriate timeouts based on your workload</li> <li>Handle errors gracefully - dirty workers may restart</li> <li>Use meaningful action names for easier debugging</li> <li>Keep responses JSON-serializable - results are passed via IPC</li> </ol>"},{"location":"dirty/#monitoring","title":"Monitoring","text":"<p>Monitor dirty workers using standard process monitoring:</p> <pre><code># Check dirty arbiter and workers\nps aux | grep \"dirty\"\n\n# View logs\ntail -f gunicorn.log | grep dirty\n</code></pre>"},{"location":"dirty/#example-image-processing","title":"Example: Image Processing","text":"<pre><code># myapp/images.py\nfrom gunicorn.dirty import DirtyApp\nfrom PIL import Image\nimport io\n\nclass ImageApp(DirtyApp):\n    def init(self):\n        # Pre-import heavy libraries\n        import cv2\n        self.cv2 = cv2\n\n    def resize(self, image_data, width, height):\n        \"\"\"Resize an image.\"\"\"\n        img = Image.open(io.BytesIO(image_data))\n        resized = img.resize((width, height))\n        buffer = io.BytesIO()\n        resized.save(buffer, format='PNG')\n        return buffer.getvalue()\n\n    def thumbnail(self, image_data, size=128):\n        \"\"\"Create a thumbnail.\"\"\"\n        img = Image.open(io.BytesIO(image_data))\n        img.thumbnail((size, size))\n        buffer = io.BytesIO()\n        img.save(buffer, format='JPEG')\n        return buffer.getvalue()\n\n    def close(self):\n        pass\n</code></pre> <p>Usage:</p> <pre><code>from gunicorn.dirty import get_dirty_client\n\ndef upload_image(request):\n    client = get_dirty_client()\n\n    # Create thumbnail in dirty worker\n    thumbnail = client.execute(\n        \"myapp.images:ImageApp\",\n        \"thumbnail\",\n        request.files['image'].read(),\n        size=256\n    )\n\n    return save_thumbnail(thumbnail)\n</code></pre>"},{"location":"dirty/#complete-examples","title":"Complete Examples","text":"<p>For full working examples with Docker deployment, see:</p> <ul> <li>Embedding Service Example - FastAPI-based text embedding API using sentence-transformers with dirty workers for ML model management.</li> <li>Streaming Chat Example - Simulated LLM chat with token-by-token SSE streaming, demonstrating dirty worker generators and real-time response delivery.</li> </ul>"},{"location":"faq/","title":"FAQ","text":""},{"location":"faq/#faq","title":"FAQ","text":""},{"location":"faq/#wsgi-bits","title":"WSGI bits","text":""},{"location":"faq/#how-do-i-set-script_name","title":"How do I set <code>SCRIPT_NAME</code>?","text":"<p>By default <code>SCRIPT_NAME</code> is an empty string. Set it via an environment variable or HTTP header. Because the header contains an underscore it is only accepted from trusted forwarders listed in <code>forwarded_allow_ips</code>.</p> <p>Note</p> <p>If your application should appear under a subfolder, <code>SCRIPT_NAME</code> typically starts with a single leading slash and no trailing slash.</p>"},{"location":"faq/#server-stuff","title":"Server stuff","text":""},{"location":"faq/#how-do-i-reload-my-application-in-gunicorn","title":"How do I reload my application in Gunicorn?","text":"<p>Send <code>HUP</code> to the master process for a graceful reload:</p> <pre><code>kill -HUP masterpid\n</code></pre>"},{"location":"faq/#how-might-i-test-a-proxy-configuration","title":"How might I test a proxy configuration?","text":"<p>Use Hey to confirm that your proxy buffers responses correctly for synchronous workers:</p> <pre><code>hey -n 10000 -c 100 http://127.0.0.1:5000/\n</code></pre> <p>That benchmark issues 10,000 requests with a concurrency of 100.</p>"},{"location":"faq/#how-can-i-name-processes","title":"How can I name processes?","text":"<p>Install setproctitle to give Gunicorn processes meaningful names in tools such as <code>ps</code> and <code>top</code>. This helps when running multiple Gunicorn instances. See the <code>proc_name</code> setting for details.</p>"},{"location":"faq/#why-is-there-no-http-keep-alive","title":"Why is there no HTTP keep-alive?","text":"<p>The default sync workers target Nginx, which uses HTTP/1.0 for upstream connections. If you need to serve unbuffered internet traffic directly, pick an async worker instead.</p>"},{"location":"faq/#worker-processes","title":"Worker processes","text":""},{"location":"faq/#how-do-i-know-which-type-of-worker-to-use","title":"How do I know which type of worker to use?","text":"<p>Read the design guide for guidance on worker types.</p>"},{"location":"faq/#what-types-of-workers-are-available","title":"What types of workers are available?","text":"<p>See the <code>worker_class</code> configuration reference.</p>"},{"location":"faq/#how-can-i-figure-out-the-best-number-of-worker-processes","title":"How can I figure out the best number of worker processes?","text":"<p>Follow the recommendations for tuning the <code>number of workers</code>.</p>"},{"location":"faq/#how-can-i-change-the-number-of-workers-dynamically","title":"How can I change the number of workers dynamically?","text":"<p>Send <code>TTIN</code> or <code>TTOU</code> to the master process:</p> <pre><code>kill -TTIN $masterpid  # increment workers\nkill -TTOU $masterpid  # decrement workers\n</code></pre>"},{"location":"faq/#does-gunicorn-suffer-from-the-thundering-herd-problem","title":"Does Gunicorn suffer from the thundering herd problem?","text":"<p>Potentially, when many sleeping handlers wake simultaneously but only one takes the request. There is ongoing work to mitigate this (issue #792). Monitor load if you use large numbers of workers or threads.</p>"},{"location":"faq/#why-dont-i-see-logs-in-the-console","title":"Why don't I see logs in the console?","text":"<p>Gunicorn 19.0 disabled console logging by default. Use <code>--log-file=-</code> to stream logs to stdout. Console logging returned in 19.2.</p>"},{"location":"faq/#kernel-parameters","title":"Kernel parameters","text":"<p>High-concurrency deployments may need kernel tuning. These Linux-oriented tips apply to any network service.</p>"},{"location":"faq/#how-can-i-increase-the-maximum-number-of-file-descriptors","title":"How can I increase the maximum number of file descriptors?","text":"<p>Raise the per-process limit (remember sockets count as files). Running <code>sudo ulimit</code> is ineffective\u2014switch to root, adjust the limit, then launch Gunicorn. Consider managing limits via systemd service units or init scripts.</p>"},{"location":"faq/#how-can-i-increase-the-maximum-socket-backlog","title":"How can I increase the maximum socket backlog?","text":"<p>Increase the queue of pending connections:</p> <pre><code>sudo sysctl -w net.core.somaxconn=\"2048\"\n</code></pre>"},{"location":"faq/#how-can-i-disable-the-use-of-sendfile","title":"How can I disable the use of <code>sendfile()</code>?","text":"<p>Pass <code>--no-sendfile</code> or set the <code>SENDFILE=0</code> environment variable.</p>"},{"location":"faq/#troubleshooting","title":"Troubleshooting","text":""},{"location":"faq/#django-reports-improperlyconfigured","title":"Django reports <code>ImproperlyConfigured</code>","text":"<p>Asynchronous workers may break <code>django.core.urlresolvers.reverse</code>. Use <code>reverse_lazy</code> instead.</p>"},{"location":"faq/#how-do-i-avoid-blocking-in-osfchmod","title":"How do I avoid blocking in <code>os.fchmod</code>?","text":"<p>Gunicorn's heartbeat touches temporary files. On disk-backed filesystems (for example <code>/tmp</code> on some distributions) <code>os.fchmod</code> can block if I/O stalls or the filesystem fills up. Mount a <code>tmpfs</code> and point <code>--worker-tmp-dir</code> to it.</p> <p>Check whether <code>/tmp</code> is RAM-backed:</p> <pre><code>df /tmp\n</code></pre> <p>If not, create a new <code>tmpfs</code> mount:</p> <pre><code>sudo cp /etc/fstab /etc/fstab.orig\nsudo mkdir /mem\necho 'tmpfs       /mem tmpfs defaults,size=64m,mode=1777,noatime,comment=for-gunicorn 0 0' | sudo tee -a /etc/fstab\nsudo mount /mem\n</code></pre> <p>Verify the result:</p> <pre><code>df /mem\n</code></pre> <p>Then start Gunicorn with <code>--worker-tmp-dir /mem</code>.</p>"},{"location":"faq/#why-are-workers-silently-killed","title":"Why are workers silently killed?","text":"<p>If a worker vanishes without logs, check for <code>SIGKILL</code>. Reverse proxies may show <code>502</code> responses while Gunicorn logs only new worker startups (for example, <code>[INFO] Booting worker</code>). A common culprit is the OOM killer in cgroups-limited environments.</p> <p>Inspect kernel logs:</p> <pre><code>dmesg | grep gunicorn\n</code></pre> <p>If you see messages similar to <code>Memory cgroup out of memory ... Killed process (gunicorn.md)</code>, raise memory limits or adjust OOM behaviour.</p>"},{"location":"install/","title":"Installation","text":"<p>Note</p> <p>Gunicorn requires Python 3.12 or newer.</p>"},{"location":"install/#quick-install","title":"Quick Install","text":"pippipxDockerSystem Packages <pre><code>pip install gunicorn\n</code></pre> <pre><code>pipx install gunicorn\n</code></pre> <pre><code>docker pull ghcr.io/benoitc/gunicorn:latest\ndocker run -p 8000:8000 -v $(pwd):/app ghcr.io/benoitc/gunicorn app:app\n</code></pre> <p>See the Docker guide for production configurations.</p> <p>Debian/Ubuntu: <pre><code>sudo apt-get update\nsudo apt-get install gunicorn\n</code></pre></p> <p>Fedora: <pre><code>sudo dnf install python3-gunicorn\n</code></pre></p> <p>Arch Linux: <pre><code>sudo pacman -S gunicorn\n</code></pre></p> <p>Warning</p> <p>System packages may lag behind the latest release. For production, prefer pip installation in a virtual environment.</p>"},{"location":"install/#virtual-environment-recommended","title":"Virtual Environment (Recommended)","text":"<p>Always install Gunicorn inside a virtual environment to isolate dependencies:</p> <pre><code># Create virtual environment\npython -m venv venv\n\n# Activate it\nsource venv/bin/activate  # Linux/macOS\n# or: venv\\Scripts\\activate  # Windows\n\n# Install gunicorn\npip install gunicorn\n</code></pre>"},{"location":"install/#from-source","title":"From Source","text":"<p>Install the latest development version from GitHub:</p> <pre><code>pip install git+https://github.com/benoitc/gunicorn.git\n</code></pre> <p>Upgrade to the latest commit:</p> <pre><code>pip install -U git+https://github.com/benoitc/gunicorn.git\n</code></pre>"},{"location":"install/#extra-packages","title":"Extra Packages","text":"<p>Gunicorn provides optional extras for additional worker types and features. Install them with pip's bracket syntax:</p> <pre><code>pip install gunicorn[gevent,setproctitle]\n</code></pre>"},{"location":"install/#worker-types","title":"Worker Types","text":"Extra Description <code>gunicorn[gevent]</code> Gevent-based greenlet workers <code>gunicorn[gthread]</code> Threaded workers <code>gunicorn[tornado]</code> Tornado-based workers (not recommended) <code>gunicorn[eventlet]</code> Deprecated - will be removed in 26.0 <p>See the design docs for guidance on choosing worker types.</p>"},{"location":"install/#utilities","title":"Utilities","text":"Extra Description <code>gunicorn[setproctitle]</code> Set process name in <code>ps</code>/<code>top</code> output <p>Tip</p> <p>If running multiple Gunicorn instances, use <code>setproctitle</code> with the <code>proc_name</code> setting to distinguish them.</p>"},{"location":"install/#async-workers","title":"Async Workers","text":"<p>For applications using async I/O patterns, install the appropriate greenlet library:</p> GeventASGI (asyncio) <pre><code>pip install gunicorn[gevent]\n</code></pre> <p>Run with: <pre><code>gunicorn app:app --worker-class gevent\n</code></pre></p> <p>No extra installation required:</p> <pre><code>gunicorn app:app --worker-class asgi\n</code></pre> <p>For better performance, install uvloop: <pre><code>pip install uvloop\ngunicorn app:app --worker-class asgi --asgi-loop uvloop\n</code></pre></p> <p>Note</p> <p>Greenlet-based workers require the Python development headers. On Ubuntu: <code>sudo apt-get install python3-dev</code></p>"},{"location":"install/#verify-installation","title":"Verify Installation","text":"<p>Check the installed version:</p> <pre><code>gunicorn --version\n</code></pre> <p>Test with a simple application:</p> <pre><code>echo 'def app(e, s): s(\"200 OK\", []); return [b\"OK\"]' &gt; test_app.py\ngunicorn test_app:app\n# Visit http://127.0.0.1:8000\n</code></pre>"},{"location":"install/#next-steps","title":"Next Steps","text":"<ul> <li>Quickstart - Get running in 5 minutes</li> <li>Run - CLI usage and framework integration</li> <li>Configure - Configuration options</li> </ul>"},{"location":"instrumentation/","title":"Instrumentation","text":""},{"location":"instrumentation/#instrumentation","title":"Instrumentation","text":"<p>Added in 19.1</p> <p>Gunicorn exposes optional instrumentation for the arbiter and workers using the statsD protocol over UDP. The <code>gunicorn.instrument.statsd</code> module turns Gunicorn into a statsD client.</p> <p>UDP keeps Gunicorn isolated from slow statsD consumers, so metrics collection does not impact request handling.</p> <p>Tell Gunicorn where the statsD server is located:</p> <pre><code>gunicorn --statsd-host=localhost:8125 --statsd-prefix=service.app ...\n</code></pre> <p>The <code>Statsd</code> logger subclasses <code>gunicorn.glogging.Logger</code> and tracks:</p> <ul> <li><code>gunicorn.requests</code> \u2014 request rate per second</li> <li><code>gunicorn.request.duration</code> \u2014 request duration histogram (milliseconds.md)</li> <li><code>gunicorn.workers</code> \u2014 number of workers managed by the arbiter (gauge.md)</li> <li><code>gunicorn.log.critical</code> \u2014 rate of critical log messages</li> <li><code>gunicorn.log.error</code> \u2014 rate of error log messages</li> <li><code>gunicorn.log.warning</code> \u2014 rate of warning log messages</li> <li><code>gunicorn.log.exception</code> \u2014 rate of exceptional log messages</li> </ul> <p>See the <code>statsd_host</code> setting for additional options.</p> <p>statsD</p>"},{"location":"news/","title":"Latest","text":""},{"location":"news/#changelog","title":"Changelog","text":""},{"location":"news/#2500-unreleased","title":"25.0.0 - unreleased","text":""},{"location":"news/#new-features","title":"New Features","text":"<ul> <li>Dirty Arbiters: Separate process pool for long-running blocking operations   (ML model loading, heavy computation) - inspired by Erlang dirty schedulers</li> </ul>"},{"location":"news/#2411-2026-01-24","title":"24.1.1 - 2026-01-24","text":""},{"location":"news/#bug-fixes","title":"Bug Fixes","text":"<ul> <li>Fix <code>forwarded_allow_ips</code> and <code>proxy_allow_ips</code> to remain as strings for backward   compatibility with external tools like uvicorn. Network validation now uses strict   mode to detect invalid CIDR notation (e.g., <code>192.168.1.1/24</code> where host bits are set)   (#3458,   PR #3459)</li> </ul>"},{"location":"news/#2410-2026-01-23","title":"24.1.0 - 2026-01-23","text":""},{"location":"news/#new-features_1","title":"New Features","text":"<ul> <li>Official Docker Image: Gunicorn now publishes official Docker images to GitHub   Container Registry at <code>ghcr.io/benoitc/gunicorn</code></li> <li>Based on Python 3.12 slim image</li> <li>Uses recommended worker formula (2 \u00d7 CPU + 1)</li> <li> <p>Configurable via environment variables</p> </li> <li> <p>PROXY Protocol v2 Support: Extended PROXY protocol implementation to support   the binary v2 format in addition to the existing text-based v1 format</p> </li> <li>New <code>--proxy-protocol</code> modes: <code>off</code>, <code>v1</code>, <code>v2</code>, <code>auto</code></li> <li> <p>Works with HAProxy, AWS NLB/ALB, and other PROXY protocol v2 sources</p> </li> <li> <p>CIDR Network Support: <code>--forwarded-allow-ips</code> and <code>--proxy-allow-from</code> now   accept CIDR notation (e.g., <code>192.168.0.0/16</code>) for specifying trusted networks</p> </li> <li> <p>Socket Backlog Metric: New <code>gunicorn.socket.backlog</code> gauge metric reports   the current socket backlog size on Linux systems</p> </li> <li> <p>InotifyReloader Enhancement: The inotify-based reloader now watches newly   imported modules, not just those loaded at startup</p> </li> </ul>"},{"location":"news/#bug-fixes_1","title":"Bug Fixes","text":"<ul> <li>Fix signal handling regression where SIGCLD alias caused errors on Linux</li> <li>Fix socket blocking mode on keepalive connections with async workers</li> <li>Handle <code>SSLWantReadError</code> in <code>finish_body()</code> to prevent worker hangs</li> <li>Log SIGTERM as info level instead of warning</li> <li>Print exception details to stderr when worker fails to boot</li> <li>Fix <code>unreader.unread()</code> to prepend data to buffer instead of appending</li> <li>Prevent <code>RecursionError</code> when pickling Config objects</li> </ul>"},{"location":"news/#2400-2026-01-23","title":"24.0.0 - 2026-01-23","text":""},{"location":"news/#new-features_2","title":"New Features","text":"<ul> <li>ASGI Worker (Beta): Native asyncio-based ASGI support for running async Python   frameworks like FastAPI, Starlette, and Quart without external dependencies</li> <li>HTTP/1.1 with keepalive connections</li> <li>WebSocket support</li> <li>Lifespan protocol for startup/shutdown hooks</li> <li> <p>Optional uvloop for improved performance</p> </li> <li> <p>uWSGI Binary Protocol: Support for receiving requests from nginx via   <code>uwsgi_pass</code> directive</p> </li> <li> <p>Documentation Migration: Migrated to MkDocs with Material theme</p> </li> </ul>"},{"location":"news/#security","title":"Security","text":"<ul> <li>eventlet: Require eventlet &gt;= 0.40.3 (CVE-2021-21419, CVE-2025-58068)</li> <li>gevent: Require gevent &gt;= 24.10.1 (CVE-2023-41419, CVE-2024-3219)</li> <li>tornado: Require tornado &gt;= 6.5.0 (CVE-2025-47287)</li> </ul>"},{"location":"news/#2300-2024-08-10","title":"23.0.0 - 2024-08-10","text":"<ul> <li>minor docs fixes (PR #3217, PR #3089, PR #3167)</li> <li>worker_class parameter accepts a class (PR #3079)</li> <li>fix deadlock if request terminated during chunked parsing (PR #2688)</li> <li>permit receiving Transfer-Encodings: compress, deflate, gzip (PR #3261)</li> <li>permit Transfer-Encoding headers specifying multiple encodings. note: no parameters, still (PR #3261)</li> <li>sdist generation now explicitly excludes sphinx build folder (PR #3257)</li> <li>decode bytes-typed status (as can be passed by gevent) as utf-8 instead of raising <code>TypeError</code> (PR #2336)</li> <li>raise correct Exception when encounting invalid chunked requests (PR #3258)</li> <li>the SCRIPT_NAME and PATH_INFO headers, when received from allowed forwarders, are no longer restricted for containing an underscore (PR #3192)</li> <li>include IPv6 loopback address <code>[::1]</code> in default for forwarded-allow-ips and proxy-allow-ips (PR #3192)</li> </ul> <p>Note</p> <ul> <li>The SCRIPT_NAME change mitigates a regression that appeared first in the 22.0.0 release</li> <li>Review your forwarded-allow-ips setting if you are still not seeing the SCRIPT_NAME transmitted</li> <li>Review your forwarder-headers setting if you are missing headers after upgrading from a version prior to 22.0.0</li> </ul>"},{"location":"news/#breaking-changes","title":"Breaking changes","text":"<ul> <li>refuse requests where the uri field is empty (PR #3255)</li> <li>refuse requests with invalid CR/LR/NUL in heade field values (PR #3253)</li> <li>remove temporary <code>--tolerate-dangerous-framing</code> switch from 22.0 (PR #3260)</li> <li>If any of the breaking changes affect you, be aware that now refused requests can post a security problem, especially so in setups involving request pipe-lining and/or proxies.</li> </ul>"},{"location":"news/#2200-2024-04-17","title":"22.0.0 - 2024-04-17","text":"<ul> <li>use <code>utime</code> to notify workers liveness</li> <li>migrate setup to pyproject.toml</li> <li>fix numerous security vulnerabilities in HTTP parser (closing some request smuggling vectors)</li> <li>parsing additional requests is no longer attempted past unsupported request framing</li> <li>on HTTP versions &lt; 1.1 support for chunked transfer is refused (only used in exploits)</li> <li>requests conflicting configured or passed SCRIPT_NAME now produce a verbose error</li> <li>Trailer fields are no longer inspected for headers indicating secure scheme</li> <li>support Python 3.12</li> </ul>"},{"location":"news/#breaking-changes_1","title":"Breaking changes","text":"<ul> <li>minimum version is Python 3.7</li> <li>the limitations on valid characters in the HTTP method have been bounded to Internet Standards</li> <li>requests specifying unsupported transfer coding (order.md) are refused by default (rare.md)</li> <li>HTTP methods are no longer casefolded by default (IANA method registry contains none affected)</li> <li>HTTP methods containing the number sign (#) are no longer accepted by default (rare.md)</li> <li>HTTP versions &lt; 1.0 or &gt;= 2.0 are no longer accepted by default (rare, only HTTP/1.1 is supported)</li> <li>HTTP versions consisting of multiple digits or containing a prefix/suffix are no longer accepted</li> <li>HTTP header field names Gunicorn cannot safely map to variables are silently dropped, as in other software</li> <li>HTTP headers with empty field name are refused by default (no legitimate use cases, used in exploits)</li> <li>requests with both Transfer-Encoding and Content-Length are refused by default (such a message might indicate an attempt to perform request smuggling)</li> <li>empty transfer codings are no longer permitted (reportedly seen with really old &amp; broken proxies)</li> </ul>"},{"location":"news/#security_1","title":"Security","text":"<ul> <li>fix CVE-2024-1135</li> </ul>"},{"location":"news/#history","title":"History","text":"<ul> <li>2026</li> <li>2024</li> <li>2023</li> <li>2021</li> <li>2020</li> <li>2019</li> <li>2018</li> <li>2017</li> <li>2016</li> <li>2015</li> <li>2014</li> <li>2013</li> <li>2012</li> <li>2011</li> <li>2010</li> </ul>"},{"location":"quickstart/","title":"Quickstart","text":"<p>Get a Python web application running with Gunicorn in 5 minutes.</p>"},{"location":"quickstart/#install","title":"Install","text":"<pre><code>pip install gunicorn\n</code></pre>"},{"location":"quickstart/#create-an-application","title":"Create an Application","text":"<p>Create <code>app.py</code>:</p> FlaskFastAPIDjangoPlain WSGI <pre><code>from flask import Flask\n\napp = Flask(__name__)\n\n@app.route(\"/\")\ndef hello():\n    return \"Hello, World!\"\n</code></pre> <pre><code>from fastapi import FastAPI\n\napp = FastAPI()\n\n@app.get(\"/\")\ndef hello():\n    return {\"message\": \"Hello, World!\"}\n</code></pre> <p>Django projects already have a WSGI application at <code>myproject/wsgi.py</code>. No additional code is needed.</p> <pre><code>def app(environ, start_response):\n    data = b\"Hello, World!\"\n    start_response(\"200 OK\", [\n        (\"Content-Type\", \"text/plain\"),\n        (\"Content-Length\", str(len(data)))\n    ])\n    return [data]\n</code></pre>"},{"location":"quickstart/#run","title":"Run","text":"<pre><code>gunicorn app:app\n</code></pre> <p>For Django:</p> <pre><code>gunicorn myproject.wsgi\n</code></pre> <p>For FastAPI (ASGI):</p> <pre><code>gunicorn app:app --worker-class asgi\n</code></pre>"},{"location":"quickstart/#add-workers","title":"Add Workers","text":"<p>Use multiple workers to handle concurrent requests:</p> <pre><code>gunicorn app:app --workers 4\n</code></pre> <p>A good starting point is <code>2 * CPU_CORES + 1</code> workers.</p>"},{"location":"quickstart/#bind-to-a-port","title":"Bind to a Port","text":"<p>By default Gunicorn binds to <code>127.0.0.1:8000</code>. Change it with:</p> <pre><code>gunicorn app:app --bind 0.0.0.0:8080\n</code></pre>"},{"location":"quickstart/#configuration-file","title":"Configuration File","text":"<p>Create <code>gunicorn.conf.py</code> for reusable settings:</p> <pre><code>bind = \"0.0.0.0:8000\"\nworkers = 4\naccesslog = \"-\"\n</code></pre> <p>Then run:</p> <pre><code>gunicorn app:app\n</code></pre> <p>Gunicorn automatically loads <code>gunicorn.conf.py</code> from the current directory.</p>"},{"location":"quickstart/#next-steps","title":"Next Steps","text":"<ul> <li>Run - Full CLI reference and framework integration</li> <li>Configure - Configuration file options</li> <li>Deploy - Production deployment with nginx and process managers</li> <li>Settings - Complete settings reference</li> </ul>"},{"location":"run/","title":"Running Gunicorn","text":"<p>You can run Gunicorn directly from the command line or integrate it with popular frameworks like Django, Pyramid, or TurboGears. For deployment patterns see the deployment guide.</p>"},{"location":"run/#commands","title":"Commands","text":"<p>After installation you have access to the <code>gunicorn</code> executable.</p> <p></p>"},{"location":"run/#gunicorn","title":"<code>gunicorn</code>","text":"<p>Basic usage:</p> <pre><code>gunicorn [OPTIONS] [WSGI_APP]\n</code></pre> <p><code>WSGI_APP</code> follows the pattern <code>MODULE_NAME:VARIABLE_NAME</code>. The module can be a full dotted path. The variable refers to a WSGI callable defined in that module.</p> <p>Changed in 20.1.0</p> <p><code>WSGI_APP</code> can be omitted when defined in a configuration file.</p> <p>Example test application:</p> <pre><code>def app(environ, start_response):\n    \"\"\"Simplest possible application object\"\"\"\n    data = b\"Hello, World!\\n\"\n    status = \"200 OK\"\n    response_headers = [\n        (\"Content-type\", \"text/plain\"),\n        (\"Content-Length\", str(len(data.md)))\n    ]\n    start_response(status, response_headers)\n    return iter([data])\n</code></pre> <p>Run it with:</p> <pre><code>gunicorn --workers=2 test:app\n</code></pre> <p>You can also expose a factory function that returns the application:</p> <pre><code>def create_app():\n    app = FrameworkApp()\n    ...\n    return app\n</code></pre> <pre><code>gunicorn --workers=2 'test:create_app()'\n</code></pre> <p>Passing positional and keyword arguments is supported but prefer configuration files or environment variables for anything beyond quick tests.</p>"},{"location":"run/#commonly-used-arguments","title":"Commonly used arguments","text":"<ul> <li><code>-c CONFIG</code>, <code>--config CONFIG</code> \u2014 configuration file (<code>PATH</code>, <code>file:PATH</code>, or   <code>python:MODULE_NAME</code>).</li> <li><code>-b BIND</code>, <code>--bind BIND</code> \u2014 socket to bind (host, host:port, <code>fd://FD</code>,   or <code>unix:PATH</code>).</li> <li><code>-w WORKERS</code>, <code>--workers WORKERS</code> \u2014 number of worker processes, typically   two to four per CPU core. See the FAQ for tuning tips.</li> <li><code>-k WORKERCLASS</code>, <code>--worker-class WORKERCLASS</code> \u2014 worker type (<code>sync</code>,   <code>gevent</code>, <code>tornado</code>, <code>gthread</code>). Read the   settings entry before switching classes.</li> <li><code>-n APP_NAME</code>, <code>--name APP_NAME</code> \u2014 set the process name (requires   <code>setproctitle</code>).</li> </ul> <p>You can pass any setting via the environment variable <code>GUNICORN_CMD_ARGS</code>. See the configuration guide and settings reference for details.</p>"},{"location":"run/#integration","title":"Integration","text":"<p>Gunicorn integrates cleanly with Django and Paste Deploy applications.</p>"},{"location":"run/#django","title":"Django","text":"<p>Gunicorn looks for a WSGI callable named <code>application</code>. A typical invocation is:</p> <pre><code>gunicorn myproject.wsgi\n</code></pre> <p>Note</p> <p>Ensure your project is on <code>PYTHONPATH</code>. The easiest way is to run this command from the directory containing <code>manage.py</code>.</p> <p>Set environment variables with <code>--env</code> and add your project to <code>PYTHONPATH</code> if needed:</p> <pre><code>gunicorn --env DJANGO_SETTINGS_MODULE=myproject.settings myproject.wsgi\n</code></pre> <p>See <code>raw_env</code> and <code>pythonpath</code> for more options.</p>"},{"location":"run/#paste-deployment","title":"Paste Deployment","text":"<p>Frameworks such as Pyramid and TurboGears often rely on Paste Deployment configuration. You can use Gunicorn in two ways.</p>"},{"location":"run/#as-a-paste-server-runner","title":"As a Paste server runner","text":"<p>Let your framework command (for example <code>pserve</code> or <code>gearbox</code>) load Gunicorn by configuring it as the server:</p> <pre><code>[server:main]\nuse = egg:gunicorn#main\nhost = 127.0.0.1\nport = 8080\nworkers = 3\n</code></pre> <p>This approach is quick to set up but Gunicorn cannot control how the application loads. Options like <code>reload</code> will be ignored and hot upgrades are unavailable. Features such as daemon mode may conflict with what your framework already provides. Prefer running those features through the framework (for example <code>pserve --reload</code>). Advanced configuration is still possible by pointing the <code>config</code> key at a Gunicorn configuration file.</p>"},{"location":"run/#using-gunicorns-paste-support","title":"Using Gunicorn's Paste support","text":"<p>Use the <code>paste</code> option to load a Paste configuration directly with the Gunicorn CLI. This unlocks Gunicorn's reloader and hot code upgrades, while still letting Paste define the application object.</p> <pre><code>gunicorn --paste development.ini -b :8080 --chdir /path/to/project\n</code></pre> <p>Select a different application section by appending the name:</p> <pre><code>gunicorn --paste development.ini#admin -b :8080 --chdir /path/to/project\n</code></pre> <p>In both modes Gunicorn will honor any Paste <code>loggers</code> configuration unless you override it with Gunicorn-specific logging settings.</p>"},{"location":"signals/","title":"Signals","text":""},{"location":"signals/#signal-handling","title":"Signal Handling","text":"<p>A quick reference to the signals handled by Gunicorn. This includes the signals used internally to coordinate with worker processes.</p>"},{"location":"signals/#master-process","title":"Master process","text":"<ul> <li><code>QUIT</code>, <code>INT</code> \u2014 quick shutdown.</li> <li><code>TERM</code> \u2014 graceful shutdown; waits for workers to finish requests up to   <code>graceful_timeout</code>.</li> <li><code>HUP</code> \u2014 reload configuration, spawn new workers, and gracefully stop old   ones. If the app is not preloaded (see <code>preload_app</code>)   the application code is reloaded too.</li> <li><code>TTIN</code> \u2014 increase worker count by one.</li> <li><code>TTOU</code> \u2014 decrease worker count by one.</li> <li><code>USR1</code> \u2014 reopen log files.</li> <li><code>USR2</code> \u2014 perform a binary upgrade. Send <code>TERM</code> to the old master afterwards   to stop it. This also reloads preloaded applications (see   binary upgrades).</li> <li><code>WINCH</code> \u2014 gracefully stop workers when Gunicorn runs as a daemon.</li> </ul>"},{"location":"signals/#worker-process","title":"Worker process","text":"<p>Workers rarely need direct signalling\u2014if the master stays alive it will respawn workers automatically.</p> <ul> <li><code>QUIT</code>, <code>INT</code> \u2014 quick shutdown.</li> <li><code>TERM</code> \u2014 graceful shutdown.</li> <li><code>USR1</code> \u2014 reopen log files.</li> </ul>"},{"location":"signals/#reload-the-configuration","title":"Reload the configuration","text":"<p>Use <code>HUP</code> to reload Gunicorn on the fly:</p> <pre><code>2013-06-29 06:26:55 [20682] [INFO] Handling signal: hup\n2013-06-29 06:26:55 [20682] [INFO] Hang up: Master\n2013-06-29 06:26:55 [20703] [INFO] Booting worker with pid: 20703\n2013-06-29 06:26:55 [20702] [INFO] Booting worker with pid: 20702\n2013-06-29 06:26:55 [20688] [INFO] Worker exiting (pid: 20688)\n2013-06-29 06:26:55 [20687] [INFO] Worker exiting (pid: 20687)\n2013-06-29 06:26:55 [20689] [INFO] Worker exiting (pid: 20689)\n2013-06-29 06:26:55 [20704] [INFO] Booting worker with pid: 20704\n</code></pre> <p>Gunicorn reloads its settings, starts new workers, and gracefully shuts down the previous ones. If the app is not preloaded it reloads the application module as well.</p> <p></p>"},{"location":"signals/#upgrading-to-a-new-binary-on-the-fly","title":"Upgrading to a new binary on the fly","text":"<p>Changed in 19.6.0</p> <p>PID files now follow the pattern <code>&lt;name&gt;.pid.2</code> instead of <code>&lt;name&gt;.pid.oldbin</code>.</p> <p>You can replace the Gunicorn binary without downtime. Incoming requests remain served and preloaded applications reload.</p> <ol> <li>Replace the old binary and send <code>USR2</code> to the master. Gunicorn starts a new    master whose PID file ends with <code>.2</code> and spawns new workers.</li> </ol> <pre><code>PID USER      PR  NI  VIRT  RES  SHR S  %CPU %MEM    TIME+  COMMAND\n20844 benoitc   20   0 54808  11m 3352 S   0.0  0.1   0:00.36 gunicorn: master [test:app]\n20849 benoitc   20   0 54808 9.9m 1500 S   0.0  0.1   0:00.02 gunicorn: worker [test:app]\n20850 benoitc   20   0 54808 9.9m 1500 S   0.0  0.1   0:00.01 gunicorn: worker [test:app]\n20851 benoitc   20   0 54808 9.9m 1500 S   0.0  0.1   0:00.01 gunicorn: worker [test:app]\n20854 benoitc   20   0 55748  12m 3348 S   0.0  0.2   0:00.35 gunicorn: master [test:app]\n20859 benoitc   20   0 55748  11m 1500 S   0.0  0.1   0:00.01 gunicorn: worker [test:app]\n20860 benoitc   20   0 55748  11m 1500 S   0.0  0.1   0:00.00 gunicorn: worker [test:app]\n20861 benoitc   20   0 55748  11m 1500 S   0.0  0.1   0:00.01 gunicorn: worker [test:app]\n</code></pre> <ol> <li>Send <code>WINCH</code> to the old master to gracefully stop its workers.</li> </ol> <p>You can still roll back while the old master keeps its listen sockets:</p> <ol> <li>Send <code>HUP</code> to the old master to restart its workers without reloading the    config file.</li> <li>Send <code>TERM</code> to the new master to shut down its workers gracefully.</li> <li>Send <code>QUIT</code> to the new master to force it to exit.</li> </ol> <p>If the new workers linger, send <code>KILL</code> after the new master quits.</p> <p>To complete the upgrade, send <code>TERM</code> to the old master so only the new server continues running:</p> <pre><code>PID USER      PR  NI  VIRT  RES  SHR S  %CPU %MEM    TIME+  COMMAND\n20854 benoitc   20   0 55748  12m 3348 S   0.0  0.2   0:00.45 gunicorn: master [test:app]\n20859 benoitc   20   0 55748  11m 1500 S   0.0  0.1   0:00.02 gunicorn: worker [test:app]\n20860 benoitc   20   0 55748  11m 1500 S   0.0  0.1   0:00.02 gunicorn: worker [test:app]\n20861 benoitc   20   0 55748  11m 1500 S   0.0  0.1   0:00.01 gunicorn: worker [test:app]\n</code></pre>"},{"location":"uwsgi/","title":"uWSGI Protocol","text":"<p>Gunicorn supports the uWSGI binary protocol, allowing it to receive requests from nginx using the <code>uwsgi_pass</code> directive. This provides efficient communication between nginx and Gunicorn without HTTP overhead.</p> <p>Both WSGI and ASGI workers support the uWSGI protocol.</p> <p>Note</p> <p>This is the uWSGI binary protocol, not the uWSGI server. Gunicorn implements the protocol to receive requests from nginx, similar to how the uWSGI server would.</p>"},{"location":"uwsgi/#quick-start","title":"Quick Start","text":"<p>Enable uWSGI protocol support:</p> <pre><code># WSGI application\ngunicorn myapp:app --protocol uwsgi --bind 127.0.0.1:8000\n\n# ASGI application\ngunicorn myapp:app --worker-class asgi --protocol uwsgi --bind 127.0.0.1:8000\n</code></pre> <p>Configure nginx to forward requests:</p> <pre><code>upstream gunicorn {\n    server 127.0.0.1:8000;\n}\n\nserver {\n    listen 80;\n    server_name example.com;\n\n    location / {\n        uwsgi_pass gunicorn;\n        include uwsgi_params;\n    }\n}\n</code></pre>"},{"location":"uwsgi/#why-use-uwsgi-protocol","title":"Why Use uWSGI Protocol?","text":"<p>The uWSGI binary protocol offers several advantages over HTTP proxying:</p> <ul> <li>Lower overhead - Binary format is more compact than HTTP headers</li> <li>Better integration - nginx's native uwsgi module is highly optimized</li> <li>Simpler configuration - No need to reconstruct HTTP headers</li> </ul>"},{"location":"uwsgi/#configuration","title":"Configuration","text":""},{"location":"uwsgi/#protocol-setting","title":"Protocol Setting","text":"<p>Switch from HTTP to uWSGI protocol:</p> <pre><code>gunicorn myapp:app --protocol uwsgi\n</code></pre> <p>Or in a configuration file:</p> <pre><code># gunicorn.conf.py\nprotocol = \"uwsgi\"\n</code></pre>"},{"location":"uwsgi/#allowed-ips","title":"Allowed IPs","text":"<p>By default, uWSGI protocol requests are only accepted from localhost (<code>127.0.0.1</code> and <code>::1</code>). This prevents unauthorized hosts from sending requests directly to Gunicorn.</p> <p>To allow additional IPs:</p> <pre><code>gunicorn myapp:app --protocol uwsgi --uwsgi-allow-from 10.0.0.1,10.0.0.2\n</code></pre> <p>To allow all IPs (not recommended for production):</p> <pre><code>gunicorn myapp:app --protocol uwsgi --uwsgi-allow-from '*'\n</code></pre> <p>Warning</p> <p>Only allow IPs from trusted sources. The uWSGI protocol does not provide authentication, so anyone who can connect can send requests.</p> <p>Note</p> <p>UNIX socket connections are always allowed regardless of this setting.</p>"},{"location":"uwsgi/#using-unix-sockets","title":"Using UNIX Sockets","text":"<p>For better performance and security, use UNIX sockets instead of TCP:</p> <pre><code>gunicorn myapp:app --protocol uwsgi --bind unix:/run/gunicorn.sock\n</code></pre> <p>Nginx configuration:</p> <pre><code>upstream gunicorn {\n    server unix:/run/gunicorn.sock;\n}\n\nserver {\n    listen 80;\n\n    location / {\n        uwsgi_pass gunicorn;\n        include uwsgi_params;\n    }\n}\n</code></pre>"},{"location":"uwsgi/#nginx-configuration","title":"Nginx Configuration","text":""},{"location":"uwsgi/#basic-setup","title":"Basic Setup","text":"<p>Create or verify the <code>uwsgi_params</code> file exists (usually at <code>/etc/nginx/uwsgi_params</code>):</p> <pre><code>uwsgi_param  QUERY_STRING       $query_string;\nuwsgi_param  REQUEST_METHOD     $request_method;\nuwsgi_param  CONTENT_TYPE       $content_type;\nuwsgi_param  CONTENT_LENGTH     $content_length;\n\nuwsgi_param  REQUEST_URI        $request_uri;\nuwsgi_param  PATH_INFO          $document_uri;\nuwsgi_param  DOCUMENT_ROOT      $document_root;\nuwsgi_param  SERVER_PROTOCOL    $server_protocol;\nuwsgi_param  REQUEST_SCHEME     $scheme;\nuwsgi_param  HTTPS              $https if_not_empty;\n\nuwsgi_param  REMOTE_ADDR        $remote_addr;\nuwsgi_param  REMOTE_PORT        $remote_port;\nuwsgi_param  SERVER_PORT        $server_port;\nuwsgi_param  SERVER_NAME        $server_name;\n</code></pre>"},{"location":"uwsgi/#with-ssl-termination","title":"With SSL Termination","text":"<p>When nginx handles SSL and forwards to Gunicorn:</p> <pre><code>server {\n    listen 443 ssl;\n    server_name example.com;\n\n    ssl_certificate /path/to/cert.pem;\n    ssl_certificate_key /path/to/key.pem;\n\n    location / {\n        uwsgi_pass gunicorn;\n        include uwsgi_params;\n        uwsgi_param HTTPS on;\n    }\n}\n</code></pre>"},{"location":"uwsgi/#load-balancing","title":"Load Balancing","text":"<p>Distribute requests across multiple Gunicorn instances:</p> <pre><code>upstream gunicorn {\n    least_conn;\n    server 127.0.0.1:8000;\n    server 127.0.0.1:8001;\n    server 127.0.0.1:8002;\n}\n\nserver {\n    listen 80;\n\n    location / {\n        uwsgi_pass gunicorn;\n        include uwsgi_params;\n    }\n}\n</code></pre>"},{"location":"uwsgi/#static-files","title":"Static Files","text":"<p>Serve static files directly from nginx:</p> <pre><code>server {\n    listen 80;\n\n    location /static/ {\n        alias /path/to/static/;\n    }\n\n    location / {\n        uwsgi_pass gunicorn;\n        include uwsgi_params;\n    }\n}\n</code></pre>"},{"location":"uwsgi/#protocol-details","title":"Protocol Details","text":"<p>The uWSGI protocol uses a compact binary format:</p> Bytes Field Description 0 modifier1 Packet type (0 = WSGI request) 1-2 datasize Size of vars block (little-endian) 3 modifier2 Additional flags (usually 0) <p>After the header, the vars block contains CGI-style key-value pairs:</p> <pre><code>[2-byte key_size][key][2-byte val_size][value]...\n</code></pre> <p>Standard CGI variables like <code>REQUEST_METHOD</code>, <code>PATH_INFO</code>, and <code>QUERY_STRING</code> are extracted from this block to construct the WSGI environ.</p>"},{"location":"uwsgi/#combining-with-http","title":"Combining with HTTP","text":"<p>You can run Gunicorn with both HTTP and uWSGI protocol support by running separate instances:</p> <pre><code># HTTP for direct access\ngunicorn myapp:app --bind 127.0.0.1:8080\n\n# uWSGI for nginx\ngunicorn myapp:app --protocol uwsgi --bind 127.0.0.1:8000\n</code></pre>"},{"location":"uwsgi/#troubleshooting","title":"Troubleshooting","text":""},{"location":"uwsgi/#forbiddenuwsgirequest-error","title":"ForbiddenUWSGIRequest Error","text":"<p>If you see \"Forbidden uWSGI request from IP\", the connecting IP is not in the allowed list. Either:</p> <ol> <li>Add the IP to <code>--uwsgi-allow-from</code></li> <li>Use UNIX sockets instead</li> <li>Ensure nginx is connecting from an allowed IP</li> </ol>"},{"location":"uwsgi/#invalid-uwsgi-header","title":"Invalid uWSGI Header","text":"<p>This usually means:</p> <ol> <li>HTTP traffic is being sent to a uWSGI endpoint</li> <li>The packet is malformed or truncated</li> <li>Network issues caused data corruption</li> </ol> <p>Verify that nginx is using <code>uwsgi_pass</code> (not <code>proxy_pass</code>) and that the <code>uwsgi_params</code> file is being included.</p>"},{"location":"uwsgi/#headers-missing","title":"Headers Missing","text":"<p>If certain headers aren't reaching your application, verify they're included in <code>uwsgi_params</code>. Custom headers should be passed as:</p> <pre><code>uwsgi_param HTTP_X_CUSTOM_HEADER $http_x_custom_header;\n</code></pre>"},{"location":"uwsgi/#see-also","title":"See Also","text":"<ul> <li>Settings Reference - Protocol and uWSGI settings</li> <li>Deploy - General deployment guidance</li> <li>Design - Worker architecture overview</li> </ul>"},{"location":"guides/docker/","title":"Docker Deployment","text":"<p>Running Gunicorn in Docker containers is the most common deployment pattern for modern Python applications. This guide covers best practices for containerizing Gunicorn applications.</p>"},{"location":"guides/docker/#official-docker-image","title":"Official Docker Image","text":"<p>Gunicorn provides an official Docker image on GitHub Container Registry:</p> <pre><code>docker pull ghcr.io/benoitc/gunicorn:latest\n</code></pre>"},{"location":"guides/docker/#quick-start","title":"Quick Start","text":"<p>Mount your application directory and run:</p> <pre><code>docker run -p 8000:8000 -v $(pwd):/app ghcr.io/benoitc/gunicorn app:app\n</code></pre>"},{"location":"guides/docker/#running-in-background","title":"Running in Background","text":"<p>Use <code>-d</code> (detached mode) to run the container in the background:</p> <pre><code># Start in background\ndocker run -d --name myapp -p 8000:8000 -v $(pwd):/app ghcr.io/benoitc/gunicorn app:app\n\n# View logs\ndocker logs myapp\n\n# Follow logs in real-time\ndocker logs -f myapp\n\n# Stop the container\ndocker stop myapp\n\n# Start it again\ndocker start myapp\n\n# Remove the container\ndocker rm myapp\n</code></pre>"},{"location":"guides/docker/#environment-variables","title":"Environment Variables","text":"Variable Description Default <code>GUNICORN_BIND</code> Full bind address <code>0.0.0.0:8000</code> <code>GUNICORN_HOST</code> Bind host <code>0.0.0.0</code> <code>GUNICORN_PORT</code> Bind port <code>8000</code> <code>GUNICORN_WORKERS</code> Number of workers <code>(2 * CPU) + 1</code> <code>GUNICORN_ARGS</code> Additional arguments (none)"},{"location":"guides/docker/#with-configuration","title":"With Configuration","text":"<pre><code>docker run -p 9000:9000 -v $(pwd):/app \\\n  -e GUNICORN_PORT=9000 \\\n  -e GUNICORN_WORKERS=4 \\\n  -e GUNICORN_ARGS=\"--timeout 120 --access-logfile -\" \\\n  ghcr.io/benoitc/gunicorn app:app\n</code></pre>"},{"location":"guides/docker/#as-base-image-recommended-for-production","title":"As Base Image (Recommended for Production)","text":"<pre><code>FROM ghcr.io/benoitc/gunicorn:24.1.0\n\n# Install app dependencies\nCOPY requirements.txt .\nRUN pip install --no-cache-dir -r requirements.txt\n\n# Copy application\nCOPY --chown=gunicorn:gunicorn . .\n\nCMD [\"myapp:app\", \"--workers\", \"4\"]\n</code></pre>"},{"location":"guides/docker/#with-docker-compose","title":"With Docker Compose","text":"<pre><code>services:\n  web:\n    image: ghcr.io/benoitc/gunicorn:latest\n    ports:\n      - \"8000:8000\"\n    volumes:\n      - ./app:/app\n    command: [\"myapp:app\", \"--workers\", \"4\"]\n</code></pre>"},{"location":"guides/docker/#available-tags","title":"Available Tags","text":"<ul> <li><code>ghcr.io/benoitc/gunicorn:latest</code> - Latest release</li> <li><code>ghcr.io/benoitc/gunicorn:24.1.0</code> - Specific version</li> <li><code>ghcr.io/benoitc/gunicorn:24.1</code> - Minor version</li> <li><code>ghcr.io/benoitc/gunicorn:24</code> - Major version</li> </ul>"},{"location":"guides/docker/#building-your-own-image","title":"Building Your Own Image","text":"<p>For more control, build a custom image using the patterns below.</p>"},{"location":"guides/docker/#basic-dockerfile","title":"Basic Dockerfile","text":"<pre><code>FROM python:3.12-slim\n\nWORKDIR /app\n\n# Install dependencies\nCOPY requirements.txt .\nRUN pip install --no-cache-dir -r requirements.txt\n\n# Copy application\nCOPY . .\n\n# Run gunicorn\nCMD [\"gunicorn\", \"app:app\", \"--bind\", \"0.0.0.0:8000\"]\n</code></pre> <p>Build and run:</p> <pre><code>docker build -t myapp .\ndocker run -p 8000:8000 myapp\n</code></pre>"},{"location":"guides/docker/#production-configuration","title":"Production Configuration","text":""},{"location":"guides/docker/#environment-variables_1","title":"Environment Variables","text":"<p>Use environment variables for configuration:</p> <pre><code>FROM python:3.12-slim\n\nWORKDIR /app\n\nCOPY requirements.txt .\nRUN pip install --no-cache-dir -r requirements.txt\n\nCOPY . .\n\n# Configuration via environment\nENV GUNICORN_WORKERS=4\nENV GUNICORN_BIND=0.0.0.0:8000\n\nCMD gunicorn app:app \\\n    --workers ${GUNICORN_WORKERS} \\\n    --bind ${GUNICORN_BIND}\n</code></pre> <p>Or use <code>GUNICORN_CMD_ARGS</code>:</p> <pre><code>ENV GUNICORN_CMD_ARGS=\"--workers=4 --bind=0.0.0.0:8000\"\nCMD [\"gunicorn\", \"app:app\"]\n</code></pre>"},{"location":"guides/docker/#worker-count","title":"Worker Count","text":"<p>In containers, determine workers based on available CPU:</p> <pre><code># gunicorn.conf.py\nimport multiprocessing\n\nworkers = multiprocessing.cpu_count() * 2 + 1\nbind = \"0.0.0.0:8000\"\n</code></pre> <p>Or let Kubernetes/Docker limit CPU and calculate accordingly:</p> <pre><code># At runtime\ngunicorn app:app --workers $(( 2 * $(nproc) + 1 ))\n</code></pre>"},{"location":"guides/docker/#non-root-user","title":"Non-Root User","text":"<p>Run as a non-root user for security:</p> <pre><code>FROM python:3.12-slim\n\n# Create non-root user\nRUN useradd --create-home appuser\nWORKDIR /home/appuser/app\n\nCOPY requirements.txt .\nRUN pip install --no-cache-dir -r requirements.txt\n\nCOPY --chown=appuser:appuser . .\n\nUSER appuser\n\nCMD [\"gunicorn\", \"app:app\", \"--bind\", \"0.0.0.0:8000\"]\n</code></pre>"},{"location":"guides/docker/#health-checks","title":"Health Checks","text":"<p>Add a health check endpoint and Docker health check:</p> <pre><code>HEALTHCHECK --interval=30s --timeout=10s --start-period=5s --retries=3 \\\n    CMD curl -f http://localhost:8000/health || exit 1\n</code></pre>"},{"location":"guides/docker/#multi-stage-build","title":"Multi-Stage Build","text":"<p>Reduce image size with multi-stage builds:</p> <pre><code># Build stage\nFROM python:3.12 AS builder\n\nWORKDIR /app\nCOPY requirements.txt .\nRUN pip wheel --no-cache-dir --wheel-dir /wheels -r requirements.txt\n\n# Runtime stage\nFROM python:3.12-slim\n\nWORKDIR /app\n\n# Copy wheels and install\nCOPY --from=builder /wheels /wheels\nRUN pip install --no-cache-dir /wheels/* &amp;&amp; rm -rf /wheels\n\nCOPY . .\n\nCMD [\"gunicorn\", \"app:app\", \"--bind\", \"0.0.0.0:8000\", \"--workers\", \"4\"]\n</code></pre>"},{"location":"guides/docker/#docker-compose","title":"Docker Compose","text":"<p>Example <code>docker-compose.yml</code>:</p> <pre><code>services:\n  web:\n    build: .\n    ports:\n      - \"8000:8000\"\n    environment:\n      - DATABASE_URL=postgres://db:5432/myapp\n    depends_on:\n      - db\n    deploy:\n      resources:\n        limits:\n          cpus: '2'\n          memory: 512M\n\n  db:\n    image: postgres:15\n    environment:\n      - POSTGRES_DB=myapp\n      - POSTGRES_PASSWORD=secret\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n\n  nginx:\n    image: nginx:alpine\n    ports:\n      - \"80:80\"\n    volumes:\n      - ./nginx.conf:/etc/nginx/nginx.conf:ro\n    depends_on:\n      - web\n\nvolumes:\n  postgres_data:\n</code></pre>"},{"location":"guides/docker/#kubernetes-deployment","title":"Kubernetes Deployment","text":"<p>Example Kubernetes deployment:</p> <pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: myapp\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: myapp\n  template:\n    metadata:\n      labels:\n        app: myapp\n    spec:\n      containers:\n      - name: myapp\n        image: myapp:latest\n        ports:\n        - containerPort: 8000\n        env:\n        - name: GUNICORN_WORKERS\n          value: \"4\"\n        resources:\n          limits:\n            cpu: \"1\"\n            memory: \"512Mi\"\n          requests:\n            cpu: \"500m\"\n            memory: \"256Mi\"\n        livenessProbe:\n          httpGet:\n            path: /health\n            port: 8000\n          initialDelaySeconds: 10\n          periodSeconds: 10\n        readinessProbe:\n          httpGet:\n            path: /health\n            port: 8000\n          initialDelaySeconds: 5\n          periodSeconds: 5\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: myapp\nspec:\n  selector:\n    app: myapp\n  ports:\n  - port: 80\n    targetPort: 8000\n</code></pre>"},{"location":"guides/docker/#graceful-shutdown","title":"Graceful Shutdown","text":"<p>Gunicorn handles <code>SIGTERM</code> gracefully by default. Configure the timeout:</p> <pre><code>CMD [\"gunicorn\", \"app:app\", \\\n     \"--bind\", \"0.0.0.0:8000\", \\\n     \"--graceful-timeout\", \"30\", \\\n     \"--timeout\", \"120\"]\n</code></pre> <p>Match Docker's stop timeout:</p> <pre><code># docker-compose.yml\nservices:\n  web:\n    stop_grace_period: 30s\n</code></pre>"},{"location":"guides/docker/#logging","title":"Logging","text":"<p>Log to stdout/stderr for Docker log collection:</p> <pre><code># gunicorn.conf.py\naccesslog = \"-\"\nerrorlog = \"-\"\nloglevel = \"info\"\n</code></pre> <p>Use JSON logging for log aggregation:</p> <pre><code># gunicorn.conf.py\nimport json\nimport datetime\n\nclass JsonFormatter:\n    def format(self, record):\n        return json.dumps({\n            \"timestamp\": datetime.datetime.utcnow().isoformat(),\n            \"level\": record.levelname,\n            \"message\": record.getMessage(),\n        })\n\nlogconfig_dict = {\n    \"version\": 1,\n    \"formatters\": {\n        \"json\": {\"()\": JsonFormatter}\n    },\n    \"handlers\": {\n        \"console\": {\n            \"class\": \"logging.StreamHandler\",\n            \"formatter\": \"json\",\n            \"stream\": \"ext://sys.stdout\"\n        }\n    },\n    \"root\": {\n        \"handlers\": [\"console\"],\n        \"level\": \"INFO\"\n    }\n}\n</code></pre>"},{"location":"guides/docker/#troubleshooting","title":"Troubleshooting","text":""},{"location":"guides/docker/#worker-timeout","title":"Worker Timeout","text":"<p>If workers are killed with <code>[CRITICAL] WORKER TIMEOUT</code>, increase the timeout:</p> <pre><code>gunicorn app:app --timeout 120\n</code></pre> <p>Or investigate slow requests in your application.</p>"},{"location":"guides/docker/#out-of-memory","title":"Out of Memory","text":"<p>If containers are OOM-killed:</p> <ol> <li>Reduce worker count</li> <li>Use <code>--max-requests</code> to restart workers periodically</li> <li>Increase container memory limits</li> </ol> <pre><code>gunicorn app:app --workers 2 --max-requests 1000 --max-requests-jitter 100\n</code></pre>"},{"location":"guides/docker/#connection-reset","title":"Connection Reset","text":"<p>If you see connection resets, ensure:</p> <ol> <li>Load balancer health checks match your <code>/health</code> endpoint</li> <li>Graceful timeout is sufficient for in-flight requests</li> <li>Keepalive settings match between Gunicorn and upstream proxy</li> </ol>"},{"location":"guides/docker/#see-also","title":"See Also","text":"<ul> <li>Deploy - General deployment patterns</li> <li>Settings - All configuration options</li> </ul>"},{"location":"guides/http2/","title":"HTTP/2 Support","text":"<p>Beta Feature</p> <p>HTTP/2 support is a beta feature introduced in Gunicorn 25.0.0. While it has been tested, the API and behavior may change in future releases. Please report any issues on GitHub.</p> <p>Gunicorn supports HTTP/2 (RFC 7540) for improved performance with modern clients. HTTP/2 provides multiplexed streams, header compression, and other optimizations over HTTP/1.1.</p>"},{"location":"guides/http2/#quick-start","title":"Quick Start","text":"<pre><code># Install gunicorn with HTTP/2 support\npip install gunicorn[http2]\n\n# Run with HTTP/2 enabled (requires SSL)\ngunicorn myapp:app \\\n    --worker-class gthread \\\n    --threads 4 \\\n    --certfile server.crt \\\n    --keyfile server.key \\\n    --http-protocols h2,h1\n</code></pre>"},{"location":"guides/http2/#requirements","title":"Requirements","text":"<p>HTTP/2 support requires:</p> <ul> <li>SSL/TLS: HTTP/2 uses ALPN (Application-Layer Protocol Negotiation) which   requires an encrypted connection</li> <li>h2 library: Install with <code>pip install gunicorn[http2]</code> or <code>pip install h2</code></li> <li>Compatible worker: gthread, gevent, or ASGI workers</li> </ul>"},{"location":"guides/http2/#configuration","title":"Configuration","text":""},{"location":"guides/http2/#enable-http2","title":"Enable HTTP/2","text":"<p>Enable HTTP/2 by setting the <code>--http-protocols</code> option:</p> <pre><code>gunicorn myapp:app --http-protocols h2,h1\n</code></pre> <p>Or in a configuration file:</p> <pre><code># gunicorn.conf.py\nhttp_protocols = [\"h2\", \"h1\"]\n</code></pre> <p>The order matters for ALPN negotiation - protocols are tried in order of preference.</p> Protocol Description <code>h2</code> HTTP/2 over TLS <code>h1</code> HTTP/1.1 (fallback) <p>Note</p> <p>Always include <code>h1</code> as a fallback for clients that don't support HTTP/2.</p>"},{"location":"guides/http2/#ssltls-configuration","title":"SSL/TLS Configuration","text":"<p>HTTP/2 requires SSL/TLS. Configure certificates:</p> <pre><code>gunicorn myapp:app \\\n    --certfile /path/to/server.crt \\\n    --keyfile /path/to/server.key \\\n    --http-protocols h2,h1\n</code></pre> <p>Or in a configuration file:</p> <pre><code># gunicorn.conf.py\ncertfile = \"/path/to/server.crt\"\nkeyfile = \"/path/to/server.key\"\nhttp_protocols = [\"h2\", \"h1\"]\n</code></pre>"},{"location":"guides/http2/#http2-settings","title":"HTTP/2 Settings","text":"<p>Fine-tune HTTP/2 behavior with these settings:</p> Setting Default Description <code>http2_max_concurrent_streams</code> 100 Maximum concurrent streams per connection <code>http2_initial_window_size</code> 65535 Initial flow control window size (bytes) <code>http2_max_frame_size</code> 16384 Maximum frame size (bytes) <code>http2_max_header_list_size</code> 65536 Maximum header list size (bytes) <p>Example configuration:</p> <pre><code># gunicorn.conf.py\nhttp_protocols = [\"h2\", \"h1\"]\nhttp2_max_concurrent_streams = 200\nhttp2_initial_window_size = 1048576  # 1MB\n</code></pre>"},{"location":"guides/http2/#worker-compatibility","title":"Worker Compatibility","text":"<p>Not all workers support HTTP/2:</p> Worker HTTP/2 Support Notes <code>sync</code> No Single-threaded, cannot multiplex streams <code>gthread</code> Yes Recommended for HTTP/2 <code>gevent</code> Yes Requires gevent <code>eventlet</code> Yes Deprecated - will be removed in 26.0 <code>asgi</code> Yes For async frameworks <code>tornado</code> No Tornado handles its own protocol <p>If you use the sync or tornado worker with HTTP/2 enabled, Gunicorn will log a warning and fall back to HTTP/1.1.</p>"},{"location":"guides/http2/#recommended-gthread-worker","title":"Recommended: gthread Worker","text":"<p>For HTTP/2, the gthread worker is recommended:</p> <pre><code>gunicorn myapp:app \\\n    --worker-class gthread \\\n    --threads 4 \\\n    --workers 2 \\\n    --http-protocols h2,h1 \\\n    --certfile server.crt \\\n    --keyfile server.key\n</code></pre>"},{"location":"guides/http2/#http-103-early-hints","title":"HTTP 103 Early Hints","text":"<p>Gunicorn supports HTTP 103 Early Hints (RFC 8297), allowing servers to send resource hints before the final response. This enables browsers to preload CSS, JavaScript, and other assets in parallel.</p>"},{"location":"guides/http2/#wsgi-applications","title":"WSGI Applications","text":"<p>Use the <code>wsgi.early_hints</code> callback in your WSGI application:</p> <pre><code>def app(environ, start_response):\n    # Send early hints if available\n    if 'wsgi.early_hints' in environ:\n        environ['wsgi.early_hints']([\n            ('Link', '&lt;/style.css&gt;; rel=preload; as=style'),\n            ('Link', '&lt;/app.js&gt;; rel=preload; as=script'),\n        ])\n\n    # Continue with the actual response\n    start_response('200 OK', [('Content-Type', 'text/html')])\n    return [b'&lt;html&gt;...&lt;/html&gt;']\n</code></pre>"},{"location":"guides/http2/#asgi-applications","title":"ASGI Applications","text":"<p>Use the <code>http.response.informational</code> message type:</p> <pre><code>async def app(scope, receive, send):\n    # Send early hints\n    await send({\n        \"type\": \"http.response.informational\",\n        \"status\": 103,\n        \"headers\": [\n            (b\"link\", b\"&lt;/style.css&gt;; rel=preload; as=style\"),\n            (b\"link\", b\"&lt;/app.js&gt;; rel=preload; as=script\"),\n        ],\n    })\n\n    # Send the actual response\n    await send({\n        \"type\": \"http.response.start\",\n        \"status\": 200,\n        \"headers\": [(b\"content-type\", b\"text/html\")],\n    })\n    await send({\n        \"type\": \"http.response.body\",\n        \"body\": b\"&lt;html&gt;...&lt;/html&gt;\",\n    })\n</code></pre> <p>Note</p> <p>Early hints are only sent to HTTP/1.1+ clients. HTTP/1.0 clients silently ignore the callback since they don't support 1xx responses.</p>"},{"location":"guides/http2/#stream-priority","title":"Stream Priority","text":"<p>HTTP/2 allows clients to indicate the relative priority of streams using PRIORITY frames (RFC 7540 Section 5.3). Gunicorn tracks stream priorities and exposes them to both WSGI and ASGI applications.</p>"},{"location":"guides/http2/#accessing-priority-in-wsgi","title":"Accessing Priority in WSGI","text":"<p>Priority information is available in the WSGI environ for HTTP/2 requests:</p> <pre><code>def app(environ, start_response):\n    # Access stream priority (HTTP/2 only)\n    weight = environ.get('gunicorn.http2.priority_weight')\n    depends_on = environ.get('gunicorn.http2.priority_depends_on')\n\n    if weight is not None:\n        # This is an HTTP/2 request with priority info\n        # Higher weight = client considers this more important\n        print(f\"Request priority: weight={weight}, depends_on={depends_on}\")\n\n    start_response('200 OK', [('Content-Type', 'text/plain')])\n    return [b'OK']\n</code></pre> Environ Key Range Default Description <code>gunicorn.http2.priority_weight</code> 1-256 16 Higher weight = more resources <code>gunicorn.http2.priority_depends_on</code> Stream ID 0 Parent stream (0 = root)"},{"location":"guides/http2/#accessing-priority-in-asgi","title":"Accessing Priority in ASGI","text":"<p>For ASGI applications, priority is available in the scope's <code>extensions</code> dict:</p> <pre><code>async def app(scope, receive, send):\n    if scope[\"type\"] == \"http\":\n        # Check for HTTP/2 priority extension\n        extensions = scope.get(\"extensions\", {})\n        priority = extensions.get(\"http.response.priority\")\n\n        if priority:\n            weight = priority[\"weight\"]        # 1-256\n            depends_on = priority[\"depends_on\"]  # Parent stream ID\n            print(f\"Request priority: weight={weight}, depends_on={depends_on}\")\n\n        await send({\n            \"type\": \"http.response.start\",\n            \"status\": 200,\n            \"headers\": [(b\"content-type\", b\"text/plain\")],\n        })\n        await send({\n            \"type\": \"http.response.body\",\n            \"body\": b\"OK\",\n        })\n</code></pre> Extension Key Field Range Default Description <code>http.response.priority</code> <code>weight</code> 1-256 16 Higher weight = more resources <code>http.response.priority</code> <code>depends_on</code> Stream ID 0 Parent stream (0 = root) <p>Note</p> <p>Stream priority is advisory. Applications can use it for scheduling decisions, but Gunicorn does not enforce priority-based request ordering. Priority information is only present for HTTP/2 requests.</p>"},{"location":"guides/http2/#response-trailers","title":"Response Trailers","text":"<p>HTTP/2 supports trailing headers (trailers) sent after the response body. This is commonly used for gRPC status codes, checksums, and timing information.</p>"},{"location":"guides/http2/#wsgi-applications_1","title":"WSGI Applications","text":"<p>For WSGI applications, use the <code>gunicorn.http2.send_trailers</code> callback in the environ:</p> <pre><code>def app(environ, start_response):\n    # Get trailer callback (HTTP/2 only)\n    send_trailers = environ.get('gunicorn.http2.send_trailers')\n\n    # Announce trailers in response headers\n    headers = [\n        ('Content-Type', 'application/grpc'),\n        ('Trailer', 'grpc-status, grpc-message'),\n    ]\n    start_response('200 OK', headers)\n\n    # Yield response body\n    yield b'response data'\n\n    # Send trailers after body (if available)\n    if send_trailers:\n        send_trailers([\n            ('grpc-status', '0'),\n            ('grpc-message', 'OK'),\n        ])\n</code></pre>"},{"location":"guides/http2/#asgi-applications_1","title":"ASGI Applications","text":"<p>For ASGI applications, use the <code>http.response.trailers</code> extension:</p> <pre><code>async def app(scope, receive, send):\n    # Send response with trailers flag\n    await send({\n        \"type\": \"http.response.start\",\n        \"status\": 200,\n        \"headers\": [\n            (b\"content-type\", b\"application/grpc\"),\n            (b\"trailer\", b\"grpc-status, grpc-message\"),\n        ],\n    })\n\n    # Send body\n    await send({\n        \"type\": \"http.response.body\",\n        \"body\": b\"response data\",\n        \"more_body\": False,\n    })\n\n    # Send trailers (HTTP/2 only)\n    if \"http.response.trailers\" in scope.get(\"extensions\", {}):\n        await send({\n            \"type\": \"http.response.trailers\",\n            \"headers\": [\n                (b\"grpc-status\", b\"0\"),\n                (b\"grpc-message\", b\"OK\"),\n            ],\n        })\n</code></pre>"},{"location":"guides/http2/#trailer-rules-rfc-7540","title":"Trailer Rules (RFC 7540)","text":"<ul> <li>Trailers MUST NOT include pseudo-headers (<code>:status</code>, <code>:path</code>, etc.)</li> <li>Announce trailers using the <code>Trailer</code> response header</li> <li>Trailers are only available in HTTP/2 (HTTP/1.1 chunked encoding not supported)</li> </ul>"},{"location":"guides/http2/#common-use-cases","title":"Common Use Cases","text":"Use Case Trailer Headers gRPC <code>grpc-status</code>, <code>grpc-message</code> Checksums <code>Content-MD5</code>, <code>Digest</code> Timing <code>Server-Timing</code> Signatures <code>Signature</code>"},{"location":"guides/http2/#production-deployment","title":"Production Deployment","text":""},{"location":"guides/http2/#with-nginx","title":"With Nginx","text":"<p>Configure nginx to proxy HTTP/2 connections to Gunicorn:</p> <pre><code>upstream gunicorn {\n    server 127.0.0.1:8443;\n    keepalive 32;\n}\n\nserver {\n    listen 443 ssl;\n    http2 on;\n    server_name example.com;\n\n    ssl_certificate /path/to/server.crt;\n    ssl_certificate_key /path/to/server.key;\n    ssl_protocols TLSv1.2 TLSv1.3;\n\n    # Forward 103 Early Hints (requires nginx 1.29+)\n    location / {\n        proxy_pass https://gunicorn;\n        proxy_http_version 1.1;\n        proxy_ssl_verify off;\n\n        early_hints $http2;\n\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n</code></pre> <p>Note</p> <p>For nginx to forward 103 Early Hints from upstream, you need nginx 1.29+ and the <code>early_hints</code> directive.</p>"},{"location":"guides/http2/#direct-tls-termination","title":"Direct TLS Termination","text":"<p>For simpler deployments, Gunicorn can terminate TLS directly:</p> <pre><code># gunicorn.conf.py\nbind = \"0.0.0.0:443\"\nworker_class = \"gthread\"\nthreads = 4\nworkers = 4\n\n# SSL\ncertfile = \"/etc/letsencrypt/live/example.com/fullchain.pem\"\nkeyfile = \"/etc/letsencrypt/live/example.com/privkey.pem\"\n\n# HTTP/2\nhttp_protocols = [\"h2\", \"h1\"]\nhttp2_max_concurrent_streams = 100\n</code></pre>"},{"location":"guides/http2/#recommended-settings","title":"Recommended Settings","text":"<p>For production HTTP/2 deployments:</p> <pre><code># gunicorn.conf.py\nworker_class = \"gthread\"\nworkers = 4\nthreads = 4\nkeepalive = 120  # HTTP/2 connections are long-lived\n\n# SSL/TLS\ncertfile = \"/path/to/server.crt\"\nkeyfile = \"/path/to/server.key\"\nssl_version = \"TLSv1_2\"  # Minimum TLS 1.2 for HTTP/2\n\n# HTTP/2\nhttp_protocols = [\"h2\", \"h1\"]\nhttp2_max_concurrent_streams = 100\nhttp2_initial_window_size = 65535\n</code></pre>"},{"location":"guides/http2/#troubleshooting","title":"Troubleshooting","text":""},{"location":"guides/http2/#http2-not-negotiated","title":"HTTP/2 not negotiated","text":"<p>If clients fall back to HTTP/1.1:</p> <ol> <li>Verify SSL is configured correctly</li> <li>Check that <code>h2</code> is in <code>--http-protocols</code></li> <li>Ensure the h2 library is installed: <code>pip install h2</code></li> <li>Verify ALPN support: <code>openssl s_client -alpn h2 -connect host:port</code></li> </ol>"},{"location":"guides/http2/#worker-doesnt-support-http2","title":"Worker doesn't support HTTP/2","text":"<p>If you see \"HTTP/2 is not supported by the sync worker\":</p> <pre><code># Switch to gthread worker\ngunicorn myapp:app --worker-class gthread --threads 4\n</code></pre>"},{"location":"guides/http2/#connection-errors-with-large-requests","title":"Connection errors with large requests","text":"<p>Increase flow control window sizes:</p> <pre><code>http2_initial_window_size = 1048576  # 1MB\nhttp2_max_frame_size = 32768  # 32KB\n</code></pre>"},{"location":"guides/http2/#too-many-concurrent-streams","title":"Too many concurrent streams","text":"<p>If clients report stream limit errors:</p> <pre><code>http2_max_concurrent_streams = 200  # Increase from default 100\n</code></pre>"},{"location":"guides/http2/#performance-tuning","title":"Performance Tuning","text":"<p>HTTP/2 performance depends on proper tuning of both Gunicorn and system settings. This section covers different tuning profiles and their trade-offs.</p>"},{"location":"guides/http2/#tuning-profiles","title":"Tuning Profiles","text":""},{"location":"guides/http2/#conservative-default","title":"Conservative (Default)","text":"<p>Best for: Low to moderate traffic, memory-constrained environments.</p> <pre><code># gunicorn.conf.py - Conservative profile\nworkers = 2\nworker_class = \"gthread\"\nthreads = 4\n\nhttp2_max_concurrent_streams = 100\nhttp2_initial_window_size = 65535      # 64KB\nhttp2_max_frame_size = 16384           # 16KB\n</code></pre> Pros Cons Low memory footprint Limited throughput at high concurrency Safe defaults per RFC More round-trips for large transfers Works on constrained systems May bottleneck at ~10K req/s"},{"location":"guides/http2/#balanced","title":"Balanced","text":"<p>Best for: Moderate traffic, general production use.</p> <pre><code># gunicorn.conf.py - Balanced profile\nworkers = 4\nworker_class = \"gthread\"\nthreads = 4\nbacklog = 2048\n\nhttp2_max_concurrent_streams = 128\nhttp2_initial_window_size = 262144     # 256KB\nhttp2_max_frame_size = 16384           # 16KB\n</code></pre> Pros Cons Good throughput (15K+ req/s) More memory per connection Handles traffic spikes Requires more CPU Good balance of resources"},{"location":"guides/http2/#high-concurrency","title":"High Concurrency","text":"<p>Best for: High traffic APIs, microservices, load testing.</p> <pre><code># gunicorn.conf.py - High concurrency profile\nworkers = 4\nworker_class = \"gthread\"\nthreads = 8\nbacklog = 2048\nworker_connections = 10000\n\nhttp2_max_concurrent_streams = 256\nhttp2_initial_window_size = 1048576    # 1MB\nhttp2_max_frame_size = 32768           # 32KB\n</code></pre> Pros Cons High throughput (20K+ req/s) Higher memory usage (~4x conservative) Handles 1000s of clients Requires system tuning Better large transfer performance May overwhelm downstream services"},{"location":"guides/http2/#setting-trade-offs","title":"Setting Trade-offs","text":""},{"location":"guides/http2/#http2_max_concurrent_streams","title":"<code>http2_max_concurrent_streams</code>","text":"<p>Controls how many simultaneous streams a client can open per connection.</p> Value Memory Throughput Use Case 50-100 Low Moderate APIs with small payloads 128-256 Medium High General web applications 500+ High Very High Streaming, real-time apps <p>Warning</p> <p>Very high values (500+) can lead to resource exhaustion under attack. Use with rate limiting.</p>"},{"location":"guides/http2/#http2_initial_window_size","title":"<code>http2_initial_window_size</code>","text":"<p>Flow control window size determines how much data can be sent before waiting for acknowledgment.</p> Value Memory Latency Use Case 65535 (64KB) Low Higher for large transfers Default, memory-constrained 262144 (256KB) Medium Balanced General use 1048576 (1MB) High Lower for large transfers Large file transfers, streaming <p>Note</p> <p>Larger windows improve throughput for large responses but increase memory usage per stream. Calculate: <code>max_streams \u00d7 window_size \u00d7 connections</code>.</p>"},{"location":"guides/http2/#http2_max_frame_size","title":"<code>http2_max_frame_size</code>","text":"<p>Maximum size of individual HTTP/2 frames.</p> Value Memory Efficiency Use Case 16384 (16KB) Low More frames for large data Default, RFC minimum 32768 (32KB) Medium Balanced General use 65536 (64KB) Higher Fewer frames Large payloads"},{"location":"guides/http2/#system-tuning-linux","title":"System Tuning (Linux)","text":"<p>For high concurrency (1000+ clients), tune these kernel parameters:</p> <pre><code># /etc/sysctl.conf or /etc/sysctl.d/99-gunicorn.conf\n\n# Increase socket backlog for burst connections\nnet.core.somaxconn = 65535\nnet.ipv4.tcp_max_syn_backlog = 65535\n\n# Increase network queue size\nnet.core.netdev_max_backlog = 65535\n\n# Expand ephemeral port range\nnet.ipv4.ip_local_port_range = 1024 65535\n\n# Allow reuse of TIME_WAIT sockets\nnet.ipv4.tcp_tw_reuse = 1\n\n# Increase max open files system-wide\nfs.file-max = 2097152\n</code></pre> <p>Apply with: <code>sudo sysctl -p</code></p> <p>Also increase file descriptor limits:</p> <pre><code># /etc/security/limits.conf\n* soft nofile 65535\n* hard nofile 65535\n</code></pre>"},{"location":"guides/http2/#docker-tuning","title":"Docker Tuning","text":"<p>For Docker deployments, add these to your container or compose file:</p> <pre><code># docker-compose.yml\nservices:\n  gunicorn:\n    ulimits:\n      nofile:\n        soft: 65535\n        hard: 65535\n    sysctls:\n      net.core.somaxconn: 65535\n</code></pre> <p>Or in Dockerfile:</p> <pre><code># Increase file descriptor limit\nRUN ulimit -n 65535\n</code></pre>"},{"location":"guides/http2/#benchmark-results","title":"Benchmark Results","text":"<p>Reference benchmarks using h2load with 4 Gunicorn workers in Docker (Apple M4 Pro):</p> Profile Clients Streams Requests/sec Latency (mean) Conservative 100 10 11,700 69ms Conservative 1000 10 12,750 441ms High Concurrency 100 10 15,000+ 50ms High Concurrency 1000 10 21,700 253ms High Concurrency 2000 10 12,300 243ms <p>Note</p> <p>Actual performance varies based on hardware, network, and application complexity. Always benchmark your specific workload.</p>"},{"location":"guides/http2/#testing-http2","title":"Testing HTTP/2","text":""},{"location":"guides/http2/#using-curl","title":"Using curl","text":"<pre><code># Check HTTP/2 support\ncurl -v --http2 https://localhost:443/\n\n# Force HTTP/2\ncurl --http2-prior-knowledge https://localhost:443/\n</code></pre>"},{"location":"guides/http2/#using-python","title":"Using Python","text":"<pre><code>import httpx\n\nwith httpx.Client(http2=True, verify=False) as client:\n    response = client.get(\"https://localhost:8443/\")\n    print(f\"HTTP Version: {response.http_version}\")\n</code></pre>"},{"location":"guides/http2/#complete-example","title":"Complete Example","text":"<p>A complete HTTP/2 example demonstrating priority and trailers is available in the <code>examples/http2_features/</code> directory. This includes:</p> <ul> <li>http2_app.py: ASGI application showing priority access and trailer sending</li> <li>test_http2.py: Test script verifying HTTP/2 features</li> <li>Dockerfile and docker-compose.yml: Docker setup for testing</li> </ul> <p>To run the example:</p> <pre><code>cd examples/http2_features\ndocker compose up --build\n\n# In another terminal:\ndocker compose exec http2-features python /app/http2_features/test_http2.py\n</code></pre> <p>The example demonstrates:</p> <ol> <li>Priority access: Reading <code>http.response.priority</code> extension in ASGI scope</li> <li>Response trailers: Sending <code>http.response.trailers</code> messages</li> <li>Combined features: Using both priority and trailers in one response</li> </ol>"},{"location":"guides/http2/#rfc-compliance","title":"RFC Compliance","text":"<p>Gunicorn's HTTP/2 implementation is built on the h2 library and complies with the following specifications:</p> Feature RFC Status Notes HTTP/2 Protocol RFC 7540 Compliant Core protocol support HTTP/2 Semantics RFC 9113 Compliant Updated HTTP/2 spec HPACK Compression RFC 7541 Compliant Via h2 library Stream State Machine RFC 7540 Section 5.1 Compliant Full state transitions Flow Control RFC 7540 Section 6.9 Compliant Stream and connection level Stream Priority RFC 7540 Section 5.3 Compliant Weight and dependency tracking Frame Size Limits RFC 7540 Section 6.2 Compliant Validated 16384-16777215 bytes Pseudo-Headers RFC 9113 Section 8.3 Compliant All required headers supported <code>:authority</code> Handling RFC 9113 Section 8.3.1 Compliant Takes precedence over Host Response Trailers RFC 9110 Section 6.5 Compliant Pseudo-headers forbidden GOAWAY Handling RFC 7540 Section 6.8 Compliant Graceful shutdown RST_STREAM Handling RFC 7540 Section 6.4 Compliant Stream reset Early Hints RFC 8297 Compliant 103 informational responses Server Push RFC 7540 Section 6.6 Not Implemented Optional feature, rarely used <p>Note</p> <p>Server Push (PUSH_PROMISE) is not implemented. This is an optional HTTP/2 feature that is being deprecated in HTTP/3 and is rarely used in practice.</p>"},{"location":"guides/http2/#security-considerations","title":"Security Considerations","text":"<p>HTTP/2 introduces new attack vectors compared to HTTP/1.1. Gunicorn includes several protections against known vulnerabilities.</p>"},{"location":"guides/http2/#built-in-protections","title":"Built-in Protections","text":"Attack Protection Setting Stream Multiplexing Abuse Limit concurrent streams <code>http2_max_concurrent_streams</code> (default: 100) HPACK Bomb Header size limits <code>http2_max_header_list_size</code> (default: 65536) Large Frame Attack Frame size limits <code>http2_max_frame_size</code> (validated: 16384-16777215) Resource Exhaustion Flow control windows <code>http2_initial_window_size</code> (default: 65535) Slow Read (Slowloris) Connection timeouts <code>timeout</code> and <code>keepalive</code> settings"},{"location":"guides/http2/#recommended-security-settings","title":"Recommended Security Settings","text":"<pre><code># gunicorn.conf.py - Security-hardened HTTP/2 configuration\n\n# Limit concurrent streams to prevent resource exhaustion\nhttp2_max_concurrent_streams = 100\n\n# Limit header size to prevent HPACK bomb attacks\nhttp2_max_header_list_size = 65536  # 64KB\n\n# Standard frame size (RFC minimum)\nhttp2_max_frame_size = 16384\n\n# Reasonable flow control window\nhttp2_initial_window_size = 65535  # 64KB\n\n# Connection timeouts to prevent slow attacks\ntimeout = 30\nkeepalive = 120\ngraceful_timeout = 30\n\n# Limit request sizes\nlimit_request_line = 4094\nlimit_request_fields = 100\nlimit_request_field_size = 8190\n</code></pre>"},{"location":"guides/http2/#additional-recommendations","title":"Additional Recommendations","text":"<ol> <li> <p>Use a reverse proxy: Deploy behind nginx, HAProxy, or a cloud load balancer    for additional DDoS protection and rate limiting.</p> </li> <li> <p>Enable rate limiting: Use your reverse proxy to limit requests per client.</p> </li> <li> <p>Monitor connections: Watch for clients opening many streams or holding    connections open without sending data.</p> </li> <li> <p>Keep dependencies updated: Regularly update the <code>h2</code> library for security fixes.</p> </li> </ol> <p>For more information on HTTP/2 security vulnerabilities, see:</p> <ul> <li>Imperva HTTP/2 Vulnerability Report</li> <li>NGINX HTTP/2 Security Advisory</li> </ul>"},{"location":"guides/http2/#compliance-testing","title":"Compliance Testing","text":""},{"location":"guides/http2/#h2spec","title":"h2spec","text":"<p>h2spec is the standard conformance testing tool for HTTP/2 implementations. It tests compliance with RFC 7540 and RFC 7541.</p> <pre><code># Install h2spec\n# macOS\nbrew install h2spec\n\n# Linux (download from releases)\ncurl -L https://github.com/summerwind/h2spec/releases/download/v2.6.0/h2spec_linux_amd64.tar.gz | tar xz\n\n# Run against your server\nh2spec -h localhost -p 8443 -t -k\n\n# Options:\n#   -t    Use TLS\n#   -k    Skip certificate verification\n#   -S    Strict mode (test SHOULD requirements)\n#   -v    Verbose output\n#   -j    Generate JUnit report\n</code></pre> <p>Example output: <pre><code>Generic tests for HTTP/2 server\n  1. Starting HTTP/2\n    \u2713 Sends a client connection preface\n    ...\n\nHypertext Transfer Protocol Version 2 (HTTP/2)\n  3. Starting HTTP/2\n    3.5. HTTP/2 Connection Preface\n      \u2713 Sends invalid connection preface\n      ...\n\n94 tests, 94 passed, 0 skipped, 0 failed\n</code></pre></p>"},{"location":"guides/http2/#nghttp2-tools","title":"nghttp2 Tools","text":"<p>nghttp2 provides useful debugging tools:</p> <pre><code># Install nghttp2\n# macOS\nbrew install nghttp2\n\n# Linux\napt-get install nghttp2-client\n\n# Test HTTP/2 connection\nnghttp -v https://localhost:8443/\n\n# Benchmark with h2load\nh2load -n 1000 -c 10 https://localhost:8443/\n</code></pre>"},{"location":"guides/http2/#online-testing","title":"Online Testing","text":"<p>For public servers, you can use online tools:</p> <ul> <li>KeyCDN HTTP/2 Test</li> <li>HTTP/2 Check</li> </ul>"},{"location":"guides/http2/#see-also","title":"See Also","text":"<ul> <li>Settings Reference - All HTTP/2 settings</li> <li>ASGI Worker - ASGI worker with HTTP/2 support</li> <li>Deploy - General deployment guidance</li> <li>SSL Configuration - SSL/TLS setup</li> </ul>"},{"location":"reference/settings/","title":"Settings","text":"<p>Generated file \u2014 update <code>gunicorn/config.py</code> instead.</p>"},{"location":"reference/settings/#settings","title":"Settings","text":"<p>This reference is built directly from <code>gunicorn.config.KNOWN_SETTINGS</code> and is regenerated during every documentation build.</p> <p>Note</p> <p>Settings can be provided through the <code>GUNICORN_CMD_ARGS</code> environment variable. For example:</p> <pre><code>$ GUNICORN_CMD_ARGS=\"--bind=127.0.0.1 --workers=3\" gunicorn app:app\n</code></pre> <p>Added in 19.7.</p> <p></p>"},{"location":"reference/settings/#config-file","title":"Config File","text":""},{"location":"reference/settings/#config","title":"<code>config</code>","text":"<p>Command line: <code>-c CONFIG</code>, <code>--config CONFIG</code></p> <p>Default: <code>'./gunicorn.conf.py'</code></p> <p>The Gunicorn config file.</p> <p>A string of the form <code>PATH</code>, <code>file:PATH</code>, or <code>python:MODULE_NAME</code>.</p> <p>Only has an effect when specified on the command line or as part of an application specific configuration.</p> <p>By default, a file named <code>gunicorn.conf.py</code> will be read from the same directory where gunicorn is being run.</p> <p>Changed in 19.4</p> <p>Loading the config from a Python module requires the <code>python:</code> prefix.</p>"},{"location":"reference/settings/#wsgi_app","title":"<code>wsgi_app</code>","text":"<p>Default: <code>None</code></p> <p>A WSGI application path in pattern <code>$(MODULE_NAME):$(VARIABLE_NAME)</code>.</p> <p>Added in 20.1.0</p>"},{"location":"reference/settings/#debugging","title":"Debugging","text":""},{"location":"reference/settings/#reload","title":"<code>reload</code>","text":"<p>Command line: <code>--reload</code></p> <p>Default: <code>False</code></p> <p>Restart workers when code changes.</p> <p>This setting is intended for development. It will cause workers to be restarted whenever application code changes.</p> <p>The reloader is incompatible with application preloading. When using a paste configuration be sure that the server block does not import any application code or the reload will not work as designed.</p> <p>The default behavior is to attempt inotify with a fallback to file system polling. Generally, inotify should be preferred if available because it consumes less system resources.</p> <p>Note</p> <p>In order to use the inotify reloader, you must have the <code>inotify</code> package installed.</p> <p>Warning</p> <p>Enabling this will change what happens on failure to load the the application: While the reloader is active, any and all clients that can make requests can see the full exception and traceback!</p>"},{"location":"reference/settings/#reload_engine","title":"<code>reload_engine</code>","text":"<p>Command line: <code>--reload-engine STRING</code></p> <p>Default: <code>'auto'</code></p> <p>The implementation that should be used to power reload.</p> <p>Valid engines are:</p> <ul> <li><code>'auto'</code></li> <li><code>'poll'</code></li> <li><code>'inotify'</code> (requires inotify)</li> </ul> <p>Added in 19.7</p>"},{"location":"reference/settings/#reload_extra_files","title":"<code>reload_extra_files</code>","text":"<p>Command line: <code>--reload-extra-file FILES</code></p> <p>Default: <code>[]</code></p> <p>Extends reload option to also watch and reload on additional files (e.g., templates, configurations, specifications, etc.).</p> <p>Added in 19.8</p>"},{"location":"reference/settings/#spew","title":"<code>spew</code>","text":"<p>Command line: <code>--spew</code></p> <p>Default: <code>False</code></p> <p>Install a trace function that spews every line executed by the server.</p> <p>This is the nuclear option.</p>"},{"location":"reference/settings/#check_config","title":"<code>check_config</code>","text":"<p>Command line: <code>--check-config</code></p> <p>Default: <code>False</code></p> <p>Check the configuration and exit. The exit status is 0 if the configuration is correct, and 1 if the configuration is incorrect.</p>"},{"location":"reference/settings/#print_config","title":"<code>print_config</code>","text":"<p>Command line: <code>--print-config</code></p> <p>Default: <code>False</code></p> <p>Print the configuration settings as fully resolved. Implies check-config.</p>"},{"location":"reference/settings/#dirty-arbiter-hooks","title":"Dirty Arbiter Hooks","text":""},{"location":"reference/settings/#on_dirty_starting","title":"<code>on_dirty_starting</code>","text":"<p>Default:</p> <pre><code>def on_dirty_starting(arbiter):\n    pass\n</code></pre> <p>Called just before the dirty arbiter process is initialized.</p> <p>The callable needs to accept a single instance variable for the DirtyArbiter.</p> <p>Added in 25.0.0</p>"},{"location":"reference/settings/#dirty_post_fork","title":"<code>dirty_post_fork</code>","text":"<p>Default:</p> <pre><code>def dirty_post_fork(arbiter, worker):\n    pass\n</code></pre> <p>Called just after a dirty worker has been forked.</p> <p>The callable needs to accept two instance variables for the DirtyArbiter and new DirtyWorker.</p> <p>Added in 25.0.0</p>"},{"location":"reference/settings/#dirty_worker_init","title":"<code>dirty_worker_init</code>","text":"<p>Default:</p> <pre><code>def dirty_worker_init(worker):\n    pass\n</code></pre> <p>Called just after a dirty worker has initialized all applications.</p> <p>The callable needs to accept one instance variable for the DirtyWorker.</p> <p>Added in 25.0.0</p>"},{"location":"reference/settings/#dirty_worker_exit","title":"<code>dirty_worker_exit</code>","text":"<p>Default:</p> <pre><code>def dirty_worker_exit(arbiter, worker):\n    pass\n</code></pre> <p>Called when a dirty worker has exited.</p> <p>The callable needs to accept two instance variables for the DirtyArbiter and the exiting DirtyWorker.</p> <p>Added in 25.0.0</p>"},{"location":"reference/settings/#dirty-arbiters","title":"Dirty Arbiters","text":""},{"location":"reference/settings/#dirty_apps","title":"<code>dirty_apps</code>","text":"<p>Command line: <code>--dirty-app STRING</code></p> <p>Default: <code>[]</code></p> <p>Dirty applications to load in the dirty worker pool.</p> <p>A list of application paths in pattern <code>$(MODULE_NAME):$(CLASS_NAME)</code>. Each dirty app must be a class that inherits from <code>DirtyApp</code> base class and implements the <code>init()</code>, <code>__call__()</code>, and <code>close()</code> methods.</p> <p>Example::</p> <pre><code>dirty_apps = [\n    \"myapp.ml:MLApp\",\n    \"myapp.images:ImageApp\",\n]\n</code></pre> <p>Dirty apps are loaded once when the dirty worker starts and persist in memory for the lifetime of the worker. This is ideal for loading ML models, database connection pools, or other stateful resources that are expensive to initialize.</p> <p>Added in 25.0.0</p>"},{"location":"reference/settings/#dirty_workers","title":"<code>dirty_workers</code>","text":"<p>Command line: <code>--dirty-workers INT</code></p> <p>Default: <code>0</code></p> <p>The number of dirty worker processes.</p> <p>A positive integer. Set to 0 (default) to disable the dirty arbiter. When set to a positive value, a dirty arbiter process will be spawned to manage the dirty worker pool.</p> <p>Dirty workers are separate from HTTP workers and are designed for long-running, blocking operations like ML model inference or heavy computation.</p> <p>Added in 25.0.0</p>"},{"location":"reference/settings/#dirty_timeout","title":"<code>dirty_timeout</code>","text":"<p>Command line: <code>--dirty-timeout INT</code></p> <p>Default: <code>300</code></p> <p>Timeout for dirty task execution in seconds.</p> <p>Workers silent for more than this many seconds are considered stuck and will be killed. Set to a high value for operations like model loading that may take a long time.</p> <p>Value is a positive number. Setting it to 0 disables timeout checking.</p> <p>Added in 25.0.0</p>"},{"location":"reference/settings/#dirty_threads","title":"<code>dirty_threads</code>","text":"<p>Command line: <code>--dirty-threads INT</code></p> <p>Default: <code>1</code></p> <p>The number of threads per dirty worker.</p> <p>Each dirty worker can use threads to handle concurrent operations within the same process, useful for async-safe applications.</p> <p>Added in 25.0.0</p>"},{"location":"reference/settings/#dirty_graceful_timeout","title":"<code>dirty_graceful_timeout</code>","text":"<p>Command line: <code>--dirty-graceful-timeout INT</code></p> <p>Default: <code>30</code></p> <p>Timeout for graceful dirty worker shutdown in seconds.</p> <p>After receiving a shutdown signal, dirty workers have this much time to finish their current tasks. Workers still alive after the timeout are force killed.</p> <p>Added in 25.0.0</p>"},{"location":"reference/settings/#http2","title":"HTTP/2","text":""},{"location":"reference/settings/#http_protocols","title":"<code>http_protocols</code>","text":"<p>Command line: <code>--http-protocols STRING</code></p> <p>Default: <code>'h1'</code></p> <p>HTTP protocol versions to support (comma-separated, order = preference).</p> <p>Valid protocols:</p> <ul> <li><code>h1</code> - HTTP/1.1 (default)</li> <li><code>h2</code> - HTTP/2 (requires TLS with ALPN)</li> <li><code>h3</code> - HTTP/3 (future, not yet implemented)</li> </ul> <p>Examples::</p> <pre><code># HTTP/1.1 only (default, backward compatible)\n--http-protocols=h1\n\n# Prefer HTTP/2, fallback to HTTP/1.1\n--http-protocols=h2,h1\n\n# HTTP/2 only (reject HTTP/1.1 clients)\n--http-protocols=h2\n</code></pre> <p>HTTP/2 requires:</p> <ul> <li>TLS (--certfile and --keyfile)</li> <li>The h2 library: <code>pip install gunicorn[http2]</code></li> <li>ALPN-capable TLS client</li> </ul> <p>Note</p> <p>HTTP/2 cleartext (h2c) is not supported due to security concerns and lack of browser support.</p> <p>Added in 25.0.0</p>"},{"location":"reference/settings/#http2_max_concurrent_streams","title":"<code>http2_max_concurrent_streams</code>","text":"<p>Command line: <code>--http2-max-concurrent-streams INT</code></p> <p>Default: <code>100</code></p> <p>Maximum number of concurrent HTTP/2 streams per connection.</p> <p>This limits how many requests can be processed simultaneously on a single HTTP/2 connection. Higher values allow more parallelism but use more memory.</p> <p>Default is 100, which matches common server configurations. The HTTP/2 specification allows up to 2^31-1.</p> <p>Added in 25.0.0</p>"},{"location":"reference/settings/#http2_initial_window_size","title":"<code>http2_initial_window_size</code>","text":"<p>Command line: <code>--http2-initial-window-size INT</code></p> <p>Default: <code>65535</code></p> <p>Initial HTTP/2 flow control window size in bytes.</p> <p>This controls how much data can be in-flight before the receiver sends WINDOW_UPDATE frames. Larger values can improve throughput for large transfers but use more memory.</p> <p>Default is 65535 (64KB - 1), the HTTP/2 specification default. Maximum is 2^31-1 (2147483647).</p> <p>Added in 25.0.0</p>"},{"location":"reference/settings/#http2_max_frame_size","title":"<code>http2_max_frame_size</code>","text":"<p>Command line: <code>--http2-max-frame-size INT</code></p> <p>Default: <code>16384</code></p> <p>Maximum HTTP/2 frame payload size in bytes.</p> <p>This is the largest frame payload the server will accept. Larger frames reduce framing overhead but may increase latency for small messages.</p> <p>Default is 16384 (16KB), the HTTP/2 specification minimum. Range is 16384 to 16777215 (16MB - 1).</p> <p>Added in 25.0.0</p>"},{"location":"reference/settings/#http2_max_header_list_size","title":"<code>http2_max_header_list_size</code>","text":"<p>Command line: <code>--http2-max-header-list-size INT</code></p> <p>Default: <code>65536</code></p> <p>Maximum size of HTTP/2 header list in bytes (HPACK protection).</p> <p>This limits the total size of headers after HPACK decompression. Protects against compression bombs and excessive memory use.</p> <p>Default is 65536 (64KB). Set to 0 for unlimited (not recommended).</p> <p>Added in 25.0.0</p>"},{"location":"reference/settings/#logging","title":"Logging","text":""},{"location":"reference/settings/#accesslog","title":"<code>accesslog</code>","text":"<p>Command line: <code>--access-logfile FILE</code></p> <p>Default: <code>None</code></p> <p>The Access log file to write to.</p> <p><code>'-'</code> means log to stdout.</p>"},{"location":"reference/settings/#disable_redirect_access_to_syslog","title":"<code>disable_redirect_access_to_syslog</code>","text":"<p>Command line: <code>--disable-redirect-access-to-syslog</code></p> <p>Default: <code>False</code></p> <p>Disable redirect access logs to syslog.</p> <p>Added in 19.8</p>"},{"location":"reference/settings/#access_log_format","title":"<code>access_log_format</code>","text":"<p>Command line: <code>--access-logformat STRING</code></p> <p>Default: <code>'%(h)s %(l)s %(u)s %(t)s \"%(r)s\" %(s)s %(b)s \"%(f)s\" \"%(a)s\"'</code></p> <p>The access log format.</p> <p>===========  =========== Identifier   Description ===========  =========== h            remote address l            <code>'-'</code> u            user name (if HTTP Basic auth used) t            date of the request r            status line (e.g. <code>GET / HTTP/1.1</code>) m            request method U            URL path without query string q            query string H            protocol s            status B            response length b            response length or <code>'-'</code> (CLF format) f            referrer (note: header is <code>referer</code>) a            user agent T            request time in seconds M            request time in milliseconds D            request time in microseconds L            request time in decimal seconds p            process ID {header}i    request header {header}o    response header {variable}e  environment variable ===========  ===========</p> <p>Use lowercase for header and environment variable names, and put <code>{...}x</code> names inside <code>%(...)s</code>. For example::</p> <pre><code>%({x-forwarded-for}i)s\n</code></pre>"},{"location":"reference/settings/#errorlog","title":"<code>errorlog</code>","text":"<p>Command line: <code>--error-logfile FILE</code>, <code>--log-file FILE</code></p> <p>Default: <code>'-'</code></p> <p>The Error log file to write to.</p> <p>Using <code>'-'</code> for FILE makes gunicorn log to stderr.</p> <p>Changed in 19.2</p> <p>Log to stderr by default.</p>"},{"location":"reference/settings/#loglevel","title":"<code>loglevel</code>","text":"<p>Command line: <code>--log-level LEVEL</code></p> <p>Default: <code>'info'</code></p> <p>The granularity of Error log outputs.</p> <p>Valid level names are:</p> <ul> <li><code>'debug'</code></li> <li><code>'info'</code></li> <li><code>'warning'</code></li> <li><code>'error'</code></li> <li><code>'critical'</code></li> </ul>"},{"location":"reference/settings/#capture_output","title":"<code>capture_output</code>","text":"<p>Command line: <code>--capture-output</code></p> <p>Default: <code>False</code></p> <p>Redirect stdout/stderr to specified file in errorlog.</p> <p>Added in 19.6</p>"},{"location":"reference/settings/#logger_class","title":"<code>logger_class</code>","text":"<p>Command line: <code>--logger-class STRING</code></p> <p>Default: <code>'gunicorn.glogging.Logger'</code></p> <p>The logger you want to use to log events in Gunicorn.</p> <p>The default class (<code>gunicorn.glogging.Logger</code>) handles most normal usages in logging. It provides error and access logging.</p> <p>You can provide your own logger by giving Gunicorn a Python path to a class that quacks like <code>gunicorn.glogging.Logger</code>.</p>"},{"location":"reference/settings/#logconfig","title":"<code>logconfig</code>","text":"<p>Command line: <code>--log-config FILE</code></p> <p>Default: <code>None</code></p> <p>The log config file to use. Gunicorn uses the standard Python logging module's Configuration file format.</p>"},{"location":"reference/settings/#logconfig_dict","title":"<code>logconfig_dict</code>","text":"<p>Default: <code>{}</code></p> <p>The log config dictionary to use, using the standard Python logging module's dictionary configuration format. This option takes precedence over the logconfig and logconfig-json options, which uses the older file configuration format and JSON respectively.</p> <p>Format: https://docs.python.org/3/library/logging.config.html#logging.config.dictConfig</p> <p>For more context you can look at the default configuration dictionary for logging, which can be found at <code>gunicorn.glogging.CONFIG_DEFAULTS</code>.</p> <p>Added in 19.8</p>"},{"location":"reference/settings/#logconfig_json","title":"<code>logconfig_json</code>","text":"<p>Command line: <code>--log-config-json FILE</code></p> <p>Default: <code>None</code></p> <p>The log config to read config from a JSON file</p> <p>Format: https://docs.python.org/3/library/logging.config.html#logging.config.jsonConfig</p> <p>Added in 20.0</p>"},{"location":"reference/settings/#syslog_addr","title":"<code>syslog_addr</code>","text":"<p>Command line: <code>--log-syslog-to SYSLOG_ADDR</code></p> <p>Default:</p> <p>Platform-specific:</p> <ul> <li>macOS: <code>'unix:///var/run/syslog'</code></li> <li>FreeBSD/DragonFly: <code>'unix:///var/run/log'</code></li> <li>OpenBSD: <code>'unix:///dev/log'</code></li> <li>Linux/other: <code>'udp://localhost:514'</code></li> </ul> <p>Address to send syslog messages.</p> <p>Address is a string of the form:</p> <ul> <li><code>unix://PATH#TYPE</code> : for unix domain socket. <code>TYPE</code> can be <code>stream</code>   for the stream driver or <code>dgram</code> for the dgram driver.   <code>stream</code> is the default.</li> <li><code>udp://HOST:PORT</code> : for UDP sockets</li> <li><code>tcp://HOST:PORT</code> : for TCP sockets</li> </ul>"},{"location":"reference/settings/#syslog","title":"<code>syslog</code>","text":"<p>Command line: <code>--log-syslog</code></p> <p>Default: <code>False</code></p> <p>Send Gunicorn logs to syslog.</p> <p>Changed in 19.8</p> <p>You can now disable sending access logs by using the disable-redirect-access-to-syslog setting.</p>"},{"location":"reference/settings/#syslog_prefix","title":"<code>syslog_prefix</code>","text":"<p>Command line: <code>--log-syslog-prefix SYSLOG_PREFIX</code></p> <p>Default: <code>None</code></p> <p>Makes Gunicorn use the parameter as program-name in the syslog entries.</p> <p>All entries will be prefixed by <code>gunicorn.&lt;prefix&gt;</code>. By default the program name is the name of the process.</p>"},{"location":"reference/settings/#syslog_facility","title":"<code>syslog_facility</code>","text":"<p>Command line: <code>--log-syslog-facility SYSLOG_FACILITY</code></p> <p>Default: <code>'user'</code></p> <p>Syslog facility name</p>"},{"location":"reference/settings/#enable_stdio_inheritance","title":"<code>enable_stdio_inheritance</code>","text":"<p>Command line: <code>-R</code>, <code>--enable-stdio-inheritance</code></p> <p>Default: <code>False</code></p> <p>Enable stdio inheritance.</p> <p>Enable inheritance for stdio file descriptors in daemon mode.</p> <p>Note: To disable the Python stdout buffering, you can to set the user environment variable <code>PYTHONUNBUFFERED</code> .</p>"},{"location":"reference/settings/#statsd_host","title":"<code>statsd_host</code>","text":"<p>Command line: <code>--statsd-host STATSD_ADDR</code></p> <p>Default: <code>None</code></p> <p>The address of the StatsD server to log to.</p> <p>Address is a string of the form:</p> <ul> <li><code>unix://PATH</code> : for a unix domain socket.</li> <li><code>HOST:PORT</code> : for a network address</li> </ul> <p>Added in 19.1</p>"},{"location":"reference/settings/#dogstatsd_tags","title":"<code>dogstatsd_tags</code>","text":"<p>Command line: <code>--dogstatsd-tags DOGSTATSD_TAGS</code></p> <p>Default: <code>''</code></p> <p>A comma-delimited list of datadog statsd (dogstatsd) tags to append to statsd metrics. e.g. <code>'tag1:value1,tag2:value2'</code></p> <p>Added in 20</p>"},{"location":"reference/settings/#statsd_prefix","title":"<code>statsd_prefix</code>","text":"<p>Command line: <code>--statsd-prefix STATSD_PREFIX</code></p> <p>Default: <code>''</code></p> <p>Prefix to use when emitting statsd metrics (a trailing <code>.</code> is added, if not provided).</p> <p>Added in 19.2</p>"},{"location":"reference/settings/#enable_backlog_metric","title":"<code>enable_backlog_metric</code>","text":"<p>Command line: <code>--enable-backlog-metric</code></p> <p>Default: <code>False</code></p> <p>Enable socket backlog metric (only supported on Linux).</p> <p>When enabled, gunicorn will emit a <code>gunicorn.backlog</code> histogram metric showing the number of connections waiting in the socket backlog.</p>"},{"location":"reference/settings/#process-naming","title":"Process Naming","text":""},{"location":"reference/settings/#proc_name","title":"<code>proc_name</code>","text":"<p>Command line: <code>-n STRING</code>, <code>--name STRING</code></p> <p>Default: <code>None</code></p> <p>A base to use with setproctitle for process naming.</p> <p>This affects things like <code>ps</code> and <code>top</code>. If you're going to be running more than one instance of Gunicorn you'll probably want to set a name to tell them apart. This requires that you install the setproctitle module.</p> <p>If not set, the default_proc_name setting will be used.</p>"},{"location":"reference/settings/#default_proc_name","title":"<code>default_proc_name</code>","text":"<p>Default: <code>'gunicorn'</code></p> <p>Internal setting that is adjusted for each type of application.</p>"},{"location":"reference/settings/#ssl","title":"SSL","text":""},{"location":"reference/settings/#keyfile","title":"<code>keyfile</code>","text":"<p>Command line: <code>--keyfile FILE</code></p> <p>Default: <code>None</code></p> <p>SSL key file</p>"},{"location":"reference/settings/#certfile","title":"<code>certfile</code>","text":"<p>Command line: <code>--certfile FILE</code></p> <p>Default: <code>None</code></p> <p>SSL certificate file</p>"},{"location":"reference/settings/#ssl_version","title":"<code>ssl_version</code>","text":"<p>Command line: <code>--ssl-version</code></p> <p>Default: <code>&lt;_SSLMethod.PROTOCOL_TLS: 2&gt;</code></p> <p>SSL version to use (see stdlib ssl module's).</p> <p>Deprecated in 21.0</p> <p>The option is deprecated and it is currently ignored. Use ssl-context instead.</p> <p>============= ============ --ssl-version Description ============= ============ SSLv3         SSLv3 is not-secure and is strongly discouraged. SSLv23        Alias for TLS. Deprecated in Python 3.6, use TLS. TLS           Negotiate highest possible version between client/server.               Can yield SSL. (Python 3.6+) TLSv1         TLS 1.0 TLSv1_1       TLS 1.1 (Python 3.4+) TLSv1_2       TLS 1.2 (Python 3.4+) TLS_SERVER    Auto-negotiate the highest protocol version like TLS,               but only support server-side SSLSocket connections.               (Python 3.6+) ============= ============</p> <p>Changed in 19.7</p> <p>The default value has been changed from <code>ssl.PROTOCOL_TLSv1</code> to <code>ssl.PROTOCOL_SSLv23</code>.</p> <p>Changed in 20.0</p> <p>This setting now accepts string names based on <code>ssl.PROTOCOL_</code> constants.</p> <p>Changed in 20.0.1</p> <p>The default value has been changed from <code>ssl.PROTOCOL_SSLv23</code> to <code>ssl.PROTOCOL_TLS</code> when Python &gt;= 3.6 .</p>"},{"location":"reference/settings/#cert_reqs","title":"<code>cert_reqs</code>","text":"<p>Command line: <code>--cert-reqs</code></p> <p>Default: <code>&lt;VerifyMode.CERT_NONE: 0&gt;</code></p> <p>Whether client certificate is required (see stdlib ssl module's)</p> <p>===========  =========================== --cert-reqs      Description ===========  =========================== <code>0</code>          no client verification <code>1</code>          ssl.CERT_OPTIONAL <code>2</code>          ssl.CERT_REQUIRED ===========  ===========================</p>"},{"location":"reference/settings/#ca_certs","title":"<code>ca_certs</code>","text":"<p>Command line: <code>--ca-certs FILE</code></p> <p>Default: <code>None</code></p> <p>CA certificates file</p>"},{"location":"reference/settings/#suppress_ragged_eofs","title":"<code>suppress_ragged_eofs</code>","text":"<p>Command line: <code>--suppress-ragged-eofs</code></p> <p>Default: <code>True</code></p> <p>Suppress ragged EOFs (see stdlib ssl module's)</p>"},{"location":"reference/settings/#do_handshake_on_connect","title":"<code>do_handshake_on_connect</code>","text":"<p>Command line: <code>--do-handshake-on-connect</code></p> <p>Default: <code>False</code></p> <p>Whether to perform SSL handshake on socket connect (see stdlib ssl module's)</p>"},{"location":"reference/settings/#ciphers","title":"<code>ciphers</code>","text":"<p>Command line: <code>--ciphers</code></p> <p>Default: <code>None</code></p> <p>SSL Cipher suite to use, in the format of an OpenSSL cipher list.</p> <p>By default we use the default cipher list from Python's <code>ssl</code> module, which contains ciphers considered strong at the time of each Python release.</p> <p>As a recommended alternative, the Open Web App Security Project (OWASP) offers <code>a vetted set of strong cipher strings rated A+ to C- &lt;https://www.owasp.org/index.php/TLS_Cipher_String_Cheat_Sheet&gt;</code>_. OWASP provides details on user-agent compatibility at each security level.</p> <p>See the <code>OpenSSL Cipher List Format Documentation &lt;https://www.openssl.org/docs/manmaster/man1/ciphers.html#CIPHER-LIST-FORMAT&gt;</code>_ for details on the format of an OpenSSL cipher list.</p>"},{"location":"reference/settings/#security","title":"Security","text":""},{"location":"reference/settings/#limit_request_line","title":"<code>limit_request_line</code>","text":"<p>Command line: <code>--limit-request-line INT</code></p> <p>Default: <code>4094</code></p> <p>The maximum size of HTTP request line in bytes.</p> <p>This parameter is used to limit the allowed size of a client's HTTP request-line. Since the request-line consists of the HTTP method, URI, and protocol version, this directive places a restriction on the length of a request-URI allowed for a request on the server. A server needs this value to be large enough to hold any of its resource names, including any information that might be passed in the query part of a GET request. Value is a number from 0 (unlimited) to 8190.</p> <p>This parameter can be used to prevent any DDOS attack.</p>"},{"location":"reference/settings/#limit_request_fields","title":"<code>limit_request_fields</code>","text":"<p>Command line: <code>--limit-request-fields INT</code></p> <p>Default: <code>100</code></p> <p>Limit the number of HTTP headers fields in a request.</p> <p>This parameter is used to limit the number of headers in a request to prevent DDOS attack. Used with the limit_request_field_size it allows more safety. By default this value is 100 and can't be larger than 32768.</p>"},{"location":"reference/settings/#limit_request_field_size","title":"<code>limit_request_field_size</code>","text":"<p>Command line: <code>--limit-request-field_size INT</code></p> <p>Default: <code>8190</code></p> <p>Limit the allowed size of an HTTP request header field.</p> <p>Value is a positive number or 0. Setting it to 0 will allow unlimited header field sizes.</p> <p>Warning</p> <p>Setting this parameter to a very high or unlimited value can open up for DDOS attacks.</p>"},{"location":"reference/settings/#server-hooks","title":"Server Hooks","text":""},{"location":"reference/settings/#on_starting","title":"<code>on_starting</code>","text":"<p>Default:</p> <pre><code>def on_starting(server):\n    pass\n</code></pre> <p>Called just before the master process is initialized.</p> <p>The callable needs to accept a single instance variable for the Arbiter.</p>"},{"location":"reference/settings/#on_reload","title":"<code>on_reload</code>","text":"<p>Default:</p> <pre><code>def on_reload(server):\n    pass\n</code></pre> <p>Called to recycle workers during a reload via SIGHUP.</p> <p>The callable needs to accept a single instance variable for the Arbiter.</p>"},{"location":"reference/settings/#when_ready","title":"<code>when_ready</code>","text":"<p>Default:</p> <pre><code>def when_ready(server):\n    pass\n</code></pre> <p>Called just after the server is started.</p> <p>The callable needs to accept a single instance variable for the Arbiter.</p>"},{"location":"reference/settings/#pre_fork","title":"<code>pre_fork</code>","text":"<p>Default:</p> <pre><code>def pre_fork(server, worker):\n    pass\n</code></pre> <p>Called just before a worker is forked.</p> <p>The callable needs to accept two instance variables for the Arbiter and new Worker.</p>"},{"location":"reference/settings/#post_fork","title":"<code>post_fork</code>","text":"<p>Default:</p> <pre><code>def post_fork(server, worker):\n    pass\n</code></pre> <p>Called just after a worker has been forked.</p> <p>The callable needs to accept two instance variables for the Arbiter and new Worker.</p>"},{"location":"reference/settings/#post_worker_init","title":"<code>post_worker_init</code>","text":"<p>Default:</p> <pre><code>def post_worker_init(worker):\n    pass\n</code></pre> <p>Called just after a worker has initialized the application.</p> <p>The callable needs to accept one instance variable for the initialized Worker.</p>"},{"location":"reference/settings/#worker_int","title":"<code>worker_int</code>","text":"<p>Default:</p> <pre><code>def worker_int(worker):\n    pass\n</code></pre> <p>Called just after a worker exited on SIGINT or SIGQUIT.</p> <p>The callable needs to accept one instance variable for the initialized Worker.</p>"},{"location":"reference/settings/#worker_abort","title":"<code>worker_abort</code>","text":"<p>Default:</p> <pre><code>def worker_abort(worker):\n    pass\n</code></pre> <p>Called when a worker received the SIGABRT signal.</p> <p>This call generally happens on timeout.</p> <p>The callable needs to accept one instance variable for the initialized Worker.</p>"},{"location":"reference/settings/#pre_exec","title":"<code>pre_exec</code>","text":"<p>Default:</p> <pre><code>def pre_exec(server):\n    pass\n</code></pre> <p>Called just before a new master process is forked.</p> <p>The callable needs to accept a single instance variable for the Arbiter.</p>"},{"location":"reference/settings/#pre_request","title":"<code>pre_request</code>","text":"<p>Default:</p> <pre><code>def pre_request(worker, req):\n    worker.log.debug(\"%s %s\", req.method, req.path)\n</code></pre> <p>Called just before a worker processes the request.</p> <p>The callable needs to accept two instance variables for the Worker and the Request.</p>"},{"location":"reference/settings/#post_request","title":"<code>post_request</code>","text":"<p>Default:</p> <pre><code>def post_request(worker, req, environ, resp):\n    pass\n</code></pre> <p>Called after a worker processes the request.</p> <p>The callable needs to accept two instance variables for the Worker and the Request. If a third parameter is defined it will be passed the environment. If a fourth parameter is defined it will be passed the Response.</p>"},{"location":"reference/settings/#child_exit","title":"<code>child_exit</code>","text":"<p>Default:</p> <pre><code>def child_exit(server, worker):\n    pass\n</code></pre> <p>Called just after a worker has been exited, in the master process.</p> <p>The callable needs to accept two instance variables for the Arbiter and the just-exited Worker.</p> <p>Added in 19.7</p>"},{"location":"reference/settings/#worker_exit","title":"<code>worker_exit</code>","text":"<p>Default:</p> <pre><code>def worker_exit(server, worker):\n    pass\n</code></pre> <p>Called just after a worker has been exited, in the worker process.</p> <p>The callable needs to accept two instance variables for the Arbiter and the just-exited Worker.</p>"},{"location":"reference/settings/#nworkers_changed","title":"<code>nworkers_changed</code>","text":"<p>Default:</p> <pre><code>def nworkers_changed(server, new_value, old_value):\n    pass\n</code></pre> <p>Called just after num_workers has been changed.</p> <p>The callable needs to accept an instance variable of the Arbiter and two integers of number of workers after and before change.</p> <p>If the number of workers is set for the first time, old_value would be <code>None</code>.</p>"},{"location":"reference/settings/#on_exit","title":"<code>on_exit</code>","text":"<p>Default:</p> <pre><code>def on_exit(server):\n    pass\n</code></pre> <p>Called just before exiting Gunicorn.</p> <p>The callable needs to accept a single instance variable for the Arbiter.</p>"},{"location":"reference/settings/#ssl_context","title":"<code>ssl_context</code>","text":"<p>Default:</p> <pre><code>def ssl_context(config, default_ssl_context_factory):\n    return default_ssl_context_factory()\n</code></pre> <p>Called when SSLContext is needed.</p> <p>Allows customizing SSL context.</p> <p>The callable needs to accept an instance variable for the Config and a factory function that returns default SSLContext which is initialized with certificates, private key, cert_reqs, and ciphers according to config and can be further customized by the callable. The callable needs to return SSLContext object.</p> <p>Following example shows a configuration file that sets the minimum TLS version to 1.3:</p> <pre><code>def ssl_context(conf, default_ssl_context_factory):\n    import ssl\n    context = default_ssl_context_factory()\n    context.minimum_version = ssl.TLSVersion.TLSv1_3\n    return context\n</code></pre> <p>Added in 21.0</p>"},{"location":"reference/settings/#server-mechanics","title":"Server Mechanics","text":""},{"location":"reference/settings/#preload_app","title":"<code>preload_app</code>","text":"<p>Command line: <code>--preload</code></p> <p>Default: <code>False</code></p> <p>Load application code before the worker processes are forked.</p> <p>By preloading an application you can save some RAM resources as well as speed up server boot times. Although, if you defer application loading to each worker process, you can reload your application code easily by restarting workers.</p>"},{"location":"reference/settings/#sendfile","title":"<code>sendfile</code>","text":"<p>Command line: <code>--no-sendfile</code></p> <p>Default: <code>None</code></p> <p>Disables the use of <code>sendfile()</code>.</p> <p>If not set, the value of the <code>SENDFILE</code> environment variable is used to enable or disable its usage.</p> <p>Added in 19.2</p> <p>Changed in 19.4</p> <p>Swapped <code>--sendfile</code> with <code>--no-sendfile</code> to actually allow disabling.</p> <p>Changed in 19.6</p> <p>added support for the <code>SENDFILE</code> environment variable</p>"},{"location":"reference/settings/#reuse_port","title":"<code>reuse_port</code>","text":"<p>Command line: <code>--reuse-port</code></p> <p>Default: <code>False</code></p> <p>Set the <code>SO_REUSEPORT</code> flag on the listening socket.</p> <p>Added in 19.8</p>"},{"location":"reference/settings/#chdir","title":"<code>chdir</code>","text":"<p>Command line: <code>--chdir</code></p> <p>Default:</p> <p><code>'.'</code></p> <p>Change directory to specified directory before loading apps.</p>"},{"location":"reference/settings/#daemon","title":"<code>daemon</code>","text":"<p>Command line: <code>-D</code>, <code>--daemon</code></p> <p>Default: <code>False</code></p> <p>Daemonize the Gunicorn process.</p> <p>Detaches the server from the controlling terminal and enters the background.</p>"},{"location":"reference/settings/#raw_env","title":"<code>raw_env</code>","text":"<p>Command line: <code>-e ENV</code>, <code>--env ENV</code></p> <p>Default: <code>[]</code></p> <p>Set environment variables in the execution environment.</p> <p>Should be a list of strings in the <code>key=value</code> format.</p> <p>For example on the command line:</p> <pre><code>$ gunicorn -b 127.0.0.1:8000 --env FOO=1 test:app\n</code></pre> <p>Or in the configuration file:</p> <pre><code>raw_env = [\"FOO=1\"]\n</code></pre>"},{"location":"reference/settings/#pidfile","title":"<code>pidfile</code>","text":"<p>Command line: <code>-p FILE</code>, <code>--pid FILE</code></p> <p>Default: <code>None</code></p> <p>A filename to use for the PID file.</p> <p>If not set, no PID file will be written.</p>"},{"location":"reference/settings/#worker_tmp_dir","title":"<code>worker_tmp_dir</code>","text":"<p>Command line: <code>--worker-tmp-dir DIR</code></p> <p>Default: <code>None</code></p> <p>A directory to use for the worker heartbeat temporary file.</p> <p>If not set, the default temporary directory will be used.</p> <p>Note</p> <p>The current heartbeat system involves calling <code>os.fchmod</code> on temporary file handlers and may block a worker for arbitrary time if the directory is on a disk-backed filesystem.</p> <p>See blocking-os-fchmod for more detailed information and a solution for avoiding this problem.</p>"},{"location":"reference/settings/#user","title":"<code>user</code>","text":"<p>Command line: <code>-u USER</code>, <code>--user USER</code></p> <p>Default:</p> <p><code>os.geteuid()</code></p> <p>Switch worker processes to run as this user.</p> <p>A valid user id (as an integer) or the name of a user that can be retrieved with a call to <code>pwd.getpwnam(value)</code> or <code>None</code> to not change the worker process user.</p>"},{"location":"reference/settings/#group","title":"<code>group</code>","text":"<p>Command line: <code>-g GROUP</code>, <code>--group GROUP</code></p> <p>Default:</p> <p><code>os.getegid()</code></p> <p>Switch worker process to run as this group.</p> <p>A valid group id (as an integer) or the name of a user that can be retrieved with a call to <code>grp.getgrnam(value)</code> or <code>None</code> to not change the worker processes group.</p>"},{"location":"reference/settings/#umask","title":"<code>umask</code>","text":"<p>Command line: <code>-m INT</code>, <code>--umask INT</code></p> <p>Default: <code>0</code></p> <p>A bit mask for the file mode on files written by Gunicorn.</p> <p>Note that this affects unix socket permissions.</p> <p>A valid value for the <code>os.umask(mode)</code> call or a string compatible with <code>int(value, 0)</code> (<code>0</code> means Python guesses the base, so values like <code>0</code>, <code>0xFF</code>, <code>0022</code> are valid for decimal, hex, and octal representations)</p>"},{"location":"reference/settings/#initgroups","title":"<code>initgroups</code>","text":"<p>Command line: <code>--initgroups</code></p> <p>Default: <code>False</code></p> <p>If true, set the worker process's group access list with all of the groups of which the specified username is a member, plus the specified group id.</p> <p>Added in 19.7</p>"},{"location":"reference/settings/#tmp_upload_dir","title":"<code>tmp_upload_dir</code>","text":"<p>Default: <code>None</code></p> <p>Directory to store temporary request data as they are read.</p> <p>This may disappear in the near future.</p> <p>This path should be writable by the process permissions set for Gunicorn workers. If not specified, Gunicorn will choose a system generated temporary directory.</p>"},{"location":"reference/settings/#secure_scheme_headers","title":"<code>secure_scheme_headers</code>","text":"<p>Default: <code>{'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}</code></p> <p>A dictionary containing headers and values that the front-end proxy uses to indicate HTTPS requests. If the source IP is permitted by forwarded-allow-ips (below), and at least one request header matches a key-value pair listed in this dictionary, then Gunicorn will set <code>wsgi.url_scheme</code> to <code>https</code>, so your application can tell that the request is secure.</p> <p>If the other headers listed in this dictionary are not present in the request, they will be ignored, but if the other headers are present and do not match the provided values, then the request will fail to parse. See the note below for more detailed examples of this behaviour.</p> <p>The dictionary should map upper-case header names to exact string values. The value comparisons are case-sensitive, unlike the header names, so make sure they're exactly what your front-end proxy sends when handling HTTPS requests.</p> <p>It is important that your front-end proxy configuration ensures that the headers defined here can not be passed directly from the client.</p>"},{"location":"reference/settings/#forwarded_allow_ips","title":"<code>forwarded_allow_ips</code>","text":"<p>Command line: <code>--forwarded-allow-ips STRING</code></p> <p>Default: <code>'127.0.0.1,::1'</code></p> <p>Front-end's IP addresses or networks from which allowed to handle set secure headers. (comma separated).</p> <p>Supports both individual IP addresses (e.g., <code>192.168.1.1</code>) and CIDR networks (e.g., <code>192.168.0.0/16</code>).</p> <p>Set to <code>*</code> to disable checking of front-end IPs. This is useful for setups where you don't know in advance the IP address of front-end, but instead have ensured via other means that only your authorized front-ends can access Gunicorn.</p> <p>By default, the value of the <code>FORWARDED_ALLOW_IPS</code> environment variable. If it is not defined, the default is <code>\"127.0.0.1,::1\"</code>.</p> <p>Note</p> <p>This option does not affect UNIX socket connections. Connections not associated with an IP address are treated as allowed, unconditionally.</p> <p>Note</p> <p>The interplay between the request headers, the value of <code>forwarded_allow_ips</code>, and the value of <code>secure_scheme_headers</code> is complex. Various scenarios are documented below to further elaborate. In each case, we have a request from the remote address 134.213.44.18, and the default value of <code>secure_scheme_headers</code>:</p> <p>.. code::</p> <pre><code>secure_scheme_headers = {\n    'X-FORWARDED-PROTOCOL': 'ssl',\n    'X-FORWARDED-PROTO': 'https',\n    'X-FORWARDED-SSL': 'on'\n}\n</code></pre> <p>.. list-table::     :header-rows: 1     :align: center     :widths: auto</p> <pre><code>* - ``forwarded-allow-ips``\n  - Secure Request Headers\n  - Result\n  - Explanation\n* - .. code::\n\n        [\"127.0.0.1\"]\n  - .. code::\n\n        X-Forwarded-Proto: https\n  - .. code::\n\n        wsgi.url_scheme = \"http\"\n  - IP address was not allowed\n* - .. code::\n\n        \"*\"\n  - &lt;none&gt;\n  - .. code::\n\n        wsgi.url_scheme = \"http\"\n  - IP address allowed, but no secure headers provided\n* - .. code::\n\n        \"*\"\n  - .. code::\n\n        X-Forwarded-Proto: https\n  - .. code::\n\n        wsgi.url_scheme = \"https\"\n  - IP address allowed, one request header matched\n* - .. code::\n\n        [\"134.213.44.18\"]\n  - .. code::\n\n        X-Forwarded-Ssl: on\n        X-Forwarded-Proto: http\n  - ``InvalidSchemeHeaders()`` raised\n  - IP address allowed, but the two secure headers disagreed on if HTTPS was used\n</code></pre>"},{"location":"reference/settings/#pythonpath","title":"<code>pythonpath</code>","text":"<p>Command line: <code>--pythonpath STRING</code></p> <p>Default: <code>None</code></p> <p>A comma-separated list of directories to add to the Python path.</p> <p>e.g. <code>'/home/djangoprojects/myproject,/home/python/mylibrary'</code>.</p>"},{"location":"reference/settings/#paste","title":"<code>paste</code>","text":"<p>Command line: <code>--paste STRING</code>, <code>--paster STRING</code></p> <p>Default: <code>None</code></p> <p>Load a PasteDeploy config file. The argument may contain a <code>#</code> symbol followed by the name of an app section from the config file, e.g. <code>production.ini#admin</code>.</p> <p>At this time, using alternate server blocks is not supported. Use the command line arguments to control server configuration instead.</p>"},{"location":"reference/settings/#proxy_protocol","title":"<code>proxy_protocol</code>","text":"<p>Command line: <code>--proxy-protocol MODE</code></p> <p>Default: <code>'off'</code></p> <p>Enable PROXY protocol support.</p> <p>Allow using HTTP and PROXY protocol together. It may be useful for work with stunnel as HTTPS frontend and Gunicorn as HTTP server, or with HAProxy.</p> <p>Accepted values:</p> <ul> <li><code>off</code> - Disabled (default)</li> <li><code>v1</code> - PROXY protocol v1 only (text format)</li> <li><code>v2</code> - PROXY protocol v2 only (binary format)</li> <li><code>auto</code> - Auto-detect v1 or v2</li> </ul> <p>Using <code>--proxy-protocol</code> without a value is equivalent to <code>auto</code>.</p> <p>PROXY protocol v1: http://haproxy.1wt.eu/download/1.5/doc/proxy-protocol.txt PROXY protocol v2: https://www.haproxy.org/download/1.8/doc/proxy-protocol.txt</p> <p>Example for stunnel config::</p> <pre><code>[https]\nprotocol = proxy\naccept  = 443\nconnect = 80\ncert = /etc/ssl/certs/stunnel.pem\nkey = /etc/ssl/certs/stunnel.key\n</code></pre> <p>Changed in 24.1.0</p> <p>Extended to support version selection (v1, v2, auto).</p>"},{"location":"reference/settings/#proxy_allow_ips","title":"<code>proxy_allow_ips</code>","text":"<p>Command line: <code>--proxy-allow-from</code></p> <p>Default: <code>'127.0.0.1,::1'</code></p> <p>Front-end's IP addresses or networks from which allowed accept proxy requests (comma separated).</p> <p>Supports both individual IP addresses (e.g., <code>192.168.1.1</code>) and CIDR networks (e.g., <code>192.168.0.0/16</code>).</p> <p>Set to <code>*</code> to disable checking of front-end IPs. This is useful for setups where you don't know in advance the IP address of front-end, but instead have ensured via other means that only your authorized front-ends can access Gunicorn.</p> <p>Note</p> <p>This option does not affect UNIX socket connections. Connections not associated with an IP address are treated as allowed, unconditionally.</p>"},{"location":"reference/settings/#protocol","title":"<code>protocol</code>","text":"<p>Command line: <code>--protocol STRING</code></p> <p>Default: <code>'http'</code></p> <p>The protocol for incoming connections.</p> <ul> <li><code>http</code> - Standard HTTP/1.x (default)</li> <li><code>uwsgi</code> - uWSGI binary protocol (for nginx uwsgi_pass)</li> </ul> <p>When using the uWSGI protocol, Gunicorn can receive requests from nginx using the uwsgi_pass directive::</p> <pre><code>upstream gunicorn {\n    server 127.0.0.1:8000;\n}\nlocation / {\n    uwsgi_pass gunicorn;\n    include uwsgi_params;\n}\n</code></pre>"},{"location":"reference/settings/#uwsgi_allow_ips","title":"<code>uwsgi_allow_ips</code>","text":"<p>Command line: <code>--uwsgi-allow-from</code></p> <p>Default: <code>'127.0.0.1,::1'</code></p> <p>IPs allowed to send uWSGI protocol requests (comma separated).</p> <p>Set to <code>*</code> to allow all IPs. This is useful for setups where you don't know in advance the IP address of front-end, but instead have ensured via other means that only your authorized front-ends can access Gunicorn.</p> <p>Note</p> <p>This option does not affect UNIX socket connections. Connections not associated with an IP address are treated as allowed, unconditionally.</p>"},{"location":"reference/settings/#raw_paste_global_conf","title":"<code>raw_paste_global_conf</code>","text":"<p>Command line: <code>--paste-global CONF</code></p> <p>Default: <code>[]</code></p> <p>Set a PasteDeploy global config variable in <code>key=value</code> form.</p> <p>The option can be specified multiple times.</p> <p>The variables are passed to the PasteDeploy entrypoint. Example::</p> <pre><code>$ gunicorn -b 127.0.0.1:8000 --paste development.ini --paste-global FOO=1 --paste-global BAR=2\n</code></pre> <p>Added in 19.7</p>"},{"location":"reference/settings/#permit_obsolete_folding","title":"<code>permit_obsolete_folding</code>","text":"<p>Command line: <code>--permit-obsolete-folding</code></p> <p>Default: <code>False</code></p> <p>Permit requests employing obsolete HTTP line folding mechanism</p> <p>The folding mechanism was deprecated by rfc7230 Section 3.2.4 and will not be  employed in HTTP request headers from standards-compliant HTTP clients.</p> <p>This option is provided to diagnose backwards-incompatible changes. Use with care and only if necessary. Temporary; the precise effect of this option may change in a future version, or it may be removed altogether.</p> <p>Added in 23.0.0</p>"},{"location":"reference/settings/#strip_header_spaces","title":"<code>strip_header_spaces</code>","text":"<p>Command line: <code>--strip-header-spaces</code></p> <p>Default: <code>False</code></p> <p>Strip spaces present between the header name and the the <code>:</code>.</p> <p>This is known to induce vulnerabilities and is not compliant with the HTTP/1.1 standard. See https://portswigger.net/research/http-desync-attacks-request-smuggling-reborn.</p> <p>Use with care and only if necessary. Deprecated; scheduled for removal in 25.0.0</p> <p>Added in 20.0.1</p>"},{"location":"reference/settings/#permit_unconventional_http_method","title":"<code>permit_unconventional_http_method</code>","text":"<p>Command line: <code>--permit-unconventional-http-method</code></p> <p>Default: <code>False</code></p> <p>Permit HTTP methods not matching conventions, such as IANA registration guidelines</p> <p>This permits request methods of length less than 3 or more than 20, methods with lowercase characters or methods containing the # character. HTTP methods are case sensitive by definition, and merely uppercase by convention.</p> <p>If unset, Gunicorn will apply nonstandard restrictions and cause 400 response status in cases where otherwise 501 status is expected. While this option does modify that behaviour, it should not be depended upon to guarantee standards-compliant behaviour. Rather, it is provided temporarily, to assist in diagnosing backwards-incompatible changes around the incomplete application of those restrictions.</p> <p>Use with care and only if necessary. Temporary; scheduled for removal in 24.0.0</p> <p>Added in 22.0.0</p>"},{"location":"reference/settings/#permit_unconventional_http_version","title":"<code>permit_unconventional_http_version</code>","text":"<p>Command line: <code>--permit-unconventional-http-version</code></p> <p>Default: <code>False</code></p> <p>Permit HTTP version not matching conventions of 2023</p> <p>This disables the refusal of likely malformed request lines. It is unusual to specify HTTP 1 versions other than 1.0 and 1.1.</p> <p>This option is provided to diagnose backwards-incompatible changes. Use with care and only if necessary. Temporary; the precise effect of this option may change in a future version, or it may be removed altogether.</p> <p>Added in 22.0.0</p>"},{"location":"reference/settings/#casefold_http_method","title":"<code>casefold_http_method</code>","text":"<p>Command line: <code>--casefold-http-method</code></p> <p>Default: <code>False</code></p> <p>Transform received HTTP methods to uppercase</p> <p>HTTP methods are case sensitive by definition, and merely uppercase by convention.</p> <p>This option is provided because previous versions of gunicorn defaulted to this behaviour.</p> <p>Use with care and only if necessary. Deprecated; scheduled for removal in 24.0.0</p> <p>Added in 22.0.0</p>"},{"location":"reference/settings/#forwarder_headers","title":"<code>forwarder_headers</code>","text":"<p>Command line: <code>--forwarder-headers</code></p> <p>Default: <code>'SCRIPT_NAME,PATH_INFO'</code></p> <p>A list containing upper-case header field names that the front-end proxy (see forwarded-allow-ips) sets, to be used in WSGI environment.</p> <p>This option has no effect for headers not present in the request.</p> <p>This option can be used to transfer <code>SCRIPT_NAME</code>, <code>PATH_INFO</code> and <code>REMOTE_USER</code>.</p> <p>It is important that your front-end proxy configuration ensures that the headers defined here can not be passed directly from the client.</p>"},{"location":"reference/settings/#header_map","title":"<code>header_map</code>","text":"<p>Command line: <code>--header-map</code></p> <p>Default: <code>'drop'</code></p> <p>Configure how header field names are mapped into environ</p> <p>Headers containing underscores are permitted by RFC9110, but gunicorn joining headers of different names into the same environment variable will dangerously confuse applications as to which is which.</p> <p>The safe default <code>drop</code> is to silently drop headers that cannot be unambiguously mapped. The value <code>refuse</code> will return an error if a request contains any such header. The value <code>dangerous</code> matches the previous, not advisable, behaviour of mapping different header field names into the same environ name.</p> <p>If the source is permitted as explained in forwarded-allow-ips, and the header name is present in forwarder-headers, the header is mapped into environment regardless of the state of this setting.</p> <p>Use with care and only if necessary and after considering if your problem could instead be solved by specifically renaming or rewriting only the intended headers on a proxy in front of Gunicorn.</p> <p>Added in 22.0.0</p>"},{"location":"reference/settings/#root_path","title":"<code>root_path</code>","text":"<p>Command line: <code>--root-path STRING</code></p> <p>Default: <code>''</code></p> <p>The root path for ASGI applications.</p> <p>This is used to set the <code>root_path</code> in the ASGI scope, which allows applications to know their mount point when behind a reverse proxy.</p> <p>For example, if your application is mounted at <code>/api</code>, set this to <code>/api</code>.</p> <p>Added in 24.0.0</p>"},{"location":"reference/settings/#server-socket","title":"Server Socket","text":""},{"location":"reference/settings/#bind","title":"<code>bind</code>","text":"<p>Command line: <code>-b ADDRESS</code>, <code>--bind ADDRESS</code></p> <p>Default: <code>['127.0.0.1:8000']</code></p> <p>The socket to bind.</p> <p>A string of the form: <code>HOST</code>, <code>HOST:PORT</code>, <code>unix:PATH</code>, <code>fd://FD</code>. An IP is a valid <code>HOST</code>.</p> <p>Changed in 20.0</p> <p>Support for <code>fd://FD</code> got added.</p> <p>Multiple addresses can be bound. ex.::</p> <pre><code>$ gunicorn -b 127.0.0.1:8000 -b [::1]:8000 test:app\n</code></pre> <p>will bind the <code>test:app</code> application on localhost both on ipv6 and ipv4 interfaces.</p> <p>If the <code>PORT</code> environment variable is defined, the default is <code>['0.0.0.0:$PORT']</code>. If it is not defined, the default is <code>['127.0.0.1:8000']</code>.</p>"},{"location":"reference/settings/#backlog","title":"<code>backlog</code>","text":"<p>Command line: <code>--backlog INT</code></p> <p>Default: <code>2048</code></p> <p>The maximum number of pending connections.</p> <p>This refers to the number of clients that can be waiting to be served. Exceeding this number results in the client getting an error when attempting to connect. It should only affect servers under significant load.</p> <p>Must be a positive integer. Generally set in the 64-2048 range.</p>"},{"location":"reference/settings/#worker-processes","title":"Worker Processes","text":""},{"location":"reference/settings/#workers","title":"<code>workers</code>","text":"<p>Command line: <code>-w INT</code>, <code>--workers INT</code></p> <p>Default: <code>1</code></p> <p>The number of worker processes for handling requests.</p> <p>A positive integer generally in the <code>2-4 x $(NUM_CORES)</code> range. You'll want to vary this a bit to find the best for your particular application's work load.</p> <p>By default, the value of the <code>WEB_CONCURRENCY</code> environment variable, which is set by some Platform-as-a-Service providers such as Heroku. If it is not defined, the default is <code>1</code>.</p>"},{"location":"reference/settings/#worker_class","title":"<code>worker_class</code>","text":"<p>Command line: <code>-k STRING</code>, <code>--worker-class STRING</code></p> <p>Default: <code>'sync'</code></p> <p>The type of workers to use.</p> <p>The default class (<code>sync</code>) should handle most \"normal\" types of workloads. You'll want to read :doc:<code>design</code> for information on when you might want to choose one of the other worker classes. Required libraries may be installed using setuptools' <code>extras_require</code> feature.</p> <p>A string referring to one of the following bundled classes:</p> <ul> <li><code>sync</code></li> <li><code>eventlet</code> - DEPRECATED: will be removed in 26.0. Requires eventlet &gt;= 0.40.3</li> <li><code>gevent</code>   - Requires gevent &gt;= 24.10.1 (or install it via   <code>pip install gunicorn[gevent]</code>)</li> <li><code>tornado</code>  - Requires tornado &gt;= 6.5.0 (or install it via   <code>pip install gunicorn[tornado]</code>)</li> <li><code>gthread</code>  - Python 2 requires the futures package to be installed   (or install it via <code>pip install gunicorn[gthread]</code>)</li> </ul> <p>Optionally, you can provide your own worker by giving Gunicorn a Python path to a subclass of <code>gunicorn.workers.base.Worker</code>. This alternative syntax will load the gevent class: <code>gunicorn.workers.ggevent.GeventWorker</code>.</p>"},{"location":"reference/settings/#threads","title":"<code>threads</code>","text":"<p>Command line: <code>--threads INT</code></p> <p>Default: <code>1</code></p> <p>The number of worker threads for handling requests.</p> <p>Run each worker with the specified number of threads.</p> <p>A positive integer generally in the <code>2-4 x $(NUM_CORES)</code> range. You'll want to vary this a bit to find the best for your particular application's work load.</p> <p>If it is not defined, the default is <code>1</code>.</p> <p>This setting only affects the Gthread worker type.</p> <p>Note</p> <p>If you try to use the <code>sync</code> worker type and set the <code>threads</code> setting to more than 1, the <code>gthread</code> worker type will be used instead.</p>"},{"location":"reference/settings/#worker_connections","title":"<code>worker_connections</code>","text":"<p>Command line: <code>--worker-connections INT</code></p> <p>Default: <code>1000</code></p> <p>The maximum number of simultaneous clients.</p> <p>This setting only affects the <code>gthread</code>, <code>eventlet</code> and <code>gevent</code> worker types.</p>"},{"location":"reference/settings/#max_requests","title":"<code>max_requests</code>","text":"<p>Command line: <code>--max-requests INT</code></p> <p>Default: <code>0</code></p> <p>The maximum number of requests a worker will process before restarting.</p> <p>Any value greater than zero will limit the number of requests a worker will process before automatically restarting. This is a simple method to help limit the damage of memory leaks.</p> <p>If this is set to zero (the default) then the automatic worker restarts are disabled.</p>"},{"location":"reference/settings/#max_requests_jitter","title":"<code>max_requests_jitter</code>","text":"<p>Command line: <code>--max-requests-jitter INT</code></p> <p>Default: <code>0</code></p> <p>The maximum jitter to add to the max_requests setting.</p> <p>The jitter causes the restart per worker to be randomized by <code>randint(0, max_requests_jitter)</code>. This is intended to stagger worker restarts to avoid all workers restarting at the same time.</p> <p>Added in 19.2</p>"},{"location":"reference/settings/#timeout","title":"<code>timeout</code>","text":"<p>Command line: <code>-t INT</code>, <code>--timeout INT</code></p> <p>Default: <code>30</code></p> <p>Workers silent for more than this many seconds are killed and restarted.</p> <p>Value is a positive number or 0. Setting it to 0 has the effect of infinite timeouts by disabling timeouts for all workers entirely.</p> <p>Generally, the default of thirty seconds should suffice. Only set this noticeably higher if you're sure of the repercussions for sync workers. For the non sync workers it just means that the worker process is still communicating and is not tied to the length of time required to handle a single request.</p>"},{"location":"reference/settings/#graceful_timeout","title":"<code>graceful_timeout</code>","text":"<p>Command line: <code>--graceful-timeout INT</code></p> <p>Default: <code>30</code></p> <p>Timeout for graceful workers restart in seconds.</p> <p>After receiving a restart signal, workers have this much time to finish serving requests. Workers still alive after the timeout (starting from the receipt of the restart signal) are force killed.</p>"},{"location":"reference/settings/#keepalive","title":"<code>keepalive</code>","text":"<p>Command line: <code>--keep-alive INT</code></p> <p>Default: <code>2</code></p> <p>The number of seconds to wait for requests on a Keep-Alive connection.</p> <p>Generally set in the 1-5 seconds range for servers with direct connection to the client (e.g. when you don't have separate load balancer). When Gunicorn is deployed behind a load balancer, it often makes sense to set this to a higher value.</p> <p>Note</p> <p><code>sync</code> worker does not support persistent connections and will ignore this option.</p>"},{"location":"reference/settings/#asgi_loop","title":"<code>asgi_loop</code>","text":"<p>Command line: <code>--asgi-loop STRING</code></p> <p>Default: <code>'auto'</code></p> <p>Event loop implementation for ASGI workers.</p> <ul> <li>auto: Use uvloop if available, otherwise asyncio</li> <li>asyncio: Use Python's built-in asyncio event loop</li> <li>uvloop: Use uvloop (must be installed separately)</li> </ul> <p>This setting only affects the <code>asgi</code> worker type.</p> <p>uvloop typically provides better performance but requires installing the uvloop package.</p> <p>Added in 24.0.0</p>"},{"location":"reference/settings/#asgi_lifespan","title":"<code>asgi_lifespan</code>","text":"<p>Command line: <code>--asgi-lifespan STRING</code></p> <p>Default: <code>'auto'</code></p> <p>Control ASGI lifespan protocol handling.</p> <ul> <li>auto: Detect if app supports lifespan, enable if so</li> <li>on: Always run lifespan protocol (fail if unsupported)</li> <li>off: Never run lifespan protocol</li> </ul> <p>The lifespan protocol allows ASGI applications to run code at startup and shutdown. This is essential for frameworks like FastAPI that need to initialize database connections, caches, or other resources.</p> <p>This setting only affects the <code>asgi</code> worker type.</p> <p>Added in 24.0.0</p>"}]}